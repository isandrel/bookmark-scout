This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.changeset/
  config.json
  README.md
.github/
  workflows/
    dependabot-auto-merge.yml
    deploy-website.yml
    release-extension.yml
    repomix.yml
  dependabot.yml
public/
  _locales/
    en/
      messages.json
    ja/
      messages.json
    ko/
      messages.json
  icon-128.png
  icon-16.png
  icon-32.png
  icon-48.png
  icon-96.png
  icon-original.png
src/
  assets/
    react.svg
  components/
    bookmark/
      BookmarkItem.tsx
      BookmarkSearch.tsx
      FolderItem.tsx
      index.ts
      NewFolderInput.tsx
    page/
      BookmarksPage.tsx
      OptionsPage.tsx
      PopupPage.tsx
    ui/
      table/
        columns.tsx
        data-table-column-header.tsx
        data-table-date-filter.tsx
        data-table-faceted-filter.tsx
        data-table-pagination.tsx
        data-table-toolbar.tsx
        data-table-view-options.tsx
        data-table.tsx
        move-bookmark-buttons.tsx
      accordion.tsx
      badge.tsx
      button.tsx
      calendar.tsx
      card.tsx
      checkbox.tsx
      collapsible.tsx
      command.tsx
      dialog.tsx
      dropdown-menu.tsx
      input.tsx
      label.tsx
      popover.tsx
      select.tsx
      separator.tsx
      sheet.tsx
      sidebar.tsx
      skeleton.tsx
      switch.tsx
      table.tsx
      toast.tsx
      toaster.tsx
      tooltip.tsx
    error-boundary.tsx
    theme-provider.tsx
  entrypoints/
    bookmarks/
      index.html
      main.tsx
    options/
      index.html
      main.tsx
    popup/
      index.html
      main.tsx
    sidepanel/
      index.html
      main.tsx
  hooks/
    use-bookmark-drag-drop.ts
    use-bookmark-filter.ts
    use-bookmark-operations.ts
    use-bookmarks.ts
    use-debounce.ts
    use-folder-expansion.ts
    use-i18n.ts
    use-mobile.tsx
    use-toast.ts
  lib/
    utils.ts
  services/
    bookmarks.ts
    index.ts
  stores/
    bookmark-store.ts
    index.ts
  styles/
    popup.css
  types/
    bookmark.ts
    index.ts
  App.css
  App.tsx
  globals.css
  index.css
  vite-env.d.ts
translations/
  README.ja.md
  README.ko.md
website/
  app/
    [locale]/
      docs/
        contributing/
          page.tsx
        features/
          page.tsx
        getting-started/
          page.tsx
        page.tsx
      layout.tsx
      page.tsx
    favicon.ico
    globals.css
    icon.png
    layout.tsx
    page.tsx
    robots.ts
    sitemap.ts
  components/
    JsonLd.tsx
    LanguageSwitcher.tsx
  i18n/
    request.ts
    routing.ts
  messages/
    en.json
    ja.json
    ko.json
  public/
    file.svg
    globe.svg
    icon.png
    manifest.json
    next.svg
    vercel.svg
    window.svg
  .gitignore
  eslint.config.mjs
  next.config.ts
  package.json
  postcss.config.mjs
  README.md
  tsconfig.json
.gitignore
biome.json
CHANGELOG.md
components.json
LICENSE
package.json
postcss.config.ts
README.md
tailwind.config.ts
tsconfig.json
tsconfig.tsbuildinfo
wxt.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".changeset/config.json">
{
  "$schema": "https://unpkg.com/@changesets/config@3.1.2/schema.json",
  "changelog": "@changesets/cli/changelog",
  "commit": false,
  "fixed": [],
  "linked": [],
  "access": "restricted",
  "baseBranch": "main",
  "updateInternalDependencies": "patch",
  "ignore": []
}
</file>

<file path=".changeset/README.md">
# Changesets

Hello and welcome! This folder has been automatically generated by `@changesets/cli`, a build tool that works
with multi-package repos, or single-package repos to help you version and publish your code. You can
find the full documentation for it [in our repository](https://github.com/changesets/changesets)

We have a quick list of common questions to get you started engaging with this project in
[our documentation](https://github.com/changesets/changesets/blob/main/docs/common-questions.md)
</file>

<file path=".github/workflows/dependabot-auto-merge.yml">
name: Dependabot auto-merge

on: pull_request

permissions:
  contents: write
  pull-requests: write

jobs:
  dependabot:
    runs-on: ubuntu-latest
    if: github.actor == 'dependabot[bot]'
    steps:
      - name: Fetch Dependabot metadata
        id: metadata
        uses: dependabot/fetch-metadata@v2
        with:
          github-token: "${{ secrets.GITHUB_TOKEN }}"

      - name: Enable auto-merge for minor/patch updates
        if: steps.metadata.outputs.update-type == 'version-update:semver-minor' || steps.metadata.outputs.update-type == 'version-update:semver-patch'
        run: gh pr merge --auto --squash "$PR_URL"
        env:
          PR_URL: ${{ github.event.pull_request.html_url }}
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
</file>

<file path=".github/dependabot.yml">
# Dependabot configuration for automated dependency updates
# https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

version: 2
updates:
  # Bun dependencies for the main extension
  - package-ecosystem: "bun"
    directory: "/"
    schedule:
      interval: "daily"
    commit-message:
      prefix: "chore(deps)"
    labels:
      - "dependencies"
      - "bun"
    open-pull-requests-limit: 10
    groups:
      # Group minor and patch updates together
      minor-and-patch:
        patterns:
          - "*"
        update-types:
          - "minor"
          - "patch"

  # Bun dependencies for the website
  - package-ecosystem: "bun"
    directory: "/website"
    schedule:
      interval: "daily"
    commit-message:
      prefix: "chore(deps)"
    labels:
      - "dependencies"
      - "bun"
      - "website"
    open-pull-requests-limit: 5

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "daily"
    commit-message:
      prefix: "chore(deps)"
    labels:
      - "dependencies"
      - "github-actions"
</file>

<file path="public/_locales/en/messages.json">
{
    "extName": {
        "message": "Bookmark Scout",
        "description": "Extension name"
    },
    "extDescription": {
        "message": "Quickly search and save bookmarks to specific folders.",
        "description": "Extension description"
    },
    "searchPlaceholder": {
        "message": "Search bookmarks...",
        "description": "Search input placeholder"
    },
    "newFolder": {
        "message": "New Folder",
        "description": "Default name for new folder"
    },
    "retry": {
        "message": "Retry",
        "description": "Retry button text"
    },
    "error": {
        "message": "Error",
        "description": "Error label"
    },
    "folderCreated": {
        "message": "Folder Created",
        "description": "Toast title for folder creation success"
    },
    "errorCreatingFolder": {
        "message": "Error Creating Folder",
        "description": "Toast title for folder creation error"
    },
    "bookmarkAdded": {
        "message": "Bookmark Added",
        "description": "Toast title for bookmark addition success"
    },
    "errorAddingBookmark": {
        "message": "Error Adding Bookmark",
        "description": "Toast title for bookmark addition error"
    },
    "bookmarkDeleted": {
        "message": "Bookmark Deleted",
        "description": "Toast title for bookmark deletion success"
    },
    "errorDeletingBookmark": {
        "message": "Error Deleting Bookmark",
        "description": "Toast title for bookmark deletion error"
    },
    "folderDeleted": {
        "message": "Folder Deleted",
        "description": "Toast title for folder deletion success"
    },
    "errorDeletingFolder": {
        "message": "Error Deleting Folder",
        "description": "Toast title for folder deletion error"
    },
    "itemMoved": {
        "message": "Item Moved",
        "description": "Toast title for item move success"
    },
    "errorMovingItem": {
        "message": "Error Moving Item",
        "description": "Toast title for item move error"
    },
    "addBookmark": {
        "message": "Add current page",
        "description": "Add bookmark tooltip"
    },
    "addFolder": {
        "message": "Add folder",
        "description": "Add folder tooltip"
    },
    "deleteFolder": {
        "message": "Delete folder",
        "description": "Delete folder tooltip"
    },
    "deleteBookmark": {
        "message": "Delete bookmark",
        "description": "Delete bookmark tooltip"
    },
    "expandAll": {
        "message": "Expand all",
        "description": "Expand all button tooltip"
    },
    "collapseAll": {
        "message": "Collapse all",
        "description": "Collapse all button tooltip"
    },
    "enterFolderName": {
        "message": "Enter folder name...",
        "description": "New folder input placeholder"
    }
}
</file>

<file path="public/_locales/ja/messages.json">
{
    "extName": {
        "message": "ブックマークスカウト",
        "description": "Extension name"
    },
    "extDescription": {
        "message": "ブックマークを素早く検索し、特定のフォルダに保存します。",
        "description": "Extension description"
    },
    "searchPlaceholder": {
        "message": "ブックマークを検索...",
        "description": "Search input placeholder"
    },
    "newFolder": {
        "message": "新規フォルダ",
        "description": "Default name for new folder"
    },
    "retry": {
        "message": "再試行",
        "description": "Retry button text"
    },
    "error": {
        "message": "エラー",
        "description": "Error label"
    },
    "folderCreated": {
        "message": "フォルダを作成しました",
        "description": "Toast title for folder creation success"
    },
    "errorCreatingFolder": {
        "message": "フォルダの作成に失敗しました",
        "description": "Toast title for folder creation error"
    },
    "bookmarkAdded": {
        "message": "ブックマークを追加しました",
        "description": "Toast title for bookmark addition success"
    },
    "errorAddingBookmark": {
        "message": "ブックマークの追加に失敗しました",
        "description": "Toast title for bookmark addition error"
    },
    "bookmarkDeleted": {
        "message": "ブックマークを削除しました",
        "description": "Toast title for bookmark deletion success"
    },
    "errorDeletingBookmark": {
        "message": "ブックマークの削除に失敗しました",
        "description": "Toast title for bookmark deletion error"
    },
    "folderDeleted": {
        "message": "フォルダを削除しました",
        "description": "Toast title for folder deletion success"
    },
    "errorDeletingFolder": {
        "message": "フォルダの削除に失敗しました",
        "description": "Toast title for folder deletion error"
    },
    "itemMoved": {
        "message": "アイテムを移動しました",
        "description": "Toast title for item move success"
    },
    "errorMovingItem": {
        "message": "アイテムの移動に失敗しました",
        "description": "Toast title for item move error"
    },
    "addBookmark": {
        "message": "現在のページを追加",
        "description": "Add bookmark tooltip"
    },
    "addFolder": {
        "message": "フォルダを追加",
        "description": "Add folder tooltip"
    },
    "deleteFolder": {
        "message": "フォルダを削除",
        "description": "Delete folder tooltip"
    },
    "deleteBookmark": {
        "message": "ブックマークを削除",
        "description": "Delete bookmark tooltip"
    },
    "expandAll": {
        "message": "すべて展開",
        "description": "Expand all button tooltip"
    },
    "collapseAll": {
        "message": "すべて折りたたむ",
        "description": "Collapse all button tooltip"
    },
    "enterFolderName": {
        "message": "フォルダ名を入力...",
        "description": "New folder input placeholder"
    }
}
</file>

<file path="public/_locales/ko/messages.json">
{
    "extName": {
        "message": "북마크 스카우트",
        "description": "Extension name"
    },
    "extDescription": {
        "message": "북마크를 빠르게 검색하고 특정 폴더에 저장합니다.",
        "description": "Extension description"
    },
    "searchPlaceholder": {
        "message": "북마크 검색...",
        "description": "Search input placeholder"
    },
    "newFolder": {
        "message": "새 폴더",
        "description": "Default name for new folder"
    },
    "retry": {
        "message": "다시 시도",
        "description": "Retry button text"
    },
    "error": {
        "message": "오류",
        "description": "Error label"
    },
    "folderCreated": {
        "message": "폴더가 생성되었습니다",
        "description": "Toast title for folder creation success"
    },
    "errorCreatingFolder": {
        "message": "폴더 생성 오류",
        "description": "Toast title for folder creation error"
    },
    "bookmarkAdded": {
        "message": "북마크가 추가되었습니다",
        "description": "Toast title for bookmark addition success"
    },
    "errorAddingBookmark": {
        "message": "북마크 추가 오류",
        "description": "Toast title for bookmark addition error"
    },
    "bookmarkDeleted": {
        "message": "북마크가 삭제되었습니다",
        "description": "Toast title for bookmark deletion success"
    },
    "errorDeletingBookmark": {
        "message": "북마크 삭제 오류",
        "description": "Toast title for bookmark deletion error"
    },
    "folderDeleted": {
        "message": "폴더가 삭제되었습니다",
        "description": "Toast title for folder deletion success"
    },
    "errorDeletingFolder": {
        "message": "폴더 삭제 오류",
        "description": "Toast title for folder deletion error"
    },
    "itemMoved": {
        "message": "항목이 이동되었습니다",
        "description": "Toast title for item move success"
    },
    "errorMovingItem": {
        "message": "항목 이동 오류",
        "description": "Toast title for item move error"
    },
    "addBookmark": {
        "message": "현재 페이지 추가",
        "description": "Add bookmark tooltip"
    },
    "addFolder": {
        "message": "폴더 추가",
        "description": "Add folder tooltip"
    },
    "deleteFolder": {
        "message": "폴더 삭제",
        "description": "Delete folder tooltip"
    },
    "deleteBookmark": {
        "message": "북마크 삭제",
        "description": "Delete bookmark tooltip"
    },
    "expandAll": {
        "message": "모두 펼치기",
        "description": "Expand all button tooltip"
    },
    "collapseAll": {
        "message": "모두 접기",
        "description": "Collapse all button tooltip"
    },
    "enterFolderName": {
        "message": "폴더 이름 입력...",
        "description": "New folder input placeholder"
    }
}
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/components/bookmark/BookmarkItem.tsx">
/**
 * BookmarkItem component.
 * Renders a single bookmark with drag-and-drop and delete functionality.
 */

import {
  draggable,
  dropTargetForElements,
} from '@atlaskit/pragmatic-drag-and-drop/element/adapter';
import { Trash2 } from 'lucide-react';
import { useRef } from 'react';
import { Button } from '@/components/ui/button';
import { getFaviconUrl } from '@/services';
import type { BookmarkTreeNode, DragOperation } from '@/types';

interface BookmarkItemProps {
  node: BookmarkTreeNode;
  instanceId: symbol;
  isDragging: boolean;
  onDelete: (id: string) => void;
  onDragStart: (node: BookmarkTreeNode) => void;
  onDragEnd: () => void;
  onDrop: (operation: DragOperation) => void;
}

export function BookmarkItem({
  node,
  instanceId,
  isDragging,
  onDelete,
  onDragStart,
  onDragEnd,
  onDrop,
}: BookmarkItemProps) {
  const elementRef = useRef<HTMLAnchorElement>(null);

  const setupDragDrop = (element: HTMLAnchorElement | null) => {
    if (!element) return;

    const cleanup = draggable({
      element,
      onDragStart: () => {
        onDragStart(node);
        element.classList.add('dragging');
      },
      onDrag: () => {
        onDragEnd();
        element.classList.remove('dragging');
      },
      getInitialData: () => ({
        type: 'bookmark',
        node,
        instanceId,
      }),
    });

    const dropTargetCleanup = dropTargetForElements({
      element,
      onDrag: ({ source, location }) => {
        const sourceData = source.data as { node: BookmarkTreeNode };
        if (sourceData.node.id !== node.id) {
          element.classList.add('drop-target');

          const existingIndicator = element.parentElement?.querySelector('.drop-indicator');
          if (existingIndicator) existingIndicator.remove();

          const indicator = document.createElement('div');
          indicator.className = 'drop-indicator';

          const rect = element.getBoundingClientRect();
          const mouseY = location.current.input.clientY;
          const relativeY = mouseY - rect.top;
          const closestEdge = relativeY < rect.height / 2 ? 'top' : 'bottom';

          if (closestEdge === 'top') {
            indicator.style.top = '-1px';
          } else {
            indicator.style.bottom = '-1px';
          }

          element.dataset.closestEdge = closestEdge;
          element.parentElement?.appendChild(indicator);
        }
      },
      onDragLeave: () => {
        element.classList.remove('drop-target');
        element.parentElement?.querySelector('.drop-indicator')?.remove();
        delete element.dataset.closestEdge;
      },
      onDrop: ({ source }) => {
        const sourceData = source.data as { type: 'folder' | 'bookmark'; node: BookmarkTreeNode };
        if (sourceData.node.id !== node.id) {
          const closestEdge = element.dataset.closestEdge as 'top' | 'bottom' | undefined;
          const isDroppingIntoFolder = node.children !== undefined;

          let operationType: DragOperation['type'];
          if (sourceData.type === 'folder') {
            operationType = isDroppingIntoFolder ? 'folder-move' : 'folder-reorder';
          } else {
            operationType = isDroppingIntoFolder ? 'bookmark-move' : 'bookmark-reorder';
          }

          onDrop({
            type: operationType,
            sourceId: sourceData.node.id,
            sourceParentId: sourceData.node.parentId || 'root',
            sourceIndex: sourceData.node.index || 0,
            targetId: node.id,
            targetParentId: node.parentId || 'root',
            targetIndex: closestEdge === 'bottom' ? (node.index || 0) + 1 : node.index || 0,
          });
        }

        element.classList.remove('drop-target');
        element.parentElement?.querySelector('.drop-indicator')?.remove();
        delete element.dataset.closestEdge;
      },
      getData: () => ({
        type: 'bookmark',
        node,
        instanceId,
      }),
    });

    return () => {
      cleanup();
      dropTargetCleanup();
    };
  };

  return (
    <div
      className={`flex items-center justify-between h-8 py-1 px-2 hover:bg-accent rounded-md group bookmark-item ${isDragging ? 'opacity-50' : ''}`}
    >
      <a
        ref={(el) => {
          elementRef.current = el;
          setupDragDrop(el);
        }}
        href={node.url}
        target="_blank"
        rel="noopener noreferrer"
        className="flex items-center flex-1 min-w-0 cursor-grab active:cursor-grabbing"
      >
        <img src={getFaviconUrl(node.url ?? '')} alt="favicon" className="w-4 h-4 mr-2 shrink-0" />
        <span className="truncate text-sm" dangerouslySetInnerHTML={{ __html: node.title }} />
      </a>
      <Button
        variant="ghost"
        size="icon"
        className="h-5 w-5 ml-2 shrink-0 action-button text-destructive hover:text-destructive"
        onClick={() => onDelete(node.id)}
      >
        <Trash2 className="h-3 w-3" />
      </Button>
    </div>
  );
}
</file>

<file path="src/components/bookmark/FolderItem.tsx">
/**
 * FolderItem component.
 * Renders a folder with drag-and-drop, accordion, and action buttons.
 */

import {
  draggable,
  dropTargetForElements,
} from '@atlaskit/pragmatic-drag-and-drop/element/adapter';
import { BookmarkPlus, ChevronsDown, ChevronsUp, Folder, FolderPlus, Trash2 } from 'lucide-react';
import { useRef } from 'react';
import { AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { Button } from '@/components/ui/button';
import type { BookmarkTreeNode, DragOperation } from '@/types';
import { BookmarkItem } from './BookmarkItem';
import { NewFolderInput } from './NewFolderInput';

interface FolderItemProps {
  node: BookmarkTreeNode;
  instanceId: symbol;
  isDragging: boolean;
  isAllChildrenExpanded: boolean;
  creatingFolderId: string | null;
  newFolderName: string;
  folders: BookmarkTreeNode[];
  onDragStart: (node: BookmarkTreeNode) => void;
  onDragEnd: () => void;
  onDrop: (operation: DragOperation) => void;
  onAddBookmark: (folderId: string) => void;
  onAddFolder: (folderId: string) => void;
  onDeleteFolder: (folderId: string) => void;
  onDeleteBookmark: (bookmarkId: string) => void;
  onCreateFolder: () => void;
  onCancelCreateFolder: () => void;
  onNewFolderNameChange: (name: string) => void;
  onToggleExpandAllChildren: (node: BookmarkTreeNode, e: React.MouseEvent) => void;
}

export function FolderItem({
  node,
  instanceId,
  isDragging,
  isAllChildrenExpanded,
  creatingFolderId,
  newFolderName,
  folders,
  onDragStart,
  onDragEnd,
  onDrop,
  onAddBookmark,
  onAddFolder,
  onDeleteFolder,
  onDeleteBookmark,
  onCreateFolder,
  onCancelCreateFolder,
  onNewFolderNameChange,
  onToggleExpandAllChildren,
}: FolderItemProps) {
  const elementRef = useRef<HTMLDivElement>(null);
  const hasChildren = node.children && node.children.length > 0;

  // Handle temporary folder (new folder being created)
  if (node.isTemporary) {
    return (
      <NewFolderInput
        value={newFolderName}
        onChange={onNewFolderNameChange}
        onSubmit={onCreateFolder}
        onCancel={onCancelCreateFolder}
      />
    );
  }

  const setupDragDrop = (element: HTMLDivElement | null) => {
    if (!element) return;

    const cleanup = draggable({
      element,
      onDragStart: () => {
        onDragStart(node);
        element.classList.add('dragging');
      },
      onDrag: () => {
        onDragEnd();
        element.classList.remove('dragging');
      },
      getInitialData: () => ({
        type: 'folder',
        node,
        instanceId,
      }),
    });

    const dropTargetCleanup = dropTargetForElements({
      element,
      onDrag: ({ source, location }) => {
        const sourceData = source.data as { node: BookmarkTreeNode };
        if (sourceData.node.id !== node.id) {
          element.classList.add('drop-target');

          const existingIndicator = element.parentElement?.querySelector('.drop-indicator');
          if (existingIndicator) existingIndicator.remove();

          const indicator = document.createElement('div');
          indicator.className = 'drop-indicator';

          const rect = element.getBoundingClientRect();
          const mouseY = location.current.input.clientY;
          const relativeY = mouseY - rect.top;
          const closestEdge = relativeY < rect.height / 2 ? 'top' : 'bottom';

          if (closestEdge === 'top') {
            indicator.style.top = '-1px';
          } else {
            indicator.style.bottom = '-1px';
          }

          element.dataset.closestEdge = closestEdge;
          element.parentElement?.appendChild(indicator);
        }
      },
      onDragLeave: () => {
        element.classList.remove('drop-target');
        element.parentElement?.querySelector('.drop-indicator')?.remove();
        delete element.dataset.closestEdge;
      },
      onDrop: ({ source }) => {
        const sourceData = source.data as { type: 'folder' | 'bookmark'; node: BookmarkTreeNode };
        if (sourceData.node.id !== node.id) {
          const closestEdge = element.dataset.closestEdge as 'top' | 'bottom' | undefined;
          const isDroppingIntoFolder = node.children !== undefined;

          let operationType: DragOperation['type'];
          if (sourceData.type === 'folder') {
            operationType = isDroppingIntoFolder ? 'folder-move' : 'folder-reorder';
          } else {
            operationType = isDroppingIntoFolder ? 'bookmark-move' : 'bookmark-reorder';
          }

          onDrop({
            type: operationType,
            sourceId: sourceData.node.id,
            sourceParentId: sourceData.node.parentId || 'root',
            sourceIndex: sourceData.node.index || 0,
            targetId: node.id,
            targetParentId: node.parentId || 'root',
            targetIndex: closestEdge === 'bottom' ? (node.index || 0) + 1 : node.index || 0,
          });
        }

        element.classList.remove('drop-target');
        element.parentElement?.querySelector('.drop-indicator')?.remove();
        delete element.dataset.closestEdge;
      },
      getData: () => ({
        type: 'folder',
        node,
        instanceId,
      }),
    });

    return () => {
      cleanup();
      dropTargetCleanup();
    };
  };

  return (
    <AccordionItem
      key={node.id}
      value={node.id}
      className={`border-none accordion-item ${isDragging ? 'opacity-50' : ''}`}
    >
      <AccordionTrigger className="hover:no-underline py-1 px-2 hover:bg-accent rounded-md h-8 folder-item">
        <div className="flex items-center w-full">
          <div
            ref={(el) => {
              elementRef.current = el;
              setupDragDrop(el);
            }}
            className="flex items-center flex-1 min-w-0 cursor-grab active:cursor-grabbing"
          >
            <Folder className="w-4 h-4 mr-2 shrink-0 text-muted-foreground" />
            <span className="truncate text-sm" dangerouslySetInnerHTML={{ __html: node.title }} />
          </div>
          <div className="flex items-center gap-1 ml-2 shrink-0 action-button">
            {hasChildren && (
              <Button
                variant="ghost"
                size="icon"
                className="h-5 w-5"
                onClick={(e) => onToggleExpandAllChildren(node, e)}
                title={isAllChildrenExpanded ? 'Collapse all subfolders' : 'Expand all subfolders'}
              >
                {isAllChildrenExpanded ? (
                  <ChevronsUp className="h-3 w-3" />
                ) : (
                  <ChevronsDown className="h-3 w-3" />
                )}
              </Button>
            )}
            <Button
              variant="ghost"
              size="icon"
              className="h-5 w-5"
              onClick={(e) => {
                e.stopPropagation();
                onAddBookmark(node.id);
              }}
            >
              <BookmarkPlus className="h-3 w-3" />
            </Button>
            <Button
              variant="ghost"
              size="icon"
              className="h-5 w-5"
              onClick={(e) => {
                e.stopPropagation();
                onAddFolder(node.id);
              }}
            >
              <FolderPlus className="h-3 w-3" />
            </Button>
            <Button
              variant="ghost"
              size="icon"
              className="h-5 w-5 text-destructive hover:text-destructive"
              onClick={(e) => {
                e.stopPropagation();
                onDeleteFolder(node.id);
              }}
            >
              <Trash2 className="h-3 w-3" />
            </Button>
          </div>
        </div>
      </AccordionTrigger>
      <AccordionContent className="pl-6 py-0 accordion-content">
        {node.children?.map((child) =>
          child.isTemporary ? (
            <NewFolderInput
              key={child.id}
              value={newFolderName}
              onChange={onNewFolderNameChange}
              onSubmit={onCreateFolder}
              onCancel={onCancelCreateFolder}
            />
          ) : child.children ? (
            <FolderItem
              key={child.id}
              node={child}
              instanceId={instanceId}
              isDragging={false}
              isAllChildrenExpanded={false}
              creatingFolderId={creatingFolderId}
              newFolderName={newFolderName}
              folders={folders}
              onDragStart={onDragStart}
              onDragEnd={onDragEnd}
              onDrop={onDrop}
              onAddBookmark={onAddBookmark}
              onAddFolder={onAddFolder}
              onDeleteFolder={onDeleteFolder}
              onDeleteBookmark={onDeleteBookmark}
              onCreateFolder={onCreateFolder}
              onCancelCreateFolder={onCancelCreateFolder}
              onNewFolderNameChange={onNewFolderNameChange}
              onToggleExpandAllChildren={onToggleExpandAllChildren}
            />
          ) : (
            <BookmarkItem
              key={child.id}
              node={child}
              instanceId={instanceId}
              isDragging={false}
              onDelete={onDeleteBookmark}
              onDragStart={onDragStart}
              onDragEnd={onDragEnd}
              onDrop={onDrop}
            />
          ),
        )}
      </AccordionContent>
    </AccordionItem>
  );
}
</file>

<file path="src/components/bookmark/index.ts">
/**
 * Bookmark components barrel export.
 */

export { BookmarkItem } from './BookmarkItem';
export { BookmarkSearch } from './BookmarkSearch';
export { FolderItem } from './FolderItem';
export { NewFolderInput } from './NewFolderInput';
</file>

<file path="src/entrypoints/bookmarks/index.html">
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookmarks</title>
</head>

<body>
    <div id="root"></div>
    <script type="module" src="./main.tsx"></script>
</body>

</html>
</file>

<file path="src/entrypoints/bookmarks/main.tsx">
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import BookmarksPage from '@/components/page/BookmarksPage';
import '@/globals.css';
import { ErrorBoundary } from '@/components/error-boundary';
import { ThemeProvider } from '@/components/theme-provider';

const rootElement = document.getElementById('root');
if (!rootElement) {
    throw new Error('Failed to find the root element');
}

createRoot(rootElement).render(
    <StrictMode>
        <ErrorBoundary>
            <ThemeProvider defaultTheme="system" storageKey="bookmark-scout-theme">
                <BookmarksPage />
            </ThemeProvider>
        </ErrorBoundary>
    </StrictMode>,
);
</file>

<file path="src/entrypoints/options/index.html">
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookmark Scout - Options</title>
    <meta name="manifest.open_in_tab" content="true" />
</head>

<body>
    <div id="root"></div>
    <script type="module" src="./main.tsx"></script>
</body>

</html>
</file>

<file path="src/entrypoints/options/main.tsx">
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import OptionsPage from '@/components/page/OptionsPage';

createRoot(document.getElementById('root')!).render(
    <StrictMode>
        <OptionsPage />
    </StrictMode>,
);
</file>

<file path="src/entrypoints/popup/index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookmark Scout</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
      }
      #root {
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      /* Popup dimensions */
      body {
        width: 400px;
        height: 600px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="./main.tsx"></script>
  </body>
</html>
</file>

<file path="src/entrypoints/popup/main.tsx">
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import PopupPage from '@/components/page/PopupPage';
import { SidebarProvider } from '@/components/ui/sidebar';
import '@/index.css';

createRoot(document.getElementById('root')!).render(
    <StrictMode>
        <SidebarProvider>
            <PopupPage />
        </SidebarProvider>
    </StrictMode>,
);
</file>

<file path="src/entrypoints/sidepanel/index.html">
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bookmark Scout - Side Panel</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }

        #root {
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script type="module" src="./main.tsx"></script>
</body>

</html>
</file>

<file path="src/entrypoints/sidepanel/main.tsx">
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import PopupPage from '@/components/page/PopupPage';
import { SidebarProvider } from '@/components/ui/sidebar';
import '@/index.css';

// Sidepanel reuses the same PopupPage component
createRoot(document.getElementById('root')!).render(
    <StrictMode>
        <SidebarProvider>
            <PopupPage />
        </SidebarProvider>
    </StrictMode>,
);
</file>

<file path="src/hooks/use-bookmark-drag-drop.ts">
/**
 * Hook for bookmark drag-and-drop functionality.
 */

import { combine } from '@atlaskit/pragmatic-drag-and-drop/combine';
import { monitorForElements } from '@atlaskit/pragmatic-drag-and-drop/element/adapter';
import { extractClosestEdge } from '@atlaskit/pragmatic-drag-and-drop-hitbox/closest-edge';
import { getReorderDestinationIndex } from '@atlaskit/pragmatic-drag-and-drop-hitbox/util/get-reorder-destination-index';
import * as liveRegion from '@atlaskit/pragmatic-drag-and-drop-live-region';
import { useCallback, useEffect, useState } from 'react';
import type { BookmarkTreeNode, DragData, DragOperation } from '@/types';

interface UseBookmarkDragDropReturn {
  /** Currently dragged item */
  draggedItem: BookmarkTreeNode | null;
  /** Unique instance ID for this drag session */
  instanceId: symbol;
  /** Handle drag start */
  handleDragStart: (node: BookmarkTreeNode) => void;
  /** Handle drag end */
  handleDragEnd: () => void;
}

export function useBookmarkDragDrop(
  onDrop: (operation: DragOperation) => Promise<boolean>,
): UseBookmarkDragDropReturn {
  const [draggedItem, setDraggedItem] = useState<BookmarkTreeNode | null>(null);
  const [instanceId] = useState(() => Symbol('bookmark-drag-instance'));

  const handleDragStart = useCallback((node: BookmarkTreeNode) => {
    setDraggedItem(node);
  }, []);

  const handleDragEnd = useCallback(() => {
    setDraggedItem(null);
  }, []);

  // Setup drag and drop monitoring
  useEffect(() => {
    return combine(
      monitorForElements({
        canMonitor({ source }) {
          return source.data.instanceId === instanceId;
        },
        onDrop(args) {
          const { location, source } = args;
          if (!location.current.dropTargets.length) {
            return;
          }

          const sourceData = source.data as unknown as DragData;
          const sourceNode = sourceData.node;
          const target = location.current.dropTargets[0];
          const targetData = target.data as unknown as DragData;
          const targetNode = targetData.node;

          const closestEdge = extractClosestEdge(target.data);

          const targetIndex = getReorderDestinationIndex({
            startIndex: sourceNode.index || 0,
            indexOfTarget: targetNode.index || 0,
            closestEdgeOfTarget: closestEdge,
            axis: 'vertical',
          });

          const isDroppingIntoFolder = targetNode.children !== undefined;

          let operationType: DragOperation['type'];
          if (sourceData.type === 'folder') {
            operationType = isDroppingIntoFolder ? 'folder-move' : 'folder-reorder';
          } else {
            operationType = isDroppingIntoFolder ? 'bookmark-move' : 'bookmark-reorder';
          }

          const operation: DragOperation = {
            type: operationType,
            sourceId: sourceNode.id,
            sourceParentId: sourceNode.parentId || 'root',
            sourceIndex: sourceNode.index || 0,
            targetId: targetNode.id,
            targetParentId: targetNode.parentId || 'root',
            targetIndex,
          };

          onDrop(operation);
        },
      }),
    );
  }, [instanceId, onDrop]);

  // Cleanup live region on unmount
  useEffect(() => {
    return liveRegion.cleanup();
  }, []);

  return {
    draggedItem,
    instanceId,
    handleDragStart,
    handleDragEnd,
  };
}
</file>

<file path="src/hooks/use-bookmark-filter.ts">
/**
 * Hook for filtering bookmarks based on search query.
 */

import { useCallback, useEffect, useState } from 'react';
import type { BookmarkTreeNode } from '@/types';
import { useDebounce } from './use-debounce';

interface UseBookmarkFilterReturn {
  /** Current search query */
  query: string;
  /** Set search query */
  setQuery: React.Dispatch<React.SetStateAction<string>>;
  /** Debounced search query */
  debouncedQuery: string;
  /** Filtered bookmark folders */
  filteredFolders: BookmarkTreeNode[];
  /** Whether to force expand all folders */
  forceExpandAll: boolean;
  /** Set force expand all */
  setForceExpandAll: React.Dispatch<React.SetStateAction<boolean>>;
}

export function useBookmarkFilter(
  folders: BookmarkTreeNode[],
  onExpandedChange: (ids: string[]) => void,
): UseBookmarkFilterReturn {
  const [query, setQuery] = useState('');
  const [filteredFolders, setFilteredFolders] = useState<BookmarkTreeNode[]>([]);
  const [forceExpandAll, setForceExpandAll] = useState(false);
  const debouncedQuery = useDebounce(query, 300);

  const handleForceExpandAll = useCallback((nodes: BookmarkTreeNode[]): BookmarkTreeNode[] => {
    const deepCopy = (node: BookmarkTreeNode): BookmarkTreeNode => ({
      ...node,
      children: node.children ? node.children.map(deepCopy) : undefined,
      isOpen: true,
    });
    return nodes.map(deepCopy);
  }, []);

  const filterFolders = useCallback(
    (nodes: BookmarkTreeNode[], searchQuery: string): BookmarkTreeNode[] => {
      if (!searchQuery) return nodes;

      if (forceExpandAll) {
        return handleForceExpandAll(nodes);
      }

      const filtered: BookmarkTreeNode[] = [];
      nodes.forEach((node) => {
        const nodeMatches = node.title.toLowerCase().includes(searchQuery.toLowerCase());

        if (node.children) {
          const filteredChildren = filterFolders(node.children, searchQuery);

          if (nodeMatches || filteredChildren.length > 0) {
            let childrenToInclude;
            if (nodeMatches) {
              childrenToInclude = node.children.map((child) => {
                if (
                  child.children &&
                  child.title.toLowerCase().includes(searchQuery.toLowerCase())
                ) {
                  return {
                    ...child,
                    title: child.title.replace(new RegExp(`(${searchQuery})`, 'gi'), '<b>$1</b>'),
                    isOpen: true,
                  };
                }
                return child;
              });
            } else {
              childrenToInclude = filteredChildren;
            }

            const shouldExpand =
              !nodeMatches ||
              (nodeMatches &&
                node.children?.some(
                  (child) =>
                    child.children && child.title.toLowerCase().includes(searchQuery.toLowerCase()),
                ));

            filtered.push({
              ...node,
              title: nodeMatches
                ? node.title.replace(new RegExp(`(${searchQuery})`, 'gi'), '<b>$1</b>')
                : node.title,
              children: childrenToInclude,
              isOpen: shouldExpand,
            });
          }
        } else if (nodeMatches) {
          filtered.push({
            ...node,
            title: node.title.replace(new RegExp(`(${searchQuery})`, 'gi'), '<b>$1</b>'),
          });
        }
      });
      return filtered;
    },
    [forceExpandAll, handleForceExpandAll],
  );

  useEffect(() => {
    if (debouncedQuery) {
      const filtered = filterFolders(folders, debouncedQuery);
      setFilteredFolders(filtered);

      const getExpandableFolderIds = (nodes: BookmarkTreeNode[]): string[] => {
        return nodes.reduce((acc: string[], node) => {
          if (node.children && (node.isOpen || forceExpandAll)) {
            return [...acc, node.id, ...getExpandableFolderIds(node.children)];
          }
          return acc;
        }, []);
      };

      onExpandedChange(getExpandableFolderIds(filtered));
    } else {
      setFilteredFolders(folders);
      onExpandedChange([]);
      setForceExpandAll(false);
    }
  }, [debouncedQuery, folders, filterFolders, forceExpandAll, onExpandedChange]);

  return {
    query,
    setQuery,
    debouncedQuery,
    filteredFolders,
    forceExpandAll,
    setForceExpandAll,
  };
}
</file>

<file path="src/hooks/use-bookmark-operations.ts">
/**
 * Hook for bookmark CRUD operations with toast feedback.
 */

import { useCallback } from 'react';
import {
  createBookmark,
  deleteBookmark,
  getBookmark,
  getCurrentTab,
  moveBookmark,
} from '@/services';
import type { DragOperation } from '@/types';
import { useToast } from './use-toast';

interface UseBookmarkOperationsReturn {
  /** Add the current tab as a bookmark to a folder */
  addBookmarkToFolder: (folderId: string) => Promise<boolean>;
  /** Create a new folder */
  createFolder: (parentId: string, name: string) => Promise<boolean>;
  /** Delete a bookmark */
  removeBookmark: (bookmarkId: string) => Promise<boolean>;
  /** Delete a folder and its contents */
  removeFolder: (folderId: string) => Promise<boolean>;
  /** Handle a drag-drop operation */
  handleDrop: (operation: DragOperation) => Promise<boolean>;
}

export function useBookmarkOperations(onRefresh: () => Promise<void>): UseBookmarkOperationsReturn {
  const { toast } = useToast();

  const addBookmarkToFolder = useCallback(
    async (folderId: string): Promise<boolean> => {
      try {
        const tab = await getCurrentTab();
        const parentFolder = await getBookmark(folderId);
        await createBookmark({
          parentId: folderId,
          title: tab.title || 'New Bookmark',
          url: tab.url || '',
        });
        await onRefresh();

        const truncatedTitle = tab.title
          ? tab.title.length > 30
            ? tab.title.slice(0, 30) + '...'
            : tab.title
          : 'New Bookmark';

        toast({
          title: '✓ Bookmark Added',
          description: `"${truncatedTitle}" added to "${parentFolder.title}"`,
          variant: 'success',
        });
        return true;
      } catch (error) {
        console.error('Failed to add bookmark:', error);
        toast({
          title: '× Error Adding Bookmark',
          description: 'Failed to add bookmark. Please try again.',
          variant: 'destructive',
        });
        return false;
      }
    },
    [onRefresh, toast],
  );

  const createFolder = useCallback(
    async (parentId: string, name: string): Promise<boolean> => {
      try {
        const parentFolder = await getBookmark(parentId);
        await createBookmark({
          parentId,
          title: name.trim(),
        });
        await onRefresh();

        toast({
          title: '✓ Folder Created',
          description: `New folder "${name.trim()}" added in "${parentFolder.title}"`,
          variant: 'success',
        });
        return true;
      } catch (error) {
        console.error('Failed to create folder:', error);
        toast({
          title: '× Error Creating Folder',
          description: 'Failed to create new folder. Please try again.',
          variant: 'destructive',
        });
        return false;
      }
    },
    [onRefresh, toast],
  );

  const removeBookmark = useCallback(
    async (bookmarkId: string): Promise<boolean> => {
      try {
        const bookmark = await getBookmark(bookmarkId);
        await deleteBookmark(bookmarkId);
        await onRefresh();

        const truncatedTitle = bookmark.title
          ? bookmark.title.length > 30
            ? bookmark.title.slice(0, 30) + '...'
            : bookmark.title
          : 'Bookmark';

        toast({
          title: '✓ Bookmark Deleted',
          description: `"${truncatedTitle}" has been removed`,
          variant: 'success',
        });
        return true;
      } catch (error) {
        console.error('Failed to delete bookmark:', error);
        toast({
          title: '× Error Deleting Bookmark',
          description: 'Failed to delete bookmark. Please try again.',
          variant: 'destructive',
        });
        return false;
      }
    },
    [onRefresh, toast],
  );

  const removeFolder = useCallback(
    async (folderId: string): Promise<boolean> => {
      try {
        const folder = await getBookmark(folderId);
        await deleteBookmark(folderId);
        await onRefresh();

        const truncatedTitle = folder.title
          ? folder.title.length > 30
            ? folder.title.slice(0, 30) + '...'
            : folder.title
          : 'Folder';

        toast({
          title: '✓ Folder Deleted',
          description: `"${truncatedTitle}" has been removed`,
          variant: 'success',
        });
        return true;
      } catch (error) {
        console.error('Failed to delete folder:', error);
        toast({
          title: '× Error Deleting Folder',
          description: 'Failed to delete folder. Please try again.',
          variant: 'destructive',
        });
        return false;
      }
    },
    [onRefresh, toast],
  );

  const handleDrop = useCallback(
    async (operation: DragOperation): Promise<boolean> => {
      try {
        if (operation.type === 'folder-move' || operation.type === 'bookmark-move') {
          await moveBookmark(operation.sourceId, {
            parentId: operation.targetParentId,
            index: operation.targetIndex,
          });
        } else if (operation.type === 'folder-reorder' || operation.type === 'bookmark-reorder') {
          await moveBookmark(operation.sourceId, {
            index: operation.targetIndex,
          });
        }

        await onRefresh();

        const sourceItem = await getBookmark(operation.sourceId);
        const targetFolder = operation.targetParentId
          ? await getBookmark(operation.targetParentId)
          : null;

        toast({
          title: '✓ Item Moved',
          description: operation.type.includes('move')
            ? `"${sourceItem.title}" moved to "${targetFolder?.title || 'root'}"`
            : `"${sourceItem.title}" reordered to position ${operation.targetIndex + 1}`,
          variant: 'success',
        });
        return true;
      } catch (error) {
        console.error('Failed to move item:', error);
        toast({
          title: '× Error Moving Item',
          description: 'Failed to move item. Please try again.',
          variant: 'destructive',
        });
        return false;
      }
    },
    [onRefresh, toast],
  );

  return {
    addBookmarkToFolder,
    createFolder,
    removeBookmark,
    removeFolder,
    handleDrop,
  };
}
</file>

<file path="src/hooks/use-bookmarks.ts">
/**
 * Hook for managing bookmark tree state.
 * Handles fetching, caching, and error/loading states.
 */

import { useCallback, useEffect, useState } from 'react';
import { fetchBookmarkTree } from '@/services';
import type { BookmarkTreeNode } from '@/types';

interface UseBookmarksReturn {
  /** The full bookmark tree */
  folders: BookmarkTreeNode[];
  /** Whether bookmarks are loading */
  isLoading: boolean;
  /** Error message if any */
  error: string | null;
  /** Refresh the bookmark tree */
  refresh: () => Promise<void>;
  /** Update folders directly (for filtered views) */
  setFolders: React.Dispatch<React.SetStateAction<BookmarkTreeNode[]>>;
}

export function useBookmarks(): UseBookmarksReturn {
  const [folders, setFolders] = useState<BookmarkTreeNode[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const refresh = useCallback(async () => {
    setIsLoading(true);
    setError(null);
    try {
      const data = await fetchBookmarkTree();
      setFolders(data);
    } catch (err) {
      console.error('Error fetching bookmarks:', err);
      setError(err instanceof Error ? err.message : 'Failed to fetch bookmarks');
    } finally {
      setIsLoading(false);
    }
  }, []);

  useEffect(() => {
    refresh();
  }, [refresh]);

  return {
    folders,
    isLoading,
    error,
    refresh,
    setFolders,
  };
}
</file>

<file path="src/hooks/use-folder-expansion.ts">
/**
 * Hook for managing folder expansion state.
 * Handles expand/collapse of bookmark folders.
 */

import { useCallback, useState } from 'react';
import type { BookmarkTreeNode } from '@/types';

interface UseFolderExpansionReturn {
  /** Currently expanded folder IDs */
  expandedFolders: string[];
  /** Set expanded folders */
  setExpandedFolders: React.Dispatch<React.SetStateAction<string[]>>;
  /** Get all child folder IDs recursively */
  getAllChildFolderIds: (node: BookmarkTreeNode) => string[];
  /** Get all folder IDs from a tree */
  getAllFolderIds: (nodes: BookmarkTreeNode[]) => string[];
  /** Toggle expand/collapse all children of a folder */
  toggleExpandAllChildren: (
    node: BookmarkTreeNode,
    folders: BookmarkTreeNode[],
    e: React.MouseEvent,
  ) => void;
  /** Check if all children are expanded */
  areAllChildrenExpanded: (node: BookmarkTreeNode, folders: BookmarkTreeNode[]) => boolean;
}

export function useFolderExpansion(): UseFolderExpansionReturn {
  const [expandedFolders, setExpandedFolders] = useState<string[]>([]);

  const getAllChildFolderIds = useCallback((node: BookmarkTreeNode): string[] => {
    if (!node.children) return [];

    return node.children.reduce((acc: string[], child) => {
      if (child.children) {
        return [...acc, child.id, ...getAllChildFolderIds(child)];
      }
      return acc;
    }, []);
  }, []);

  const getAllFolderIds = useCallback((nodes: BookmarkTreeNode[]): string[] => {
    return nodes.reduce((acc: string[], node) => {
      if (node.children) {
        return [...acc, node.id, ...getAllFolderIds(node.children)];
      }
      return acc;
    }, []);
  }, []);

  const findNodeInTree = useCallback(
    (nodes: BookmarkTreeNode[], targetId: string): BookmarkTreeNode | null => {
      for (const node of nodes) {
        if (node.id === targetId) return node;
        if (node.children) {
          const found = findNodeInTree(node.children, targetId);
          if (found) return found;
        }
      }
      return null;
    },
    [],
  );

  const toggleExpandAllChildren = useCallback(
    (node: BookmarkTreeNode, folders: BookmarkTreeNode[], e: React.MouseEvent) => {
      e.stopPropagation();

      const originalNode = findNodeInTree(folders, node.id);
      if (!originalNode) return;

      const childFolderIds = getAllChildFolderIds(originalNode);
      const isCurrentlyExpanded = childFolderIds.every((id) => expandedFolders.includes(id));

      if (isCurrentlyExpanded) {
        setExpandedFolders((prev) => prev.filter((id) => !childFolderIds.includes(id)));
      } else {
        setExpandedFolders((prev) => [...new Set([...prev, ...childFolderIds])]);
      }
    },
    [expandedFolders, getAllChildFolderIds, findNodeInTree],
  );

  const areAllChildrenExpanded = useCallback(
    (node: BookmarkTreeNode, folders: BookmarkTreeNode[]): boolean => {
      const originalNode = findNodeInTree(folders, node.id);
      if (!originalNode) return false;

      const childFolderIds = getAllChildFolderIds(originalNode);
      return (
        childFolderIds.length > 0 && childFolderIds.every((id) => expandedFolders.includes(id))
      );
    },
    [expandedFolders, getAllChildFolderIds, findNodeInTree],
  );

  return {
    expandedFolders,
    setExpandedFolders,
    getAllChildFolderIds,
    getAllFolderIds,
    toggleExpandAllChildren,
    areAllChildrenExpanded,
  };
}
</file>

<file path="src/hooks/use-i18n.ts">
/**
 * Simple wrapper around browser.i18n.getMessage
 * for type-safe i18n in the extension
 */

// Message keys available in messages.json
export type MessageKey =
    | 'extName'
    | 'extDescription'
    | 'searchPlaceholder'
    | 'newFolder'
    | 'retry'
    | 'error'
    | 'folderCreated'
    | 'errorCreatingFolder'
    | 'bookmarkAdded'
    | 'errorAddingBookmark'
    | 'bookmarkDeleted'
    | 'errorDeletingBookmark'
    | 'folderDeleted'
    | 'errorDeletingFolder'
    | 'itemMoved'
    | 'errorMovingItem'
    | 'addBookmark'
    | 'addFolder'
    | 'deleteFolder'
    | 'deleteBookmark'
    | 'expandAll'
    | 'collapseAll'
    | 'enterFolderName';

/**
 * Get localized message from browser.i18n
 * Falls back to key if message not found
 */
export function t(key: MessageKey, substitutions?: string | string[]): string {
    try {
        const message = browser.i18n.getMessage(key, substitutions);
        return message || key;
    } catch {
        // Fallback for non-extension environments (like tests)
        return key;
    }
}

/**
 * Hook for using i18n in React components
 * Returns the t function for translations
 */
export function useI18n() {
    return { t };
}
</file>

<file path="src/services/bookmarks.ts">
/**
 * Chrome Bookmarks API service layer.
 * Centralizes all Chrome bookmarks API interactions.
 */

import type { BookmarkTreeNode } from '@/types';

/**
 * Gets the favicon URL for a given page URL using Chrome's favicon API.
 * @param pageUrl - The URL of the page to get the favicon for
 * @param size - The size of the favicon (default: 16)
 */
export function getFaviconUrl(pageUrl: string, size = 16): string {
  const url = new URL(chrome.runtime.getURL('/_favicon/'));
  url.searchParams.set('pageUrl', pageUrl);
  url.searchParams.set('size', size.toString());
  return url.toString();
}

/**
 * Converts a Chrome bookmark node to our BookmarkTreeNode type.
 */
function processNode(node: chrome.bookmarks.BookmarkTreeNode): BookmarkTreeNode {
  return {
    id: node.id,
    parentId: node.parentId,
    index: node.index,
    title: node.title,
    url: node.url,
    dateAdded: node.dateAdded,
    dateGroupModified: node.dateGroupModified,
    children: node.children ? node.children.map(processNode) : undefined,
    isOpen: false,
  };
}

/**
 * Fetches the entire bookmark tree.
 * @returns Promise resolving to the bookmark tree
 */
export async function fetchBookmarkTree(): Promise<BookmarkTreeNode[]> {
  return new Promise((resolve, reject) => {
    if (!chrome?.bookmarks) {
      reject(new Error('Chrome bookmarks API not available.'));
      return;
    }
    chrome.bookmarks.getTree((tree) => {
      if (chrome.runtime.lastError) {
        reject(new Error(chrome.runtime.lastError.message));
        return;
      }
      resolve(tree.map(processNode));
    });
  });
}

/**
 * Gets a single bookmark by ID.
 * @param id - The bookmark ID
 */
export async function getBookmark(id: string): Promise<chrome.bookmarks.BookmarkTreeNode> {
  return new Promise((resolve, reject) => {
    if (!chrome?.bookmarks) {
      reject(new Error('Chrome bookmarks API not available.'));
      return;
    }
    chrome.bookmarks.get(id, (results) => {
      if (chrome.runtime.lastError) {
        reject(new Error(chrome.runtime.lastError.message));
        return;
      }
      resolve(results[0]);
    });
  });
}

/**
 * Creates a new bookmark or folder.
 * @param details - The bookmark creation details
 */
export async function createBookmark(details: {
  parentId?: string;
  index?: number;
  title?: string;
  url?: string;
}): Promise<chrome.bookmarks.BookmarkTreeNode> {
  return new Promise((resolve, reject) => {
    if (!chrome?.bookmarks) {
      reject(new Error('Chrome bookmarks API not available.'));
      return;
    }
    chrome.bookmarks.create(details, (result) => {
      if (chrome.runtime.lastError) {
        reject(new Error(chrome.runtime.lastError.message));
        return;
      }
      resolve(result);
    });
  });
}

/**
 * Moves a bookmark to a new location.
 * @param id - The bookmark ID
 * @param destination - The new parent folder ID and/or index
 */
export async function moveBookmark(
  id: string,
  destination: { parentId?: string; index?: number },
): Promise<chrome.bookmarks.BookmarkTreeNode> {
  return new Promise((resolve, reject) => {
    if (!chrome?.bookmarks) {
      reject(new Error('Chrome bookmarks API not available.'));
      return;
    }
    chrome.bookmarks.move(id, destination, (result) => {
      if (chrome.runtime.lastError) {
        reject(new Error(chrome.runtime.lastError.message));
        return;
      }
      resolve(result);
    });
  });
}

/**
 * Deletes a bookmark or folder (and all its contents).
 * @param id - The bookmark/folder ID
 */
export async function deleteBookmark(id: string): Promise<void> {
  return new Promise((resolve, reject) => {
    if (!chrome?.bookmarks) {
      reject(new Error('Chrome bookmarks API not available.'));
      return;
    }
    chrome.bookmarks.removeTree(id, () => {
      if (chrome.runtime.lastError) {
        reject(new Error(chrome.runtime.lastError.message));
        return;
      }
      resolve();
    });
  });
}

/**
 * Gets the current active tab information.
 */
export async function getCurrentTab(): Promise<chrome.tabs.Tab> {
  return new Promise((resolve, reject) => {
    if (!chrome?.tabs) {
      reject(new Error('Chrome tabs API not available.'));
      return;
    }
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
      if (chrome.runtime.lastError) {
        reject(new Error(chrome.runtime.lastError.message));
        return;
      }
      if (tabs.length === 0) {
        reject(new Error('No active tab found.'));
        return;
      }
      resolve(tabs[0]);
    });
  });
}

/**
 * Truncates a string to a specified length.
 * @param text - The text to truncate
 * @param length - Maximum length (default: 50)
 */
export function truncate(text?: string, length = 50): string {
  if (!text) return '';
  return text.length > length ? text.slice(0, length) + '...' : text;
}

/**
 * Formats a timestamp to a locale string.
 * @param timestamp - The timestamp in milliseconds
 */
export function formatDate(timestamp?: number): string {
  if (!timestamp) return '';
  return new Date(timestamp).toLocaleString();
}
</file>

<file path="src/services/index.ts">
/**
 * Services barrel export.
 */

export * from './bookmarks';
</file>

<file path="src/stores/bookmark-store.ts">
/**
 * Zustand store for bookmark state management.
 * Centralizes all bookmark-related state and actions.
 */

import { create } from 'zustand';
import { devtools } from 'zustand/middleware';
import {
  createBookmark,
  deleteBookmark,
  fetchBookmarkTree,
  getBookmark,
  getCurrentTab,
  moveBookmark,
} from '@/services';
import type { BookmarkTreeNode, DragOperation } from '@/types';

interface BookmarkState {
  // State
  folders: BookmarkTreeNode[];
  filteredFolders: BookmarkTreeNode[];
  isLoading: boolean;
  error: string | null;
  query: string;
  debouncedQuery: string;
  expandedFolders: string[];
  forceExpandAll: boolean;
  draggedItem: BookmarkTreeNode | null;
  creatingFolderId: string | null;
  newFolderName: string;

  // Actions
  fetchFolders: () => Promise<void>;
  setQuery: (query: string) => void;
  setDebouncedQuery: (query: string) => void;
  setExpandedFolders: (folders: string[] | ((prev: string[]) => string[])) => void;
  setForceExpandAll: (expand: boolean) => void;
  setDraggedItem: (item: BookmarkTreeNode | null) => void;
  setCreatingFolderId: (id: string | null) => void;
  setNewFolderName: (name: string) => void;

  // Bookmark operations
  addBookmarkToFolder: (folderId: string) => Promise<{ success: boolean; message: string }>;
  createFolder: (parentId: string, name: string) => Promise<{ success: boolean; message: string }>;
  removeBookmark: (bookmarkId: string) => Promise<{ success: boolean; message: string }>;
  removeFolder: (folderId: string) => Promise<{ success: boolean; message: string }>;
  handleDrop: (operation: DragOperation) => Promise<{ success: boolean; message: string }>;

  // Folder expansion helpers
  getAllChildFolderIds: (node: BookmarkTreeNode) => string[];
  toggleExpandAllChildren: (node: BookmarkTreeNode, e: React.MouseEvent) => void;
  areAllChildrenExpanded: (node: BookmarkTreeNode) => boolean;

  // Filter helpers
  filterFolders: (nodes: BookmarkTreeNode[], searchQuery: string) => BookmarkTreeNode[];
  applyFilter: () => void;
}

export const useBookmarkStore = create<BookmarkState>()(
  devtools(
    (set, get) => ({
      // Initial state
      folders: [],
      filteredFolders: [],
      isLoading: true,
      error: null,
      query: '',
      debouncedQuery: '',
      expandedFolders: [],
      forceExpandAll: false,
      draggedItem: null,
      creatingFolderId: null,
      newFolderName: '',

      // Fetch folders from Chrome API
      fetchFolders: async () => {
        set({ isLoading: true, error: null });
        try {
          const data = await fetchBookmarkTree();
          set({ folders: data, filteredFolders: data, isLoading: false });
        } catch (err) {
          set({
            error: err instanceof Error ? err.message : 'Failed to fetch bookmarks',
            isLoading: false,
          });
        }
      },

      // Setters
      setQuery: (query) => set({ query }),
      setDebouncedQuery: (debouncedQuery) => {
        set({ debouncedQuery });
        get().applyFilter();
      },
      setExpandedFolders: (folders) => {
        if (typeof folders === 'function') {
          set((state) => ({ expandedFolders: folders(state.expandedFolders) }));
        } else {
          set({ expandedFolders: folders });
        }
      },
      setForceExpandAll: (forceExpandAll) => {
        set({ forceExpandAll });
        get().applyFilter();
      },
      setDraggedItem: (draggedItem) => set({ draggedItem }),
      setCreatingFolderId: (creatingFolderId) => set({ creatingFolderId }),
      setNewFolderName: (newFolderName) => set({ newFolderName }),

      // Bookmark operations
      addBookmarkToFolder: async (folderId) => {
        try {
          const tab = await getCurrentTab();
          const parentFolder = await getBookmark(folderId);
          await createBookmark({
            parentId: folderId,
            title: tab.title || 'New Bookmark',
            url: tab.url || '',
          });
          await get().fetchFolders();

          const truncatedTitle = tab.title
            ? tab.title.length > 30
              ? tab.title.slice(0, 30) + '...'
              : tab.title
            : 'New Bookmark';

          return {
            success: true,
            message: `"${truncatedTitle}" added to "${parentFolder.title}"`,
          };
        } catch (error) {
          console.error('Failed to add bookmark:', error);
          return { success: false, message: 'Failed to add bookmark. Please try again.' };
        }
      },

      createFolder: async (parentId, name) => {
        try {
          const parentFolder = await getBookmark(parentId);
          await createBookmark({ parentId, title: name.trim() });
          await get().fetchFolders();
          return {
            success: true,
            message: `New folder "${name.trim()}" added in "${parentFolder.title}"`,
          };
        } catch (error) {
          console.error('Failed to create folder:', error);
          return { success: false, message: 'Failed to create new folder. Please try again.' };
        }
      },

      removeBookmark: async (bookmarkId) => {
        try {
          const bookmark = await getBookmark(bookmarkId);
          await deleteBookmark(bookmarkId);
          await get().fetchFolders();

          const truncatedTitle = bookmark.title
            ? bookmark.title.length > 30
              ? bookmark.title.slice(0, 30) + '...'
              : bookmark.title
            : 'Bookmark';

          return { success: true, message: `"${truncatedTitle}" has been removed` };
        } catch (error) {
          console.error('Failed to delete bookmark:', error);
          return { success: false, message: 'Failed to delete bookmark. Please try again.' };
        }
      },

      removeFolder: async (folderId) => {
        try {
          const folder = await getBookmark(folderId);
          await deleteBookmark(folderId);
          await get().fetchFolders();

          const truncatedTitle = folder.title
            ? folder.title.length > 30
              ? folder.title.slice(0, 30) + '...'
              : folder.title
            : 'Folder';

          return { success: true, message: `"${truncatedTitle}" has been removed` };
        } catch (error) {
          console.error('Failed to delete folder:', error);
          return { success: false, message: 'Failed to delete folder. Please try again.' };
        }
      },

      handleDrop: async (operation) => {
        try {
          if (operation.type === 'folder-move' || operation.type === 'bookmark-move') {
            await moveBookmark(operation.sourceId, {
              parentId: operation.targetParentId,
              index: operation.targetIndex,
            });
          } else {
            await moveBookmark(operation.sourceId, { index: operation.targetIndex });
          }

          await get().fetchFolders();

          const sourceItem = await getBookmark(operation.sourceId);
          const targetFolder = operation.targetParentId
            ? await getBookmark(operation.targetParentId)
            : null;

          const message = operation.type.includes('move')
            ? `"${sourceItem.title}" moved to "${targetFolder?.title || 'root'}"`
            : `"${sourceItem.title}" reordered to position ${operation.targetIndex + 1}`;

          return { success: true, message };
        } catch (error) {
          console.error('Failed to move item:', error);
          return { success: false, message: 'Failed to move item. Please try again.' };
        }
      },

      // Folder expansion helpers
      getAllChildFolderIds: (node) => {
        if (!node.children) return [];
        return node.children.reduce((acc: string[], child) => {
          if (child.children) {
            return [...acc, child.id, ...get().getAllChildFolderIds(child)];
          }
          return acc;
        }, []);
      },

      toggleExpandAllChildren: (node, e) => {
        e.stopPropagation();
        const { folders, expandedFolders, getAllChildFolderIds, setExpandedFolders } = get();

        const findNode = (nodes: BookmarkTreeNode[], id: string): BookmarkTreeNode | null => {
          for (const n of nodes) {
            if (n.id === id) return n;
            if (n.children) {
              const found = findNode(n.children, id);
              if (found) return found;
            }
          }
          return null;
        };

        const originalNode = findNode(folders, node.id);
        if (!originalNode) return;

        const childFolderIds = getAllChildFolderIds(originalNode);
        const isExpanded = childFolderIds.every((id) => expandedFolders.includes(id));

        if (isExpanded) {
          setExpandedFolders(expandedFolders.filter((id) => !childFolderIds.includes(id)));
        } else {
          setExpandedFolders([...new Set([...expandedFolders, ...childFolderIds])]);
        }
      },

      areAllChildrenExpanded: (node) => {
        const { folders, expandedFolders, getAllChildFolderIds } = get();

        const findNode = (nodes: BookmarkTreeNode[], id: string): BookmarkTreeNode | null => {
          for (const n of nodes) {
            if (n.id === id) return n;
            if (n.children) {
              const found = findNode(n.children, id);
              if (found) return found;
            }
          }
          return null;
        };

        const originalNode = findNode(folders, node.id);
        if (!originalNode) return false;

        const childFolderIds = getAllChildFolderIds(originalNode);
        return (
          childFolderIds.length > 0 && childFolderIds.every((id) => expandedFolders.includes(id))
        );
      },

      // Filter helpers
      filterFolders: (nodes, searchQuery) => {
        const { forceExpandAll } = get();

        if (!searchQuery) return nodes;

        if (forceExpandAll) {
          const deepCopy = (node: BookmarkTreeNode): BookmarkTreeNode => ({
            ...node,
            children: node.children ? node.children.map(deepCopy) : undefined,
            isOpen: true,
          });
          return nodes.map(deepCopy);
        }

        const filtered: BookmarkTreeNode[] = [];
        for (const node of nodes) {
          const nodeMatches = node.title.toLowerCase().includes(searchQuery.toLowerCase());

          if (node.children) {
            const filteredChildren = get().filterFolders(node.children, searchQuery);

            if (nodeMatches || filteredChildren.length > 0) {
              const childrenToInclude = nodeMatches
                ? node.children.map((child) => {
                    if (
                      child.children &&
                      child.title.toLowerCase().includes(searchQuery.toLowerCase())
                    ) {
                      return {
                        ...child,
                        title: child.title.replace(
                          new RegExp(`(${searchQuery})`, 'gi'),
                          '<b>$1</b>',
                        ),
                        isOpen: true,
                      };
                    }
                    return child;
                  })
                : filteredChildren;

              const shouldExpand =
                !nodeMatches ||
                node.children?.some(
                  (child) =>
                    child.children && child.title.toLowerCase().includes(searchQuery.toLowerCase()),
                );

              filtered.push({
                ...node,
                title: nodeMatches
                  ? node.title.replace(new RegExp(`(${searchQuery})`, 'gi'), '<b>$1</b>')
                  : node.title,
                children: childrenToInclude,
                isOpen: shouldExpand,
              });
            }
          } else if (nodeMatches) {
            filtered.push({
              ...node,
              title: node.title.replace(new RegExp(`(${searchQuery})`, 'gi'), '<b>$1</b>'),
            });
          }
        }
        return filtered;
      },

      applyFilter: () => {
        const { folders, debouncedQuery, filterFolders, forceExpandAll } = get();

        if (debouncedQuery) {
          const filtered = filterFolders(folders, debouncedQuery);
          set({ filteredFolders: filtered });

          const getExpandableFolderIds = (nodes: BookmarkTreeNode[]): string[] => {
            return nodes.reduce((acc: string[], node) => {
              if (node.children && (node.isOpen || forceExpandAll)) {
                return [...acc, node.id, ...getExpandableFolderIds(node.children)];
              }
              return acc;
            }, []);
          };

          set({ expandedFolders: getExpandableFolderIds(filtered) });
        } else {
          set({ filteredFolders: folders, expandedFolders: [], forceExpandAll: false });
        }
      },
    }),
    { name: 'bookmark-store' },
  ),
);
</file>

<file path="src/stores/index.ts">
/**
 * Stores barrel export.
 */

export { useBookmarkStore } from './bookmark-store';
</file>

<file path="src/styles/popup.css">
/* Popup page styles for drag and drop */

.dragging {
  opacity: 0.5;
  cursor: grabbing;
  background-color: hsl(var(--accent));
  border-radius: 0.5rem;
  box-shadow:
    0 4px 6px -1px rgb(0 0 0 / 0.1),
    0 2px 4px -2px rgb(0 0 0 / 0.1);
}

.drop-target {
  background-color: hsl(var(--accent));
  border-radius: 0.5rem;
  transition: background-color 0.2s ease;
}

/* Drop indicator styles */
.drop-indicator {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background-color: rgb(37, 99, 235);
  pointer-events: none;
  z-index: 1000;
  transition: all 0.2s ease;
  box-shadow: 0 0 0 1px white;
}

.drop-indicator::before,
.drop-indicator::after {
  content: '';
  position: absolute;
  width: 6px;
  height: 6px;
  background-color: rgb(37, 99, 235);
  border-radius: 50%;
  top: -2px;
}

.drop-indicator::before {
  left: -1px;
}

.drop-indicator::after {
  right: -1px;
}

/* Accordion styles */
.accordion-content {
  overflow: hidden !important;
  position: relative;
}

.accordion-item {
  overflow: visible !important;
  transition: all 0.2s ease;
  position: relative;
}

.accordion-content .accordion-content {
  overflow: hidden;
}

.accordion-container {
  max-height: 100%;
  overflow-y: auto;
  position: relative;
}

/* Bookmark content area */
.bookmark-content {
  height: 100%;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  position: relative;
}

/* Hover effects */
.bookmark-item {
  transition: all 0.2s ease;
  position: relative;
}

.bookmark-item:hover {
  background-color: hsl(var(--accent));
}

.folder-item {
  transition: all 0.2s ease;
  position: relative;
}

.folder-item:hover {
  background-color: hsl(var(--accent));
}

/* Action button styles */
.action-button {
  opacity: 0;
  transition: all 0.2s ease;
}

.bookmark-item:hover .action-button,
.folder-item:hover .action-button {
  opacity: 1;
}

.action-button:hover {
  transform: scale(1.1);
}

/* Search input styles */
.search-input {
  transition: all 0.2s ease;
}

.search-input:focus {
  transform: translateY(-1px);
  box-shadow:
    0 4px 6px -1px rgb(0 0 0 / 0.1),
    0 2px 4px -2px rgb(0 0 0 / 0.1);
}
</file>

<file path="src/types/bookmark.ts">
/**
 * Centralized type definitions for bookmark-related types.
 * Used across PopupPage, BookmarksPage, and other components.
 */

/**
 * Extended bookmark tree node with additional UI state properties.
 * Extends the Chrome bookmarks API type with UI-specific fields.
 */
export interface BookmarkTreeNode {
  id: string;
  parentId?: string;
  index?: number;
  title: string;
  url?: string;
  dateAdded?: number;
  dateGroupModified?: number;
  children?: BookmarkTreeNode[];
  /** Whether the folder is expanded in the UI */
  isOpen?: boolean;
  /** Whether this is a temporary node (e.g., new folder being created) */
  isTemporary?: boolean;
}

/**
 * Types of drag-and-drop operations.
 */
export type DragOperationType =
  | 'folder-move'
  | 'folder-reorder'
  | 'bookmark-move'
  | 'bookmark-reorder';

/**
 * Represents a drag-and-drop operation for bookmarks/folders.
 */
export interface DragOperation {
  type: DragOperationType;
  sourceId: string;
  sourceParentId: string;
  sourceIndex: number;
  targetId: string;
  targetParentId: string;
  targetIndex: number;
}

/**
 * Data attached to draggable elements.
 */
export interface DragData {
  type: 'folder' | 'bookmark';
  node: BookmarkTreeNode;
  instanceId: symbol;
}

/**
 * Bookmark item for table view (used in BookmarksPage).
 */
export enum ItemTypeEnum {
  Folder = 'folder',
  Link = 'link',
}

export interface BookmarkTableItem {
  type: ItemTypeEnum;
  id: string;
  parentId: string;
  index?: number;
  title: string;
  url?: string;
  dateAdded?: string;
  dateGroupModified?: string;
  unmodifiable?: 'managed';
}
</file>

<file path="src/types/index.ts">
/**
 * Types barrel export.
 * Import types from this file for cleaner imports.
 */

export * from './bookmark';
</file>

<file path="src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  /* text-align: center; */
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

.lucide {
  width: 12px;
  height: 12px;
}
</file>

<file path="src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="website/app/globals.css">
@import "tailwindcss";

:root {
  --background: #0a0a0a;
  --foreground: #ededed;
  --primary: #3b82f6;
  --primary-light: #60a5fa;
  --accent: #8b5cf6;
  --muted: #71717a;
  --card: #18181b;
  --card-border: #27272a;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-primary-light: var(--primary-light);
  --color-accent: var(--accent);
  --color-muted: var(--muted);
  --color-card: var(--card);
  --color-card-border: var(--card-border);
  --font-sans: var(--font-inter);
}

body {
  background: var(--background);
  color: var(--foreground);
}

/* Gradient animations */
@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 8s ease infinite;
}

/* Glow effect */
.glow {
  box-shadow: 0 0 60px rgba(59, 130, 246, 0.3),
              0 0 100px rgba(139, 92, 246, 0.2);
}

/* Glass morphism */
.glass {
  background: rgba(24, 24, 27, 0.7);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
</file>

<file path="website/app/robots.ts">
import type { MetadataRoute } from "next";

export const dynamic = "force-static";

export default function robots(): MetadataRoute.Robots {
    return {
        rules: {
            userAgent: "*",
            allow: "/",
        },
        sitemap: "https://bookmark-scout.vercel.app/sitemap.xml",
    };
}
</file>

<file path="website/app/sitemap.ts">
import type { MetadataRoute } from "next";

export const dynamic = "force-static";

const baseUrl = "https://bookmark-scout.vercel.app";
const locales = ["en", "ja", "ko"];

export default function sitemap(): MetadataRoute.Sitemap {
    const routes = [
        "",
        "/docs",
        "/docs/getting-started",
        "/docs/features",
        "/docs/contributing",
    ];

    const sitemap: MetadataRoute.Sitemap = [];

    for (const locale of locales) {
        for (const route of routes) {
            sitemap.push({
                url: `${baseUrl}/${locale}${route}`,
                lastModified: new Date(),
                changeFrequency: route === "" ? "weekly" : "monthly",
                priority: route === "" ? 1 : 0.8,
            });
        }
    }

    return sitemap;
}
</file>

<file path="website/i18n/request.ts">
import { getRequestConfig } from 'next-intl/server';
import { hasLocale } from 'next-intl';
import { routing } from './routing';

export default getRequestConfig(async ({ requestLocale }) => {
    // Typically corresponds to the `[locale]` segment
    const requested = await requestLocale;
    const locale = hasLocale(routing.locales, requested)
        ? requested
        : routing.defaultLocale;

    return {
        locale,
        messages: (await import(`../messages/${locale}.json`)).default,
    };
});
</file>

<file path="website/i18n/routing.ts">
import { defineRouting } from 'next-intl/routing';

export const routing = defineRouting({
    locales: ['en', 'ja', 'ko'],
    defaultLocale: 'en',
});

export type Locale = (typeof routing.locales)[number];
</file>

<file path="website/messages/en.json">
{
    "metadata": {
        "title": "Bookmark Scout - Modern Chrome Bookmark Manager",
        "description": "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders."
    },
    "nav": {
        "docs": "Docs",
        "github": "GitHub",
        "backToDocs": "← Back to Docs"
    },
    "hero": {
        "badge": "Chrome Extension",
        "manifestV3": "Manifest V3",
        "title": "Bookmark Scout",
        "description": "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders. Features drag-and-drop, instant search, and beautiful dark mode.",
        "viewOnGitHub": "View on GitHub",
        "documentation": "Documentation"
    },
    "features": {
        "title": "Features",
        "subtitle": "Everything you need to manage your bookmarks efficiently",
        "instantSearch": {
            "title": "Instant Search",
            "description": "Find bookmarks instantly with debounced search and folder filtering"
        },
        "dragAndDrop": {
            "title": "Drag & Drop",
            "description": "Organize bookmarks and folders with intuitive drag-and-drop"
        },
        "quickAdd": {
            "title": "Quick Add",
            "description": "Save the current tab to any folder with one click"
        },
        "sidePanel": {
            "title": "Side Panel",
            "description": "Access your bookmarks from Chrome's side panel"
        },
        "darkMode": {
            "title": "Dark Mode",
            "description": "Beautiful dark theme with smooth transitions"
        },
        "expandCollapse": {
            "title": "Expand/Collapse",
            "description": "Quickly expand or collapse all nested folders"
        }
    },
    "techStack": {
        "title": "Tech Stack",
        "subtitle": "Built with modern technologies for the best developer experience"
    },
    "installation": {
        "title": "Installation",
        "subtitle": "Get started in minutes",
        "step1": {
            "title": "Clone the repository"
        },
        "step2": {
            "title": "Install dependencies & build"
        },
        "step3": {
            "title": "Load in Chrome",
            "instructions": {
                "1": "Open chrome://extensions/",
                "2": "Enable Developer mode (top right)",
                "3": "Click Load unpacked",
                "4": "Select the dist folder"
            }
        }
    },
    "footer": {
        "madeWith": "Made with ❤️ by",
        "license": "Licensed under AGPL-3.0"
    },
    "docs": {
        "title": "Documentation",
        "subtitle": "Everything you need to know about Bookmark Scout",
        "gettingStarted": {
            "title": "Getting Started",
            "description": "Learn how to install and set up Bookmark Scout"
        },
        "features": {
            "title": "Features",
            "description": "Explore all the features and capabilities"
        },
        "contributing": {
            "title": "Contributing",
            "description": "How to contribute to the project"
        }
    },
    "gettingStarted": {
        "title": "Getting Started",
        "prerequisites": {
            "title": "Prerequisites",
            "bun": "Bun 1.3 or later",
            "chrome": "Google Chrome or Chromium-based browser",
            "git": "Git"
        },
        "installation": {
            "title": "Installation",
            "step1": "Clone the repository",
            "step2": "Install dependencies",
            "step3": "Build the extension",
            "step4": {
                "title": "Load in Chrome",
                "1": "Open chrome://extensions/",
                "2": "Enable Developer mode (top right toggle)",
                "3": "Click \"Load unpacked\"",
                "4": "Select the dist folder"
            }
        },
        "development": {
            "title": "Development",
            "description": "Start the development server with hot reload:"
        }
    },
    "featuresPage": {
        "title": "Features",
        "subtitle": "Discover everything Bookmark Scout has to offer",
        "instantSearch": {
            "title": "Instant Search",
            "description": "Quickly find any bookmark with our lightning-fast search. Features debounced input for performance and folder filtering to narrow down results."
        },
        "dragAndDrop": {
            "title": "Drag & Drop Organization",
            "description": "Reorganize your bookmarks with intuitive drag-and-drop. Move bookmarks between folders or reorder within a folder with ease."
        },
        "quickAdd": {
            "title": "Quick Add",
            "description": "Save the current tab to any folder with just one click. No more navigating through nested menus - just pick a folder and done!"
        },
        "sidePanel": {
            "title": "Side Panel",
            "description": "Access your bookmarks directly from Chrome's side panel without leaving your current page. Perfect for research and reference work."
        },
        "darkMode": {
            "title": "Beautiful Dark Mode",
            "description": "A stunning dark theme that's easy on the eyes. Features smooth transitions and carefully chosen colors for optimal readability."
        },
        "expandCollapse": {
            "title": "Expand/Collapse All",
            "description": "Quickly expand or collapse all nested folders with a single click. Great for getting an overview or focusing on specific sections."
        },
        "createFolders": {
            "title": "Create Folders",
            "description": "Create new bookmark folders directly from the popup. Keep your bookmarks organized without opening the bookmark manager."
        },
        "deleteItems": {
            "title": "Delete Items",
            "description": "Remove unwanted bookmarks and folders with confirmation dialogs to prevent accidental deletions."
        },
        "roadmap": {
            "title": "Roadmap",
            "fullManager": "Full Bookmarks Manager — Replace Chrome's default bookmarks page",
            "options": "Options Page — Customize extension settings",
            "tags": "Tags — Add custom tags for better organization",
            "duplicates": "Duplicate Detection — Find and remove duplicates",
            "deadLinks": "Dead Link Checker — Detect broken links",
            "shortcuts": "Keyboard Shortcuts — Navigate with hotkeys"
        }
    },
    "contributingPage": {
        "title": "Contributing",
        "subtitle": "We welcome contributions! Here's how to get started.",
        "howTo": {
            "title": "How to Contribute",
            "step1": "Fork the repository",
            "step2": "Create your feature branch:",
            "step3": "Commit your changes:",
            "step4": "Push to the branch:",
            "step5": "Open a Pull Request"
        },
        "commits": {
            "title": "Commit Convention",
            "description": "We use Conventional Commits. Format your commits as:",
            "feat": "New feature",
            "fix": "Bug fix",
            "docs": "Documentation",
            "refactor": "Code refactoring",
            "test": "Tests",
            "chore": "Maintenance"
        },
        "setup": {
            "title": "Development Setup"
        },
        "codeStyle": {
            "title": "Code Style",
            "biome": "We use Biome for linting and formatting",
            "check": "Run bun run check before committing",
            "strict": "TypeScript strict mode is enabled",
            "functional": "Components use functional style with hooks"
        }
    }
}
</file>

<file path="website/messages/ja.json">
{
    "metadata": {
        "title": "Bookmark Scout - モダンなChromeブックマークマネージャー",
        "description": "ブックマークを素早く検索、整理、特定のフォルダに保存できるモダンなChrome拡張機能"
    },
    "nav": {
        "docs": "ドキュメント",
        "github": "GitHub",
        "backToDocs": "← ドキュメントに戻る"
    },
    "hero": {
        "badge": "Chrome拡張機能",
        "manifestV3": "Manifest V3",
        "title": "Bookmark Scout",
        "description": "ブックマークを素早く検索、整理、特定のフォルダに保存できるモダンなChrome拡張機能。ドラッグ＆ドロップ、インスタント検索、美しいダークモードを搭載。",
        "viewOnGitHub": "GitHubで見る",
        "documentation": "ドキュメント"
    },
    "features": {
        "title": "機能",
        "subtitle": "ブックマークを効率的に管理するために必要なすべて",
        "instantSearch": {
            "title": "インスタント検索",
            "description": "デバウンス検索とフォルダフィルタリングでブックマークを瞬時に検索"
        },
        "dragAndDrop": {
            "title": "ドラッグ＆ドロップ",
            "description": "直感的なドラッグ＆ドロップでブックマークとフォルダを整理"
        },
        "quickAdd": {
            "title": "クイック追加",
            "description": "ワンクリックで現在のタブを任意のフォルダに保存"
        },
        "sidePanel": {
            "title": "サイドパネル",
            "description": "Chromeのサイドパネルからブックマークにアクセス"
        },
        "darkMode": {
            "title": "ダークモード",
            "description": "スムーズなトランジションを持つ美しいダークテーマ"
        },
        "expandCollapse": {
            "title": "展開/折りたたみ",
            "description": "ネストされたフォルダをすばやく展開または折りたたみ"
        }
    },
    "techStack": {
        "title": "技術スタック",
        "subtitle": "最高の開発者体験のためにモダンな技術で構築"
    },
    "installation": {
        "title": "インストール",
        "subtitle": "数分で始められます",
        "step1": {
            "title": "リポジトリをクローン"
        },
        "step2": {
            "title": "依存関係をインストール＆ビルド"
        },
        "step3": {
            "title": "Chromeにロード",
            "instructions": {
                "1": "chrome://extensions/ を開く",
                "2": "デベロッパーモードを有効化（右上）",
                "3": "「パッケージ化されていない拡張機能を読み込む」をクリック",
                "4": "dist フォルダを選択"
            }
        }
    },
    "footer": {
        "madeWith": "❤️を込めて作成",
        "license": "AGPL-3.0ライセンス"
    },
    "docs": {
        "title": "ドキュメント",
        "subtitle": "Bookmark Scoutについて知っておくべきすべて",
        "gettingStarted": {
            "title": "はじめに",
            "description": "Bookmark Scoutのインストールとセットアップ方法を学ぶ"
        },
        "features": {
            "title": "機能",
            "description": "すべての機能と機能を探索する"
        },
        "contributing": {
            "title": "コントリビューション",
            "description": "プロジェクトへの貢献方法"
        }
    },
    "gettingStarted": {
        "title": "はじめに",
        "prerequisites": {
            "title": "前提条件",
            "bun": "Bun 1.3以降",
            "chrome": "Google ChromeまたはChromiumベースのブラウザ",
            "git": "Git"
        },
        "installation": {
            "title": "インストール",
            "step1": "リポジトリをクローン",
            "step2": "依存関係をインストール",
            "step3": "拡張機能をビルド",
            "step4": {
                "title": "Chromeにロード",
                "1": "chrome://extensions/ を開く",
                "2": "デベロッパーモードを有効化（右上のトグル）",
                "3": "「パッケージ化されていない拡張機能を読み込む」をクリック",
                "4": "dist フォルダを選択"
            }
        },
        "development": {
            "title": "開発",
            "description": "ホットリロード付きの開発サーバーを起動:"
        }
    },
    "featuresPage": {
        "title": "機能",
        "subtitle": "Bookmark Scoutが提供するすべてを発見",
        "instantSearch": {
            "title": "インスタント検索",
            "description": "高速検索でブックマークを素早く見つけます。パフォーマンスのためのデバウンス入力と結果を絞り込むフォルダフィルタリングを搭載。"
        },
        "dragAndDrop": {
            "title": "ドラッグ＆ドロップ整理",
            "description": "直感的なドラッグ＆ドロップでブックマークを再整理。フォルダ間の移動やフォルダ内の並べ替えが簡単に。"
        },
        "quickAdd": {
            "title": "クイック追加",
            "description": "ワンクリックで現在のタブを任意のフォルダに保存。ネストされたメニューをナビゲートする必要はありません。"
        },
        "sidePanel": {
            "title": "サイドパネル",
            "description": "現在のページを離れることなくChromeのサイドパネルからブックマークに直接アクセス。リサーチや参照作業に最適。"
        },
        "darkMode": {
            "title": "美しいダークモード",
            "description": "目に優しい美しいダークテーマ。スムーズなトランジションと最適な読みやすさのために慎重に選択された色を搭載。"
        },
        "expandCollapse": {
            "title": "すべて展開/折りたたみ",
            "description": "ワンクリックですべてのネストされたフォルダを展開または折りたたみ。概要把握や特定のセクションへの集中に最適。"
        },
        "createFolders": {
            "title": "フォルダ作成",
            "description": "ポップアップから直接新しいブックマークフォルダを作成。ブックマークマネージャーを開かずにブックマークを整理。"
        },
        "deleteItems": {
            "title": "アイテム削除",
            "description": "確認ダイアログ付きで不要なブックマークやフォルダを削除。誤削除を防止。"
        },
        "roadmap": {
            "title": "ロードマップ",
            "fullManager": "フルブックマークマネージャー — Chromeのデフォルトブックマークページを置き換え",
            "options": "オプションページ — 拡張機能設定をカスタマイズ",
            "tags": "タグ — より良い整理のためのカスタムタグを追加",
            "duplicates": "重複検出 — 重複を見つけて削除",
            "deadLinks": "デッドリンクチェッカー — 壊れたリンクを検出",
            "shortcuts": "キーボードショートカット — ホットキーでナビゲート"
        }
    },
    "contributingPage": {
        "title": "コントリビューション",
        "subtitle": "コントリビューションを歓迎します！始め方はこちら。",
        "howTo": {
            "title": "コントリビューション方法",
            "step1": "リポジトリをフォーク",
            "step2": "フィーチャーブランチを作成:",
            "step3": "変更をコミット:",
            "step4": "ブランチにプッシュ:",
            "step5": "Pull Requestを作成"
        },
        "commits": {
            "title": "コミット規約",
            "description": "Conventional Commitsを使用しています。コミットのフォーマット:",
            "feat": "新機能",
            "fix": "バグ修正",
            "docs": "ドキュメント",
            "refactor": "コードリファクタリング",
            "test": "テスト",
            "chore": "メンテナンス"
        },
        "setup": {
            "title": "開発セットアップ"
        },
        "codeStyle": {
            "title": "コードスタイル",
            "biome": "リンティングとフォーマッティングにBiomeを使用",
            "check": "コミット前にbun run checkを実行",
            "strict": "TypeScript strictモードが有効",
            "functional": "コンポーネントはhooksを使用した関数型スタイル"
        }
    }
}
</file>

<file path="website/messages/ko.json">
{
    "metadata": {
        "title": "Bookmark Scout - 모던 Chrome 북마크 관리자",
        "description": "북마크를 빠르게 검색하고, 정리하고, 특정 폴더에 저장할 수 있는 모던 Chrome 확장 프로그램"
    },
    "nav": {
        "docs": "문서",
        "github": "GitHub",
        "backToDocs": "← 문서로 돌아가기"
    },
    "hero": {
        "badge": "Chrome 확장 프로그램",
        "manifestV3": "Manifest V3",
        "title": "Bookmark Scout",
        "description": "북마크를 빠르게 검색하고, 정리하고, 특정 폴더에 저장할 수 있는 모던 Chrome 확장 프로그램. 드래그 앤 드롭, 즉시 검색, 아름다운 다크 모드를 지원합니다.",
        "viewOnGitHub": "GitHub에서 보기",
        "documentation": "문서"
    },
    "features": {
        "title": "기능",
        "subtitle": "북마크를 효율적으로 관리하는 데 필요한 모든 것",
        "instantSearch": {
            "title": "즉시 검색",
            "description": "디바운스 검색과 폴더 필터링으로 북마크를 즉시 검색"
        },
        "dragAndDrop": {
            "title": "드래그 앤 드롭",
            "description": "직관적인 드래그 앤 드롭으로 북마크와 폴더 정리"
        },
        "quickAdd": {
            "title": "빠른 추가",
            "description": "한 번의 클릭으로 현재 탭을 원하는 폴더에 저장"
        },
        "sidePanel": {
            "title": "사이드 패널",
            "description": "Chrome 사이드 패널에서 북마크에 접근"
        },
        "darkMode": {
            "title": "다크 모드",
            "description": "부드러운 전환 효과가 있는 아름다운 다크 테마"
        },
        "expandCollapse": {
            "title": "펼치기/접기",
            "description": "중첩된 폴더를 빠르게 펼치거나 접기"
        }
    },
    "techStack": {
        "title": "기술 스택",
        "subtitle": "최고의 개발자 경험을 위해 최신 기술로 구축"
    },
    "installation": {
        "title": "설치",
        "subtitle": "몇 분 안에 시작하세요",
        "step1": {
            "title": "리포지토리 클론"
        },
        "step2": {
            "title": "의존성 설치 및 빌드"
        },
        "step3": {
            "title": "Chrome에 로드",
            "instructions": {
                "1": "chrome://extensions/ 열기",
                "2": "개발자 모드 활성화 (오른쪽 상단)",
                "3": "압축해제된 확장 프로그램을 로드합니다 클릭",
                "4": "dist 폴더 선택"
            }
        }
    },
    "footer": {
        "madeWith": "❤️로 만들었습니다",
        "license": "AGPL-3.0 라이선스"
    },
    "docs": {
        "title": "문서",
        "subtitle": "Bookmark Scout에 대해 알아야 할 모든 것",
        "gettingStarted": {
            "title": "시작하기",
            "description": "Bookmark Scout 설치 및 설정 방법 배우기"
        },
        "features": {
            "title": "기능",
            "description": "모든 기능과 가능성 탐색"
        },
        "contributing": {
            "title": "기여하기",
            "description": "프로젝트에 기여하는 방법"
        }
    },
    "gettingStarted": {
        "title": "시작하기",
        "prerequisites": {
            "title": "사전 요구사항",
            "bun": "Bun 1.3 이상",
            "chrome": "Google Chrome 또는 Chromium 기반 브라우저",
            "git": "Git"
        },
        "installation": {
            "title": "설치",
            "step1": "리포지토리 클론",
            "step2": "의존성 설치",
            "step3": "확장 프로그램 빌드",
            "step4": {
                "title": "Chrome에 로드",
                "1": "chrome://extensions/ 열기",
                "2": "개발자 모드 활성화 (오른쪽 상단 토글)",
                "3": "\"압축해제된 확장 프로그램을 로드합니다\" 클릭",
                "4": "dist 폴더 선택"
            }
        },
        "development": {
            "title": "개발",
            "description": "핫 리로드가 있는 개발 서버 시작:"
        }
    },
    "featuresPage": {
        "title": "기능",
        "subtitle": "Bookmark Scout가 제공하는 모든 것을 발견하세요",
        "instantSearch": {
            "title": "즉시 검색",
            "description": "초고속 검색으로 북마크를 빠르게 찾으세요. 성능을 위한 디바운스 입력과 결과를 좁히는 폴더 필터링을 지원합니다."
        },
        "dragAndDrop": {
            "title": "드래그 앤 드롭 정리",
            "description": "직관적인 드래그 앤 드롭으로 북마크를 재정리하세요. 폴더 간 이동이나 폴더 내 재정렬이 쉽습니다."
        },
        "quickAdd": {
            "title": "빠른 추가",
            "description": "한 번의 클릭으로 현재 탭을 원하는 폴더에 저장하세요. 더 이상 중첩된 메뉴를 탐색할 필요가 없습니다."
        },
        "sidePanel": {
            "title": "사이드 패널",
            "description": "현재 페이지를 떠나지 않고 Chrome의 사이드 패널에서 북마크에 직접 접근하세요. 리서치와 참조 작업에 완벽합니다."
        },
        "darkMode": {
            "title": "아름다운 다크 모드",
            "description": "눈이 편한 멋진 다크 테마. 부드러운 전환과 최적의 가독성을 위해 신중하게 선택된 색상을 지원합니다."
        },
        "expandCollapse": {
            "title": "모두 펼치기/접기",
            "description": "한 번의 클릭으로 모든 중첩된 폴더를 펼치거나 접으세요. 개요 보기나 특정 섹션에 집중하기에 좋습니다."
        },
        "createFolders": {
            "title": "폴더 생성",
            "description": "팝업에서 직접 새 북마크 폴더를 생성하세요. 북마크 관리자를 열지 않고도 북마크를 정리할 수 있습니다."
        },
        "deleteItems": {
            "title": "항목 삭제",
            "description": "확인 대화상자와 함께 원치 않는 북마크와 폴더를 삭제하세요. 실수로 삭제하는 것을 방지합니다."
        },
        "roadmap": {
            "title": "로드맵",
            "fullManager": "전체 북마크 관리자 — Chrome의 기본 북마크 페이지 대체",
            "options": "옵션 페이지 — 확장 프로그램 설정 커스터마이즈",
            "tags": "태그 — 더 나은 정리를 위한 커스텀 태그 추가",
            "duplicates": "중복 감지 — 중복 찾기 및 제거",
            "deadLinks": "데드 링크 체커 — 깨진 링크 감지",
            "shortcuts": "키보드 단축키 — 핫키로 탐색"
        }
    },
    "contributingPage": {
        "title": "기여하기",
        "subtitle": "기여를 환영합니다! 시작하는 방법은 다음과 같습니다.",
        "howTo": {
            "title": "기여 방법",
            "step1": "리포지토리 포크",
            "step2": "기능 브랜치 생성:",
            "step3": "변경사항 커밋:",
            "step4": "브랜치에 푸시:",
            "step5": "Pull Request 열기"
        },
        "commits": {
            "title": "커밋 규칙",
            "description": "Conventional Commits를 사용합니다. 커밋 형식:",
            "feat": "새 기능",
            "fix": "버그 수정",
            "docs": "문서",
            "refactor": "코드 리팩토링",
            "test": "테스트",
            "chore": "유지보수"
        },
        "setup": {
            "title": "개발 설정"
        },
        "codeStyle": {
            "title": "코드 스타일",
            "biome": "린팅과 포맷팅에 Biome 사용",
            "check": "커밋 전에 bun run check 실행",
            "strict": "TypeScript strict 모드 활성화",
            "functional": "컴포넌트는 hooks를 사용한 함수형 스타일"
        }
    }
}
</file>

<file path="website/public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="website/public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="website/public/manifest.json">
{
    "name": "Bookmark Scout",
    "short_name": "Bookmark Scout",
    "description": "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders.",
    "start_url": "/",
    "display": "standalone",
    "background_color": "#0a0a0a",
    "theme_color": "#6366f1",
    "icons": [
        {
            "src": "/icon.png",
            "sizes": "128x128",
            "type": "image/png"
        }
    ]
}
</file>

<file path="website/public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="website/public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="website/public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="website/.gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="website/eslint.config.mjs">
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;
</file>

<file path="website/postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="website/README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="website/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
</file>

<file path="biome.json">
{
    "$schema": "https://biomejs.dev/schemas/2.3.10/schema.json",
    "vcs": {
        "enabled": true,
        "clientKind": "git",
        "useIgnoreFile": true
    },
    "files": {
        "ignoreUnknown": true,
        "includes": [
            "src/**/*.ts",
            "src/**/*.tsx"
        ]
    },
    "formatter": {
        "enabled": true,
        "indentStyle": "space",
        "indentWidth": 2,
        "lineWidth": 100
    },
    "linter": {
        "enabled": true,
        "rules": {
            "recommended": true,
            "correctness": {
                "useExhaustiveDependencies": "warn",
                "useHookAtTopLevel": "error"
            },
            "suspicious": {
                "noExplicitAny": "warn"
            }
        }
    },
    "javascript": {
        "formatter": {
            "quoteStyle": "single",
            "trailingCommas": "all"
        }
    }
}
</file>

<file path="CHANGELOG.md">
# bookmark-scout

## 0.1.0

### Minor Changes

- ### Tooling & Build System Improvements

  - Add Nx 22 for monorepo-style build orchestration and caching
  - Integrate Rolldown-Vite 7.3 for faster builds
  - Add Changesets for version management and changelog generation
  - Migrate ESLint to Biome for linting and formatting
  - Convert config files from JS to TypeScript (postcss.config.ts, tailwind.config.ts)
</file>

<file path="components.json">
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.js",
    "css": "src/global.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "iconLibrary": "lucide"
}
</file>

<file path="LICENSE">
GNU AFFERO GENERAL PUBLIC LICENSE
                       Version 3, 19 November 2007

 Copyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

                            Preamble

  The GNU Affero General Public License is a free, copyleft license for
software and other kinds of works, specifically designed to ensure
cooperation with the community in the case of network server software.

  The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
our General Public Licenses are intended to guarantee your freedom to
share and change all versions of a program--to make sure it remains free
software for all its users.

  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

  Developers that use our General Public Licenses protect your rights
with two steps: (1) assert copyright on the software, and (2) offer
you this License which gives you legal permission to copy, distribute
and/or modify the software.

  A secondary benefit of defending all users' freedom is that
improvements made in alternate versions of the program, if they
receive widespread use, become available for other developers to
incorporate.  Many developers of free software are heartened and
encouraged by the resulting cooperation.  However, in the case of
software used on network servers, this result may fail to come about.
The GNU General Public License permits making a modified version and
letting the public access it on a server without ever releasing its
source code to the public.

  The GNU Affero General Public License is designed specifically to
ensure that, in such cases, the modified source code becomes available
to the community.  It requires the operator of a network server to
provide the source code of the modified version running there to the
users of that server.  Therefore, public use of a modified version, on
a publicly accessible server, gives the public access to the source
code of the modified version.

  An older license, called the Affero General Public License and
published by Affero, was designed to accomplish similar goals.  This is
a different license, not a version of the Affero GPL, but Affero has
released a new version of the Affero GPL which permits relicensing under
this license.

  The precise terms and conditions for copying, distribution and
modification follow.

                       TERMS AND CONDITIONS

  0. Definitions.

  "This License" refers to version 3 of the GNU Affero General Public License.

  "Copyright" also means copyright-like laws that apply to other kinds of
works, such as semiconductor masks.

  "The Program" refers to any copyrightable work licensed under this
License.  Each licensee is addressed as "you".  "Licensees" and
"recipients" may be individuals or organizations.

  To "modify" a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of an
exact copy.  The resulting work is called a "modified version" of the
earlier work or a work "based on" the earlier work.

  A "covered work" means either the unmodified Program or a work based
on the Program.

  To "propagate" a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

  To "convey" a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user through
a computer network, with no transfer of a copy, is not conveying.

  An interactive user interface displays "Appropriate Legal Notices"
to the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

  1. Source Code.

  The "source code" for a work means the preferred form of the work
for making modifications to it.  "Object code" means any non-source
form of a work.

  A "Standard Interface" means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

  The "System Libraries" of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
"Major Component", in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

  The "Corresponding Source" for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

  The Corresponding Source need not include anything that users
can regenerate automatically from other parts of the Corresponding
Source.

  The Corresponding Source for a work in source code form is that
same work.

  2. Basic Permissions.

  All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

  You may make, run and propagate covered works that you do not
convey, without conditions so long as your license otherwise remains
in force.  You may convey covered works to others for the sole purpose
of having them make modifications exclusively for you, or provide you
with facilities for running those works, provided that you comply with
the terms of this License in conveying all material for which you do
not control copyright.  Those thus making or running the covered works
for you must do so exclusively on your behalf, under your direction
and control, on terms that prohibit them from making any copies of
your copyrighted material outside their relationship with you.

  Conveying under any other circumstances is permitted solely under
the conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

  3. Protecting Users' Legal Rights From Anti-Circumvention Law.

  No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

  When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such circumvention
is effected by exercising rights under this License with respect to
the covered work, and you disclaim any intention to limit operation or
modification of the work as a means of enforcing, against the work's
users, your or third parties' legal rights to forbid circumvention of
technological measures.

  4. Conveying Verbatim Copies.

  You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

  You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

  5. Conveying Modified Source Versions.

  You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these conditions:

    a) The work must carry prominent notices stating that you modified
    it, and giving a relevant date.

    b) The work must carry prominent notices stating that it is
    released under this License and any conditions added under section
    7.  This requirement modifies the requirement in section 4 to
    "keep intact all notices".

    c) You must license the entire work, as a whole, under this
    License to anyone who comes into possession of a copy.  This
    License will therefore apply, along with any applicable section 7
    additional terms, to the whole of the work, and all its parts,
    regardless of how they are packaged.  This License gives no
    permission to license the work in any other way, but it does not
    invalidate such permission if you have separately received it.

    d) If the work has interactive user interfaces, each must display
    Appropriate Legal Notices; however, if the Program has interactive
    interfaces that do not display Appropriate Legal Notices, your
    work need not make them do so.

  A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
"aggregate" if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

  6. Conveying Non-Source Forms.

  You may convey a covered work in object code form under the terms
of sections 4 and 5, provided that you also convey the
machine-readable Corresponding Source under the terms of this License,
in one of these ways:

    a) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by the
    Corresponding Source fixed on a durable physical medium
    customarily used for software interchange.

    b) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by a
    written offer, valid for at least three years and valid for as
    long as you offer spare parts or customer support for that product
    model, to give anyone who possesses the object code either (1) a
    copy of the Corresponding Source for all the software in the
    product that is covered by this License, on a durable physical
    medium customarily used for software interchange, for a price no
    more than your reasonable cost of physically performing this
    conveying of source, or (2) access to copy the
    Corresponding Source from a network server at no charge.

    c) Convey individual copies of the object code with a copy of the
    written offer to provide the Corresponding Source.  This
    alternative is allowed only occasionally and noncommercially, and
    only if you received the object code with such an offer, in accord
    with subsection 6b.

    d) Convey the object code by offering access from a designated
    place (gratis or for a charge), and offer equivalent access to the
    Corresponding Source in the same way through the same place at no
    further charge.  You need not require recipients to copy the
    Corresponding Source along with the object code.  If the place to
    copy the object code is a network server, the Corresponding Source
    may be on a different server (operated by you or a third party)
    that supports equivalent copying facilities, provided you maintain
    clear directions next to the object code saying where to find the
    Corresponding Source.  Regardless of what server hosts the
    Corresponding Source, you remain obligated to ensure that it is
    available for as long as needed to satisfy these requirements.

    e) Convey the object code using peer-to-peer transmission, provided
    you inform other peers where the object code and Corresponding
    Source of the work are being offered to the general public at no
    charge under subsection 6d.

  A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

  A "User Product" is either (1) a "consumer product", which means any
tangible personal property which is normally used for personal, family,
or household purposes, or (2) anything designed or sold for incorporation
into a dwelling.  In determining whether a product is a consumer product,
doubtful cases shall be resolved in favor of coverage.  For a particular
product received by a particular user, "normally used" refers to a
typical or common use of that class of product, regardless of the status
of the particular user or of the way in which the particular user
actually uses, or expects or is expected to use, the product.  A product
is a consumer product regardless of whether the product has substantial
commercial, industrial or non-consumer uses, unless such uses represent
the only significant mode of use of the product.

  "Installation Information" for a User Product means any methods,
procedures, authorization keys, or other information required to install
and execute modified versions of a covered work in that User Product from
a modified version of its Corresponding Source.  The information must
suffice to ensure that the continued functioning of the modified object
code is in no case prevented or interfered with solely because
modification has been made.

  If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

  The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or updates
for a work that has been modified or installed by the recipient, or for
the User Product in which it has been modified or installed.  Access to a
network may be denied when the modification itself materially and
adversely affects the operation of the network or violates the rules and
protocols for communication across the network.

  Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

  7. Additional Terms.

  "Additional permissions" are terms that supplement the terms of this
License by making exceptions from one or more of its conditions.
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

  When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

  Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders of
that material) supplement the terms of this License with terms:

    a) Disclaiming warranty or limiting liability differently from the
    terms of sections 15 and 16 of this License; or

    b) Requiring preservation of specified reasonable legal notices or
    author attributions in that material or in the Appropriate Legal
    Notices displayed by works containing it; or

    c) Prohibiting misrepresentation of the origin of that material, or
    requiring that modified versions of such material be marked in
    reasonable ways as different from the original version; or

    d) Limiting the use for publicity purposes of names of licensors or
    authors of the material; or

    e) Declining to grant rights under trademark law for use of some
    trade names, trademarks, or service marks; or

    f) Requiring indemnification of licensors and authors of that
    material by anyone who conveys the material (or modified versions of
    it) with contractual assumptions of liability to the recipient, for
    any liability that these contractual assumptions directly impose on
    those licensors and authors.

  All other non-permissive additional terms are considered "further
restrictions" within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

  If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

  Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions;
the above requirements apply either way.

  8. Termination.

  You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

  However, if you cease all violation of this License, then your
license from a particular copyright holder is reinstated (a)
provisionally, unless and until the copyright holder explicitly and
finally terminates your license, and (b) permanently, if the copyright
holder fails to notify you of the violation by some reasonable means
prior to 60 days after the cessation.

  Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

  Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

  9. Acceptance Not Required for Having Copies.

  You are not required to accept this License in order to receive or
run a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

  10. Automatic Licensing of Downstream Recipients.

  Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

  An "entity transaction" is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

  You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

  11. Patents.

  A "contributor" is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's "contributor version".

  A contributor's "essential patent claims" are all patent claims
owned or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, "control" includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

  Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

  In the following three paragraphs, a "patent license" is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To "grant" such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

  If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  "Knowingly relying" means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

  If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

  A patent license is "discriminatory" if it does not include within
the scope of its coverage, prohibits the exercise of, or is
conditioned on the non-exercise of one or more of the rights that are
specifically granted under this License.  You may not convey a covered
work if you are a party to an arrangement with a third party that is
in the business of distributing software, under which you make payment
to the third party based on the extent of your activity of conveying
the work, and under which the third party grants, to any of the
parties who would receive the covered work from you, a discriminatory
patent license (a) in connection with copies of the covered work
conveyed by you (or copies made from those copies), or (b) primarily
for and in connection with specific products or compilations that
contain the covered work, unless you entered into that arrangement,
or that patent license was granted, prior to 28 March 2007.

  Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

  12. No Surrender of Others' Freedom.

  If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey a
covered work so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you may
not convey it at all.  For example, if you agree to terms that obligate you
to collect a royalty for further conveying from those to whom you convey
the Program, the only way you could satisfy both those terms and this
License would be to refrain entirely from conveying the Program.

  13. Remote Network Interaction; Use with the GNU General Public License.

  Notwithstanding any other provision of this License, if you modify the
Program, your modified version must prominently offer all users
interacting with it remotely through a computer network (if your version
supports such interaction) an opportunity to receive the Corresponding
Source of your version by providing access to the Corresponding Source
from a network server at no charge, through some standard or customary
means of facilitating copying of software.  This Corresponding Source
shall include the Corresponding Source for any work covered by version 3
of the GNU General Public License that is incorporated pursuant to the
following paragraph.

  Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the work with which it is combined will remain governed by version
3 of the GNU General Public License.

  14. Revised Versions of this License.

  The Free Software Foundation may publish revised and/or new versions of
the GNU Affero General Public License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

  Each version is given a distinguishing version number.  If the
Program specifies that a certain numbered version of the GNU Affero General
Public License "or any later version" applies to it, you have the
option of following the terms and conditions either of that numbered
version or of any later version published by the Free Software
Foundation.  If the Program does not specify a version number of the
GNU Affero General Public License, you may choose any version ever published
by the Free Software Foundation.

  If the Program specifies that a proxy can decide which future
versions of the GNU Affero General Public License can be used, that proxy's
public statement of acceptance of a version permanently authorizes you
to choose that version for the Program.

  Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

  15. Disclaimer of Warranty.

  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY
OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM
IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF
ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

  16. Limitation of Liability.

  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS
THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
SUCH DAMAGES.

  17. Interpretation of Sections 15 and 16.

  If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

                     END OF TERMS AND CONDITIONS

            How to Apply These Terms to Your New Programs

  If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

  To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the "copyright" line and a pointer to where the full notice is found.

    <one line to give the program's name and a brief idea of what it does.>
    Copyright (C) <year>  <name of author>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

Also add information on how to contact you by electronic and paper mail.

  If your software can interact with users remotely through a computer
network, you should also make sure that it provides a way for users to
get its source.  For example, if your program is a web application, its
interface could display a "Source" link that leads users to an archive
of the code.  There are many ways you could offer source, and different
solutions will be better for different programs; see section 13 for the
specific requirements.

  You should also get your employer (if you work as a programmer) or school,
if any, to sign a "copyright disclaimer" for the program, if necessary.
For more information on this, and how to apply and follow the GNU AGPL, see
<https://www.gnu.org/licenses/>.
</file>

<file path="postcss.config.ts">
export default {
    plugins: {
        "@tailwindcss/postcss": {},
        autoprefixer: {},
    },
};
</file>

<file path="tailwind.config.ts">
import type { Config } from "tailwindcss";
import { fontFamily } from "tailwindcss/defaultTheme";
import tailwindcssAnimate from "tailwindcss-animate";

const config: Config = {
    darkMode: ["class"],
    content: [
        "./index.html",
        "./src/**/*.{js,ts,jsx,tsx}",
        "./components/**/*.{js,ts,jsx,tsx}",
    ],
    theme: {
        extend: {
            fontFamily: {
                sans: ["var(--font-geist-sans)", ...fontFamily.sans],
                mono: ["var(--font-geist-mono)", ...fontFamily.mono],
            },
            colors: {
                border: "hsl(var(--border))",
                input: "hsl(var(--input))",
                ring: "hsl(var(--ring))",
                background: "hsl(var(--background))",
                foreground: "hsl(var(--foreground))",
                primary: {
                    DEFAULT: "hsl(var(--primary))",
                    foreground: "hsl(var(--primary-foreground))",
                },
                secondary: {
                    DEFAULT: "hsl(var(--secondary))",
                    foreground: "hsl(var(--secondary-foreground))",
                },
                destructive: {
                    DEFAULT: "hsl(var(--destructive) / <alpha-value>)",
                    foreground: "hsl(var(--destructive-foreground) / <alpha-value>)",
                },
                muted: {
                    DEFAULT: "hsl(var(--muted))",
                    foreground: "hsl(var(--muted-foreground))",
                },
                accent: {
                    DEFAULT: "hsl(var(--accent))",
                    foreground: "hsl(var(--accent-foreground))",
                },
                popover: {
                    DEFAULT: "hsl(var(--popover))",
                    foreground: "hsl(var(--popover-foreground))",
                },
                card: {
                    DEFAULT: "hsl(var(--card))",
                    foreground: "hsl(var(--card-foreground))",
                },
                sidebar: {
                    DEFAULT: "hsl(var(--sidebar-background))",
                    foreground: "hsl(var(--sidebar-foreground))",
                    primary: "hsl(var(--sidebar-primary))",
                    "primary-foreground": "hsl(var(--sidebar-primary-foreground))",
                    accent: "hsl(var(--sidebar-accent))",
                    "accent-foreground": "hsl(var(--sidebar-accent-foreground))",
                    border: "hsl(var(--sidebar-border))",
                    ring: "hsl(var(--sidebar-ring))",
                },
            },
            borderRadius: {
                xl: "calc(var(--radius) + 4px)",
                lg: "var(--radius)",
                md: "calc(var(--radius) - 2px)",
                sm: "calc(var(--radius) - 4px)",
            },
            keyframes: {
                "accordion-down": {
                    from: { height: "0" },
                    to: { height: "var(--radix-accordion-content-height)" },
                },
                "accordion-up": {
                    from: { height: "var(--radix-accordion-content-height)" },
                    to: { height: "0" },
                },
                "caret-blink": {
                    "0%,70%,100%": { opacity: "1" },
                    "20%,50%": { opacity: "0" },
                },
            },
            animation: {
                "accordion-down": "accordion-down 0.2s ease-out",
                "accordion-up": "accordion-up 0.2s ease-out",
                "caret-blink": "caret-blink 1.25s ease-out infinite",
            },
        },
    },
    plugins: [tailwindcssAnimate],
};

export default config;
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": [
      // "ES2020",
      "DOM",
      "ES2015",
      "ES2015.Iterable",
      "ES2015.Symbol"
    ],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "isolatedModules": true,
    "moduleDetection": "force",
    "declaration": true,
    "declarationMap": true,
    "emitDeclarationOnly": true,
    "outDir": "./dist",
    "jsx": "react-jsx",
    // "composite": true,
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true,
    "baseUrl": "./src",
    "paths": {
      "@/*": [
        "*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": [
    "node_modules",
    "dist"
  ]
}
</file>

<file path="tsconfig.tsbuildinfo">
{
    "root": [
        "./src/app.tsx",
        "./src/main.tsx",
        "./src/vite-env.d.ts",
        "./src/components/ui/button.tsx",
        "./src/components/ui/card.tsx",
        "./src/components/ui/input.tsx",
        "./src/lib/utils.ts"
    ],
    "errors": true,
    "version": "5.7.2"
}
</file>

<file path="src/components/bookmark/BookmarkSearch.tsx">
/**
 * BookmarkSearch component.
 * Search input with expand/collapse toggle for bookmark filtering.
 */

import { ChevronDown, ChevronUp } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { t } from '@/hooks/use-i18n';

interface BookmarkSearchProps {
  query: string;
  onQueryChange: (query: string) => void;
  forceExpandAll: boolean;
  onToggleExpandAll: () => void;
  inputRef?: React.RefObject<HTMLInputElement | null>;
}

export function BookmarkSearch({
  query,
  onQueryChange,
  forceExpandAll,
  onToggleExpandAll,
  inputRef,
}: BookmarkSearchProps) {
  return (
    <div className="p-4 border-b shrink-0">
      <div className="flex items-center gap-2">
        <Input
          ref={inputRef}
          type="text"
          placeholder={t('searchPlaceholder')}
          value={query}
          onChange={(e) => onQueryChange(e.target.value)}
          className="w-full search-input"
        />
        {query && (
          <Button
            variant="outline"
            size="icon"
            className="shrink-0"
            onClick={onToggleExpandAll}
            title={forceExpandAll ? t('collapseAll') : t('expandAll')}
          >
            {forceExpandAll ? (
              <ChevronUp className="h-4 w-4" />
            ) : (
              <ChevronDown className="h-4 w-4" />
            )}
          </Button>
        )}
      </div>
    </div>
  );
}
</file>

<file path="src/components/bookmark/NewFolderInput.tsx">
/**
 * NewFolderInput component.
 * Inline input for creating a new folder.
 */

import { Folder } from 'lucide-react';
import { useEffect, useRef } from 'react';
import { Input } from '@/components/ui/input';
import { t } from '@/hooks/use-i18n';

interface NewFolderInputProps {
  value: string;
  onChange: (value: string) => void;
  onSubmit: () => void;
  onCancel: () => void;
}

export function NewFolderInput({ value, onChange, onSubmit, onCancel }: NewFolderInputProps) {
  const inputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    inputRef.current?.focus();
  }, []);

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (inputRef.current && !inputRef.current.contains(event.target as Node)) {
        if (!value.trim()) {
          onCancel();
        } else {
          onSubmit();
        }
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [value, onSubmit, onCancel]);

  return (
    <div
      className="flex items-center gap-2 py-1 px-2 hover:bg-accent rounded-md folder-item"
      onClick={(e) => e.stopPropagation()}
    >
      <Folder className="w-4 h-4 shrink-0 text-muted-foreground" />
      <div className="flex-1">
        <Input
          ref={inputRef}
          type="text"
          value={value}
          onChange={(e) => onChange(e.target.value)}
          placeholder={t('enterFolderName')}
          className="h-7 text-sm w-full search-input"
          onKeyDown={(e) => {
            if (e.key === 'Escape') {
              onCancel();
            }
            if (e.key === 'Enter') {
              onSubmit();
            }
          }}
        />
      </div>
    </div>
  );
}
</file>

<file path="src/components/page/BookmarksPage.tsx">
import { Folder } from 'lucide-react';
import { type ComponentType, useCallback, useEffect, useState } from 'react';
import { type Bookmark, columns, ItemTypeEnum } from '../ui/table/columns';
import { DataTable } from '../ui/table/data-table';

function getFaviconUrl(pageUrl: string) {
  const url = new URL(chrome.runtime.getURL('/_favicon/'));
  url.searchParams.set('pageUrl', pageUrl);
  url.searchParams.set('size', '16'); // You can adjust the size as needed
  return url.toString();
}

const Favicon: ComponentType<{ className?: string }> = ({ className }) => (
  <img src={className} alt="favicon" className="w-4 h-4" />
);

const formatDate = (timestamp?: number) => {
  if (!timestamp) return '';
  const date = new Date(timestamp);
  return date.toLocaleString();
};

const truncate = (text?: string, length = 50) => {
  if (!text) return '';
  return text.length > length ? text.slice(0, length) + '...' : text;
};

const processNode = (node: chrome.bookmarks.BookmarkTreeNode, parentId = 'Root'): Bookmark => {
  // A node is a folder if it has children, regardless of whether it has a URL
  const isFolder = node.children !== undefined;

  return {
    type: isFolder ? ItemTypeEnum.Folder : ItemTypeEnum.Link,
    id: node.id,
    parentId: parentId,
    index: node.index,
    title: truncate(node.title, 30),
    url: truncate(node.url, 50),
    dateAdded: formatDate(node.dateAdded),
    dateGroupModified: formatDate(node.dateGroupModified),
    unmodifiable: node.unmodifiable as 'managed',
  };
};

async function getTopLevelFolders(): Promise<Bookmark[]> {
  return new Promise((resolve) => {
    if (chrome && chrome.bookmarks) {
      chrome.bookmarks.getTree((nodes) => {
        // Filter out the root node and only process the actual top-level folders
        const topLevelFolders = nodes[0].children?.map((node) => processNode(node)) || [];
        resolve(topLevelFolders);
      });
    } else {
      resolve([]);
    }
  });
}

async function getFolderContents(folderId: string): Promise<Bookmark[]> {
  return new Promise((resolve) => {
    if (chrome && chrome.bookmarks) {
      chrome.bookmarks.getTree((nodes) => {
        // Find the target folder in the tree
        const findFolder = (
          nodes: chrome.bookmarks.BookmarkTreeNode[],
        ): chrome.bookmarks.BookmarkTreeNode | null => {
          for (const node of nodes) {
            if (node.id === folderId) {
              return node;
            }
            if (node.children) {
              const found = findFolder(node.children);
              if (found) return found;
            }
          }
          return null;
        };

        const targetFolder = findFolder(nodes);
        if (targetFolder && targetFolder.children) {
          const contents = targetFolder.children.map((node) => processNode(node, folderId));
          resolve(contents);
        } else {
          resolve([]);
        }
      });
    } else {
      resolve([]);
    }
  });
}

export const parentIdMap: Record<
  string,
  { value: string; label: string; icon: ComponentType<{ className?: string }> }
> = {};

export const useParentIdMap = () => {
  const [parentIdMapState, setParentIdMap] = useState(parentIdMap);

  useEffect(() => {
    if (chrome && chrome.bookmarks) {
      chrome.bookmarks.getTree((nodes) => {
        const map: Record<
          string,
          { value: string; label: string; icon: ComponentType<{ className?: string }> }
        > = {};

        const processNode = (node: chrome.bookmarks.BookmarkTreeNode, _parentId = 'Root') => {
          map[node.id] = {
            value: node.id,
            label: node.title || 'Untitled',
            icon: Folder, // Generate favicon
          };

          if (node.children) {
            node.children.forEach((child) => processNode(child, node.id));
          }
        };

        nodes.forEach((node) => processNode(node));
        setParentIdMap(map);
      });
    }
  }, []);

  return parentIdMapState;
};

export const urlMap: Record<
  string,
  { value: string; label: string; icon: ComponentType<{ className?: string }> }
> = {};

export const useUrlMap = () => {
  const [urlMapState, setUrlMap] = useState(urlMap);

  useEffect(() => {
    if (chrome && chrome.bookmarks) {
      chrome.bookmarks.getTree((nodes) => {
        const map: Record<
          string,
          { value: string; label: string; icon: ComponentType<{ className?: string }> }
        > = {};

        const processNode = (node: chrome.bookmarks.BookmarkTreeNode) => {
          if (node.children) {
            node.children.forEach((child) => processNode(child));
          } else if (node.url) {
            const domain = new URL(node.url).hostname.split('.').slice(-2).join('.');
            map[domain] = {
              value: domain,
              label: domain,
              icon: () => <Favicon className={getFaviconUrl(node.url || '')} />, // Generate favicon
            };
          }
        };

        nodes.forEach((node) => processNode(node));
        setUrlMap(map);
      });
    }
  }, []);

  return urlMapState;
};

export default function BookmarksPage() {
  const [currentFolder, setCurrentFolder] = useState<string | null>(null);
  const [data, setData] = useState<Bookmark[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Handle initial URL parameter
  useEffect(() => {
    const urlParams = new URLSearchParams(window.location.search);
    const folderId = urlParams.get('id');
    if (folderId) {
      setCurrentFolder(folderId);
    }
  }, []);

  const refreshCurrentFolder = useCallback(async () => {
    setIsLoading(true);
    setError(null);
    try {
      if (currentFolder) {
        const contents = await getFolderContents(currentFolder);
        setData(contents);
        // Update URL when folder changes
        const newUrl = new URL(window.location.href);
        newUrl.searchParams.set('id', currentFolder);
        window.history.pushState({}, '', newUrl.toString());
      } else {
        const folders = await getTopLevelFolders();
        setData(folders);
        // Remove id parameter when at root
        const newUrl = new URL(window.location.href);
        newUrl.searchParams.delete('id');
        window.history.pushState({}, '', newUrl.toString());
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to load bookmarks');
    } finally {
      setIsLoading(false);
    }
  }, [currentFolder]);

  useEffect(() => {
    refreshCurrentFolder();
  }, [refreshCurrentFolder]);

  useEffect(() => {
    const handleBookmarkMove = (event: CustomEvent) => {
      if (event.detail.parentId === currentFolder) {
        refreshCurrentFolder();
      }
    };

    window.addEventListener('bookmarkMoved', handleBookmarkMove as EventListener);
    return () => {
      window.removeEventListener('bookmarkMoved', handleBookmarkMove as EventListener);
    };
  }, [currentFolder, refreshCurrentFolder]);

  if (error) {
    return (
      <div className="flex h-[450px] w-full items-center justify-center">
        <div className="text-center">
          <h2 className="text-lg font-semibold text-destructive">Error</h2>
          <p className="text-sm text-muted-foreground">{error}</p>
        </div>
      </div>
    );
  }

  if (isLoading) {
    return (
      <div className="flex h-[450px] w-full items-center justify-center">
        <div className="text-center">
          <h2 className="text-lg font-semibold">Loading...</h2>
          <p className="text-sm text-muted-foreground">Please wait while we load your bookmarks</p>
        </div>
      </div>
    );
  }

  return (
    <div className="container mx-auto py-10">
      <DataTable
        columns={columns}
        data={data}
        rowClassName={(row: Bookmark) => {
          const baseClass = 'cursor-pointer hover:bg-muted/50';
          const folderClass =
            row.type === ItemTypeEnum.Folder ? 'bg-muted/50 hover:bg-muted/70' : '';
          return `${baseClass} ${folderClass}`;
        }}
        onRowClick={(row: Bookmark) => {
          if (row.type === ItemTypeEnum.Folder) {
            setCurrentFolder(row.id);
            // Update URL immediately when clicking a folder
            const newUrl = new URL(window.location.href);
            newUrl.searchParams.set('id', row.id);
            window.history.pushState({}, '', newUrl.toString());
          }
        }}
        currentFolderId={currentFolder || undefined}
      />
    </div>
  );
}
</file>

<file path="src/components/ui/table/columns.tsx">
import type { ColumnDef } from '@tanstack/react-table';
import { ArrowUpDown, Folder, Link, MoreHorizontal } from 'lucide-react';
import { type ComponentType, useEffect, useState } from 'react';
import type { DateRange } from 'react-day-picker';
import { useParentIdMap, useUrlMap } from '@/components/page/BookmarksPage';
import { Button } from '@/components/ui/button';
import { Checkbox } from '@/components/ui/checkbox';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { DataTableColumnHeader } from './data-table-column-header';
import { DataTableDateFilter } from './data-table-date-filter';
import { MoveBookmarkButtons } from './move-bookmark-buttons';

export enum ItemTypeEnum {
  Folder = 'folder',
  Link = 'link',
}

export const typeMap: Record<ItemTypeEnum, ItemType> = {
  [ItemTypeEnum.Folder]: { value: 'folder', label: 'Folder', icon: Folder },
  [ItemTypeEnum.Link]: { value: 'link', label: 'Link', icon: Link },
};

type ItemType = {
  value: string;
  label: string;
  icon: ComponentType<{ className?: string }>;
};

export type Bookmark = {
  type: ItemTypeEnum;
  id: string;
  parentId?: string;
  index?: number;
  title: string;
  url?: string;
  dateAdded?: string;
  dateGroupModified?: string;
  unmodifiable?: 'managed';
};

export const columns: ColumnDef<Bookmark>[] = [
  {
    id: 'select',
    header: ({ table }) => (
      <Checkbox
        checked={
          table.getIsAllPageRowsSelected() || (table.getIsSomePageRowsSelected() && 'indeterminate')
        }
        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}
        aria-label="Select all"
      />
    ),
    cell: ({ row }) => (
      <Checkbox
        checked={row.getIsSelected()}
        onCheckedChange={(value) => row.toggleSelected(!!value)}
        aria-label="Select row"
      />
    ),
    enableSorting: false,
    enableHiding: false,
  },
  {
    accessorKey: 'type',
    header: ({ column }) => <DataTableColumnHeader column={column} title="Type" />,
    cell: ({ row }) => {
      const types = Object.values(typeMap);
      const type = types.find((type) => type.value === row.getValue('type'));

      if (!type) {
        return null;
      }

      return (
        <div className="flex items-center">
          {type.icon && <type.icon className="mr-2 h-4 w-4 text-muted-foreground" />}
          <span>{type.label}</span>
        </div>
      );
    },
    filterFn: (row, id, value) => {
      return value.includes(row.getValue(id));
    },
  },
  {
    accessorKey: 'id',
    header: ({ column }) => (
      <Button variant="ghost" onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}>
        ID
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
  },
  {
    accessorKey: 'parentId',
    header: ({ column }) => <DataTableColumnHeader column={column} title="Parent ID" />,
    cell: ({ row }) => {
      const parentIdMap = useParentIdMap();
      const parentIds = Object.values(parentIdMap);
      const parentId = parentIds.find((parentId) => parentId.value === row.getValue('parentId'));

      if (!parentId) {
        return null;
      }

      return (
        <div className="flex items-center">
          {parentId.icon && <parentId.icon className="mr-2 h-4 w-4 text-muted-foreground" />}
          <span>{parentId.label}</span>
        </div>
      );
    },
    filterFn: (row, id, value) => {
      return value.includes(row.getValue(id));
    },
  },
  {
    accessorKey: 'url',
    header: ({ column }) => <DataTableColumnHeader column={column} title="URL" />,
    cell: ({ row }) => {
      const urlMap = useUrlMap();
      const urls = Object.values(urlMap);

      const rowUrl = row.getValue('url') as string;
      const matchedUrl = urls.find(({ value }) => rowUrl.includes(value));

      if (!matchedUrl) {
        return null;
      }

      return (
        <div className="flex items-center">
          {matchedUrl.icon && <matchedUrl.icon className="mr-2 h-4 w-4 text-muted-foreground" />}
          <span>{rowUrl}</span>
        </div>
      );
    },
    filterFn: (row, id, value) => {
      return value.includes(row.getValue(id));
    },
  },
  {
    accessorKey: 'title',
    header: ({ column }) => (
      <Button variant="ghost" onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}>
        Title
        <ArrowUpDown className="ml-2 h-4 w-4" />
      </Button>
    ),
    filterFn: (row, id, value) => {
      const title = row.getValue(id) as string;
      return title.toLowerCase().includes(value.toLowerCase());
    },
  },
  {
    accessorKey: 'dateAdded',
    header: ({ column }) => (
      <DataTableColumnHeader column={column} title="Date Added">
        <DataTableDateFilter
          title="Date Added"
          value={column.getFilterValue() as DateRange}
          onChange={(value) => column.setFilterValue(value)}
        />
      </DataTableColumnHeader>
    ),
    filterFn: (row, id, value: DateRange) => {
      const dateAdded = new Date(row.getValue(id));
      if (!value?.from && !value?.to) return true;
      if (value?.from && !value?.to) return dateAdded >= value.from;
      if (!value?.from && value?.to) return dateAdded <= value.to;
      if (value?.from && value?.to) return dateAdded >= value.from && dateAdded <= value.to;
      return true;
    },
    cell: ({ row }) => {
      const date = new Date(row.getValue('dateAdded'));
      return date.toLocaleString();
    },
  },
  {
    accessorKey: 'dateGroupModified',
    header: 'Date Group Modified',
  },
  {
    accessorKey: 'unmodifiable',
    header: 'Unmodifiable',
  },
  {
    id: 'actions',
    cell: ({ row }) => {
      const bookmark = row.original;
      const [, setSiblingCount] = useState<number | null>(null);

      useEffect(() => {
        const getSiblingCount = async () => {
          if (!chrome?.bookmarks || !bookmark.parentId) {
            setSiblingCount(null);
            return;
          }

          try {
            const parent = await new Promise<chrome.bookmarks.BookmarkTreeNode[]>(
              (resolve, reject) => {
                chrome.bookmarks.getChildren(bookmark.parentId!, (result) => {
                  if (chrome.runtime.lastError) {
                    reject(chrome.runtime.lastError);
                    return;
                  }
                  resolve(result);
                });
              },
            );
            setSiblingCount(parent.length);
          } catch (error) {
            console.error('Failed to get sibling count:', error);
            setSiblingCount(null);
          }
        };

        getSiblingCount();
      }, [bookmark.parentId]);

      const moveBookmark = async (direction: 'up' | 'down' | 'top' | 'bottom') => {
        if (!chrome?.bookmarks) {
          console.error('Chrome bookmarks API not available');
          return;
        }

        try {
          if (!bookmark.parentId || typeof bookmark.index !== 'number') {
            console.error('Missing parentId or index:', {
              parentId: bookmark.parentId,
              index: bookmark.index,
            });
            return;
          }

          // First, get the parent node to verify the operation and get current state
          const parent = await new Promise<chrome.bookmarks.BookmarkTreeNode[]>(
            (resolve, reject) => {
              chrome.bookmarks.getChildren(bookmark.parentId!, (result) => {
                if (chrome.runtime.lastError) {
                  reject(chrome.runtime.lastError);
                  return;
                }
                resolve(result);
              });
            },
          );

          // Find the current bookmark in the parent's children to get its actual index
          const currentBookmark = parent.find((b) => b.id === bookmark.id);
          if (!currentBookmark || typeof currentBookmark.index !== 'number') {
            console.error('Bookmark not found in parent or missing index:', bookmark.id);
            return;
          }

          const currentIndex = currentBookmark.index;
          let newIndex: number;

          switch (direction) {
            case 'up':
              newIndex = Math.max(0, currentIndex - 1);
              break;
            case 'down':
              newIndex = Math.min(parent.length - 1, currentIndex + 1);
              break;
            case 'top':
              newIndex = 0;
              break;
            case 'bottom':
              newIndex = parent.length;
              break;
          }

          console.log('Moving bookmark:', {
            id: bookmark.id,
            currentIndex,
            newIndex,
            parentId: bookmark.parentId,
            direction,
            totalItems: parent.length,
          });

          // Verify the move is valid
          if (direction === 'down' && currentIndex >= parent.length - 1) {
            console.log('Cannot move down: already at bottom');
            return;
          }

          // Perform the move
          await new Promise<chrome.bookmarks.BookmarkTreeNode>((resolve, reject) => {
            chrome.bookmarks.move(
              bookmark.id,
              {
                parentId: bookmark.parentId,
                index: direction === 'down' ? newIndex + 1 : newIndex,
              },
              (result) => {
                if (chrome.runtime.lastError) {
                  console.error('Move error:', chrome.runtime.lastError);
                  reject(chrome.runtime.lastError);
                  return;
                }
                console.log('Move operation completed:', result);
                resolve(result);
              },
            );
          });

          // Trigger a refresh of the current folder's contents
          const event = new CustomEvent('bookmarkMoved', {
            detail: { parentId: bookmark.parentId },
          });
          window.dispatchEvent(event);
        } catch (error) {
          console.error('Failed to move bookmark:', error);
        }
      };

      return (
        <div className="flex items-center space-x-2">
          <div className="opacity-0 group-hover:opacity-100 transition-opacity">
            <MoveBookmarkButtons onMove={moveBookmark} />
          </div>
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button variant="ghost" className="h-8 w-8 p-0">
                <span className="sr-only">Open menu</span>
                <MoreHorizontal className="h-4 w-4" />
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              <DropdownMenuLabel>Actions</DropdownMenuLabel>
              <DropdownMenuItem
                onClick={(e) => {
                  e.stopPropagation();
                  navigator.clipboard.writeText(bookmark.id);
                }}
              >
                Copy Bookmark ID
              </DropdownMenuItem>
              <DropdownMenuSeparator />
              <DropdownMenuItem>View Details</DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>
      );
    },
  },
];
</file>

<file path="src/components/ui/table/data-table-column-header.tsx">
import type { Column } from '@tanstack/react-table';
import { ArrowDown, ArrowUp, ChevronsUpDown, EyeOff } from 'lucide-react';

import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { cn } from '@/lib/utils';

interface DataTableColumnHeaderProps<TData, TValue> extends React.HTMLAttributes<HTMLDivElement> {
  column: Column<TData, TValue>;
  title: string;
}

export function DataTableColumnHeader<TData, TValue>({
  column,
  title,
  className,
}: DataTableColumnHeaderProps<TData, TValue>) {
  if (!column.getCanSort()) {
    return <div className={cn(className)}>{title}</div>;
  }

  return (
    <div className={cn('flex items-center space-x-2', className)}>
      <DropdownMenu>
        <DropdownMenuTrigger asChild>
          <Button variant="ghost" size="sm" className="-ml-3 h-8 data-[state=open]:bg-accent">
            <span>{title}</span>
            {column.getIsSorted() === 'desc' ? (
              <ArrowDown />
            ) : column.getIsSorted() === 'asc' ? (
              <ArrowUp />
            ) : (
              <ChevronsUpDown />
            )}
          </Button>
        </DropdownMenuTrigger>
        <DropdownMenuContent align="start">
          <DropdownMenuItem onClick={() => column.toggleSorting(false)}>
            <ArrowUp className="h-3.5 w-3.5 text-muted-foreground/70" />
            Asc
          </DropdownMenuItem>
          <DropdownMenuItem onClick={() => column.toggleSorting(true)}>
            <ArrowDown className="h-3.5 w-3.5 text-muted-foreground/70" />
            Desc
          </DropdownMenuItem>
          <DropdownMenuSeparator />
          <DropdownMenuItem onClick={() => column.toggleVisibility(false)}>
            <EyeOff className="h-3.5 w-3.5 text-muted-foreground/70" />
            Hide
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </div>
  );
}
</file>

<file path="src/components/ui/table/data-table-date-filter.tsx">
import { format } from 'date-fns';
import { Calendar as CalendarIcon } from 'lucide-react';
import type { DateRange } from 'react-day-picker';
import { Button } from '@/components/ui/button';
import { Calendar } from '@/components/ui/calendar';
import { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';
import { cn } from '@/lib/utils';

interface DataTableDateFilterProps {
  title: string;
  value: DateRange | undefined;
  onChange: (value: DateRange | undefined) => void;
}

export function DataTableDateFilter({ title, value, onChange }: DataTableDateFilterProps) {
  return (
    <div className="grid gap-2">
      <Popover>
        <PopoverTrigger asChild>
          <Button
            id="date"
            variant={'outline'}
            className={cn(
              'w-[300px] justify-start text-left font-normal',
              !value && 'text-muted-foreground',
            )}
          >
            <CalendarIcon className="mr-2 h-4 w-4" />
            {value?.from ? (
              value.to ? (
                <>
                  {format(value.from, 'LLL dd, y')} - {format(value.to, 'LLL dd, y')}
                </>
              ) : (
                format(value.from, 'LLL dd, y')
              )
            ) : (
              <span>{title}</span>
            )}
          </Button>
        </PopoverTrigger>
        <PopoverContent className="w-auto p-0" align="start">
          <Calendar
            initialFocus
            mode="range"
            defaultMonth={value?.from}
            selected={value}
            onSelect={onChange}
            numberOfMonths={2}
          />
        </PopoverContent>
      </Popover>
    </div>
  );
}
</file>

<file path="src/components/ui/table/data-table-faceted-filter.tsx">
import type { Column } from '@tanstack/react-table';
import { Check, PlusCircle } from 'lucide-react';
import type * as React from 'react';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import {
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  CommandList,
  CommandSeparator,
} from '@/components/ui/command';
import { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';
import { Separator } from '@/components/ui/separator';
import { cn } from '@/lib/utils';

interface DataTableFacetedFilterProps<TData, TValue> {
  column?: Column<TData, TValue>;
  title?: string;
  options: {
    label: string;
    value: string;
    icon?: React.ComponentType<{ className?: string }>;
  }[];
}

export function DataTableFacetedFilter<TData, TValue>({
  column,
  title,
  options,
}: DataTableFacetedFilterProps<TData, TValue>) {
  const facets = column?.getFacetedUniqueValues();
  const selectedValues = new Set(column?.getFilterValue() as string[]);

  return (
    <div className="grid gap-2">
      <Popover>
        <PopoverTrigger asChild>
          <Button variant="outline" size="sm" className="h-8 border-dashed">
            <PlusCircle />
            {title}
            {selectedValues?.size > 0 && (
              <>
                <Separator orientation="vertical" className="mx-2 h-4" />
                <Badge variant="secondary" className="rounded-sm px-1 font-normal lg:hidden">
                  {selectedValues.size}
                </Badge>
                <div className="hidden space-x-1 lg:flex">
                  {selectedValues.size > 2 ? (
                    <Badge variant="secondary" className="rounded-sm px-1 font-normal">
                      {selectedValues.size} selected
                    </Badge>
                  ) : (
                    options
                      .filter((option) => selectedValues.has(option.value))
                      .map((option) => (
                        <Badge
                          variant="secondary"
                          key={option.value}
                          className="rounded-sm px-1 font-normal"
                        >
                          {option.label}
                        </Badge>
                      ))
                  )}
                </div>
              </>
            )}
          </Button>
        </PopoverTrigger>
        <PopoverContent className="w-[200px] p-0" align="start">
          <Command>
            <CommandInput placeholder={title} />
            <CommandList>
              <CommandEmpty>No results found.</CommandEmpty>
              <CommandGroup>
                {options.map((option) => {
                  const isSelected = selectedValues.has(option.value);
                  return (
                    <CommandItem
                      key={option.value}
                      onSelect={() => {
                        if (isSelected) {
                          selectedValues.delete(option.value);
                        } else {
                          selectedValues.add(option.value);
                        }
                        const filterValues = Array.from(selectedValues);
                        column?.setFilterValue(filterValues.length ? filterValues : undefined);
                      }}
                    >
                      <div
                        className={cn(
                          'mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary',
                          isSelected
                            ? 'bg-primary text-primary-foreground'
                            : 'opacity-50 [&_svg]:invisible',
                        )}
                      >
                        <Check />
                      </div>
                      {option.icon && (
                        <option.icon className="mr-2 h-4 w-4 text-muted-foreground" />
                      )}
                      <span>{option.label}</span>
                      {facets?.get(option.value) && (
                        <span className="ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs">
                          {facets.get(option.value)}
                        </span>
                      )}
                    </CommandItem>
                  );
                })}
              </CommandGroup>
              {selectedValues.size > 0 && (
                <>
                  <CommandSeparator />
                  <CommandGroup>
                    <CommandItem
                      onSelect={() => column?.setFilterValue(undefined)}
                      className="justify-center text-center"
                    >
                      Clear filters
                    </CommandItem>
                  </CommandGroup>
                </>
              )}
            </CommandList>
          </Command>
        </PopoverContent>
      </Popover>
    </div>
  );
}
</file>

<file path="src/components/ui/table/data-table-pagination.tsx">
import type { Table } from '@tanstack/react-table';
import { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from 'lucide-react';

import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Button } from '../button';

interface DataTablePaginationProps<TData> {
  table: Table<TData>;
}

export function DataTablePagination<TData>({ table }: DataTablePaginationProps<TData>) {
  return (
    <div className="flex items-center justify-between px-2">
      <div className="flex-1 text-sm text-muted-foreground">
        {table.getFilteredSelectedRowModel().rows.length} of{' '}
        {table.getFilteredRowModel().rows.length} row(s) selected.
      </div>
      <div className="flex items-center space-x-6 lg:space-x-8">
        <div className="flex items-center space-x-2">
          <p className="text-sm font-medium">Rows per page</p>
          <Select
            value={`${table.getState().pagination.pageSize}`}
            onValueChange={(value) => {
              table.setPageSize(Number(value));
            }}
          >
            <SelectTrigger className="h-8 w-[70px]">
              <SelectValue placeholder={table.getState().pagination.pageSize} />
            </SelectTrigger>
            <SelectContent side="top">
              {[10, 20, 30, 40, 50].map((pageSize) => (
                <SelectItem key={pageSize} value={`${pageSize}`}>
                  {pageSize}
                </SelectItem>
              ))}
            </SelectContent>
          </Select>
        </div>
        <div className="flex w-[100px] items-center justify-center text-sm font-medium">
          Page {table.getState().pagination.pageIndex + 1} of {table.getPageCount()}
        </div>
        <div className="flex items-center space-x-2">
          <Button
            variant="outline"
            className="hidden h-8 w-8 p-0 lg:flex"
            onClick={() => table.setPageIndex(0)}
            disabled={!table.getCanPreviousPage()}
          >
            <span className="sr-only">Go to first page</span>
            <ChevronsLeft />
          </Button>
          <Button
            variant="outline"
            className="h-8 w-8 p-0"
            onClick={() => table.previousPage()}
            disabled={!table.getCanPreviousPage()}
          >
            <span className="sr-only">Go to previous page</span>
            <ChevronLeft />
          </Button>
          <Button
            variant="outline"
            className="h-8 w-8 p-0"
            onClick={() => table.nextPage()}
            disabled={!table.getCanNextPage()}
          >
            <span className="sr-only">Go to next page</span>
            <ChevronRight />
          </Button>
          <Button
            variant="outline"
            className="hidden h-8 w-8 p-0 lg:flex"
            onClick={() => table.setPageIndex(table.getPageCount() - 1)}
            disabled={!table.getCanNextPage()}
          >
            <span className="sr-only">Go to last page</span>
            <ChevronsRight />
          </Button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/ui/table/data-table-toolbar.tsx">
import type { Table } from '@tanstack/react-table';
import { X } from 'lucide-react';
import { useEffect, useState } from 'react';
import type { DateRange } from 'react-day-picker';
import { useParentIdMap, useUrlMap } from '@/components/page/BookmarksPage';
import { Button } from '@/components/ui/button';
import { Checkbox } from '@/components/ui/checkbox';
import { Input } from '@/components/ui/input';
import { typeMap } from './columns';
import { DataTableDateFilter } from './data-table-date-filter';
import { DataTableFacetedFilter } from './data-table-faceted-filter';
import { DataTableViewOptions } from './data-table-view-options';

interface DataTableToolbarProps<TData> {
  table: Table<TData>;
  currentFolderId?: string;
}

export function DataTableToolbar<TData>({ table, currentFolderId }: DataTableToolbarProps<TData>) {
  const isFiltered = table.getState().columnFilters.length > 0;
  const [applyToCurrentFolder, setApplyToCurrentFolder] = useState(false);

  const handleApplyToCurrentFolderChange = (checked: boolean | 'indeterminate') => {
    setApplyToCurrentFolder(checked === true);
  };

  // Update table state when applyToCurrentFolder changes
  useEffect(() => {
    if (applyToCurrentFolder) {
      table.setColumnFilters((prev) => [
        ...prev.filter((f) => f.id !== 'applyToCurrentFolder'),
        { id: 'applyToCurrentFolder', value: true },
        { id: 'currentFolderId', value: currentFolderId },
      ]);
    } else {
      table.setColumnFilters((prev) =>
        prev.filter((f) => f.id !== 'applyToCurrentFolder' && f.id !== 'currentFolderId'),
      );
    }
  }, [applyToCurrentFolder, currentFolderId, table]);

  return (
    <div className="flex items-center justify-between">
      <div className="flex flex-1 items-center space-x-2">
        <div className="grid gap-2">
          <Input
            placeholder="Filter titles..."
            value={(table.getColumn('title')?.getFilterValue() as string) ?? ''}
            onChange={(event) => table.getColumn('title')?.setFilterValue(event.target.value)}
            className="max-w-sm"
          />
          <div className="items-top flex space-x-2">
            <Checkbox
              id="applyToCurrentFolder"
              checked={applyToCurrentFolder}
              onCheckedChange={handleApplyToCurrentFolderChange}
            />
            <div className="grid gap-1.5 leading-none">
              <label
                htmlFor="applyToCurrentFolder"
                className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
              >
                Apply to current folder only
              </label>
              <p className="text-sm text-muted-foreground">
                If unchecked, filter will be applied to all bookmarks
              </p>
            </div>
          </div>
        </div>
        {table.getColumn('type') && (
          <DataTableFacetedFilter
            column={table.getColumn('type')}
            title="Type"
            options={Object.values(typeMap)}
          />
        )}
        {table.getColumn('parentId') && (
          <DataTableFacetedFilter
            column={table.getColumn('parentId')}
            title="Parent ID"
            options={Object.values(useParentIdMap())}
          />
        )}
        {table.getColumn('url') && (
          <DataTableFacetedFilter
            column={table.getColumn('url')}
            title="URL"
            options={Object.values(useUrlMap())}
          />
        )}
        {table.getColumn('url') && (
          <Input
            placeholder="Filter URLs..."
            value={(table.getColumn('url')?.getFilterValue() as string) ?? ''}
            onChange={(event) => table.getColumn('url')?.setFilterValue(event.target.value)}
            className="max-w-sm"
          />
        )}
        {table.getColumn('dateAdded') && (
          <DataTableDateFilter
            title="Date Added"
            value={table.getColumn('dateAdded')?.getFilterValue() as DateRange}
            onChange={(value) => table.getColumn('dateAdded')?.setFilterValue(value)}
          />
        )}
        {isFiltered && (
          <Button
            variant="ghost"
            onClick={() => {
              table.resetColumnFilters();
              setApplyToCurrentFolder(false);
            }}
            className="h-8 px-2 lg:px-3"
          >
            Reset
            <X className="ml-2 h-4 w-4" />
          </Button>
        )}
      </div>
      <DataTableViewOptions table={table} />
    </div>
  );
}
</file>

<file path="src/components/ui/table/data-table-view-options.tsx">
'use client';

import { DropdownMenuTrigger } from '@radix-ui/react-dropdown-menu';
import type { Table } from '@tanstack/react-table';
import { Settings2 } from 'lucide-react';

import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuCheckboxItem,
  DropdownMenuContent,
  DropdownMenuLabel,
  DropdownMenuSeparator,
} from '@/components/ui/dropdown-menu';

interface DataTableViewOptionsProps<TData> {
  table: Table<TData>;
}

export function DataTableViewOptions<TData>({ table }: DataTableViewOptionsProps<TData>) {
  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="outline" size="sm" className="ml-auto hidden h-8 lg:flex">
          <Settings2 />
          View
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end" className="w-[150px]">
        <DropdownMenuLabel>Toggle columns</DropdownMenuLabel>
        <DropdownMenuSeparator />
        {table
          .getAllColumns()
          .filter((column) => typeof column.accessorFn !== 'undefined' && column.getCanHide())
          .map((column) => {
            return (
              <DropdownMenuCheckboxItem
                key={column.id}
                className="capitalize"
                checked={column.getIsVisible()}
                onCheckedChange={(value) => column.toggleVisibility(!!value)}
              >
                {column.id}
              </DropdownMenuCheckboxItem>
            );
          })}
      </DropdownMenuContent>
    </DropdownMenu>
  );
}
</file>

<file path="src/components/ui/table/data-table.tsx">
'use client';

import {
  type ColumnDef,
  type ColumnFiltersState,
  flexRender,
  getCoreRowModel,
  getFilteredRowModel,
  getPaginationRowModel,
  getSortedRowModel,
  type SortingState,
  useReactTable,
  type VisibilityState,
} from '@tanstack/react-table';
import * as React from 'react';

import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';

import { DataTableToolbar } from '@/components/ui/table/data-table-toolbar';
import { DataTablePagination } from './data-table-pagination';

interface DataTableProps<TData, TValue> {
  columns: ColumnDef<TData, TValue>[];
  data: TData[];
  onRowClick?: (row: TData) => void;
  rowClassName?: (row: TData) => string;
  currentFolderId?: string;
}

export function DataTable<TData, TValue>({
  columns,
  data,
  onRowClick,
  rowClassName,
  currentFolderId,
}: DataTableProps<TData, TValue>) {
  const [sorting, setSorting] = React.useState<SortingState>([]);
  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([]);
  const [columnVisibility, setColumnVisibility] = React.useState<VisibilityState>({});
  const [rowSelection, setRowSelection] = React.useState({});

  const table = useReactTable({
    data,
    columns,
    onSortingChange: setSorting,
    onColumnFiltersChange: setColumnFilters,
    getCoreRowModel: getCoreRowModel(),
    getPaginationRowModel: getPaginationRowModel(),
    getSortedRowModel: getSortedRowModel(),
    getFilteredRowModel: getFilteredRowModel(),
    onColumnVisibilityChange: setColumnVisibility,
    onRowSelectionChange: setRowSelection,
    state: {
      sorting,
      columnFilters,
      columnVisibility,
      rowSelection,
    },
  });

  return (
    <div className="space-y-4">
      <DataTableToolbar table={table} currentFolderId={currentFolderId} />
      <div className="rounded-md border">
        <Table>
          <TableHeader>
            {table.getHeaderGroups().map((headerGroup) => (
              <TableRow key={headerGroup.id}>
                {headerGroup.headers.map((header) => (
                  <TableHead key={header.id}>
                    {header.isPlaceholder
                      ? null
                      : flexRender(header.column.columnDef.header, header.getContext())}
                  </TableHead>
                ))}
              </TableRow>
            ))}
          </TableHeader>
          <TableBody>
            {table.getRowModel().rows?.length ? (
              table.getRowModel().rows.map((row) => (
                <TableRow
                  key={row.id}
                  data-state={row.getIsSelected() && 'selected'}
                  className={rowClassName?.(row.original)}
                  onClick={() => onRowClick?.(row.original)}
                >
                  {row.getVisibleCells().map((cell) => (
                    <TableCell key={cell.id}>
                      {flexRender(cell.column.columnDef.cell, cell.getContext())}
                    </TableCell>
                  ))}
                </TableRow>
              ))
            ) : (
              <TableRow>
                <TableCell colSpan={columns.length} className="h-24 text-center">
                  No results.
                </TableCell>
              </TableRow>
            )}
          </TableBody>
        </Table>
      </div>
      <DataTablePagination table={table} />
    </div>
  );
}
</file>

<file path="src/components/ui/table/move-bookmark-buttons.tsx">
import { ChevronDown, ChevronsDown, ChevronsUp, ChevronUp, type LucideIcon } from 'lucide-react';
import { Button } from '@/components/ui/button';

interface MoveBookmarkButtonsProps {
  onMove: (direction: 'up' | 'down' | 'top' | 'bottom') => void;
}

type MoveButtonConfig = {
  direction: 'up' | 'down' | 'top' | 'bottom';
  icon: LucideIcon;
};

const moveButtons: MoveButtonConfig[] = [
  { direction: 'top', icon: ChevronsUp },
  { direction: 'up', icon: ChevronUp },
  { direction: 'down', icon: ChevronDown },
  { direction: 'bottom', icon: ChevronsDown },
];

export function MoveBookmarkButtons({ onMove }: MoveBookmarkButtonsProps) {
  return (
    <div className="flex items-center space-x-1">
      {moveButtons.map(({ direction, icon: Icon }) => (
        <Button
          key={direction}
          variant="outline"
          size="icon"
          className="h-8 w-8 p-0"
          onClick={(e) => {
            e.stopPropagation();
            onMove(direction);
          }}
        >
          <Icon className="h-4 w-4" />
        </Button>
      ))}
    </div>
  );
}
</file>

<file path="src/components/ui/accordion.tsx">
import * as AccordionPrimitive from '@radix-ui/react-accordion';
import { ChevronDown } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Accordion = AccordionPrimitive.Root;

const AccordionItem = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>
>(({ className, ...props }, ref) => (
  <AccordionPrimitive.Item ref={ref} className={cn('border-b', className)} {...props} />
));
AccordionItem.displayName = 'AccordionItem';

const AccordionTrigger = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Header className="flex">
    <AccordionPrimitive.Trigger
      ref={ref}
      className={cn(
        'group/trigger flex w-full items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180',
        className,
      )}
      {...props}
    >
      <div className="flex-1 min-w-0 overflow-hidden">{children}</div>
      <div className="flex-shrink-0 ml-2 w-4 flex justify-center">
        <ChevronDown className="h-4 w-4 text-muted-foreground transition-transform duration-200" />
      </div>
    </AccordionPrimitive.Trigger>
  </AccordionPrimitive.Header>
));
AccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName;

const AccordionContent = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>
>(({ className, children, ...props }, ref) => {
  const hasContent = React.Children.count(children) > 0;

  if (!hasContent) {
    return null;
  }

  return (
    <AccordionPrimitive.Content
      ref={ref}
      className={cn(
        'overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down',
      )}
      {...props}
    >
      <div className={cn('pb-4 pt-0', className)}>{children}</div>
    </AccordionPrimitive.Content>
  );
});
AccordionContent.displayName = AccordionPrimitive.Content.displayName;

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent };
</file>

<file path="src/components/ui/badge.tsx">
import { cva, type VariantProps } from 'class-variance-authority';
import type * as React from 'react';

import { cn } from '@/lib/utils';

const badgeVariants = cva(
  'inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',
  {
    variants: {
      variant: {
        default: 'border-transparent bg-primary text-primary-foreground hover:bg-primary/80',
        secondary:
          'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',
        destructive:
          'border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80',
        outline: 'text-foreground',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
);

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;
}

export { Badge, badgeVariants };
</file>

<file path="src/components/ui/button.tsx">
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import * as React from 'react';

import { cn } from '@/lib/utils';

const buttonVariants = cva(
  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',
  {
    variants: {
      variant: {
        default: 'bg-primary text-primary-foreground hover:bg-primary/90',
        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',
        outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',
        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',
        ghost: 'hover:bg-accent hover:text-accent-foreground',
        link: 'text-primary underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 rounded-md px-3',
        lg: 'h-11 rounded-md px-8',
        icon: 'h-10 w-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : 'button';
    return (
      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />
    );
  },
);
Button.displayName = 'Button';

export { Button, buttonVariants };
</file>

<file path="src/components/ui/calendar.tsx">
import type * as React from 'react';
import { DayPicker } from 'react-day-picker';
import { buttonVariants } from '@/components/ui/button';
import { cn } from '@/lib/utils';

export type CalendarProps = React.ComponentProps<typeof DayPicker>;

function Calendar({ className, classNames, showOutsideDays = true, ...props }: CalendarProps) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn('p-3', className)}
      classNames={{
        months: 'flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0',
        month: 'space-y-4',
        caption: 'flex justify-center pt-1 relative items-center',
        caption_label: 'text-sm font-medium',
        nav: 'space-x-1 flex items-center',
        nav_button: cn(
          buttonVariants({ variant: 'outline' }),
          'h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100',
        ),
        nav_button_previous: 'absolute left-1',
        nav_button_next: 'absolute right-1',
        table: 'w-full border-collapse space-y-1',
        head_row: 'flex',
        head_cell: 'text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]',
        row: 'flex w-full mt-2',
        cell: 'text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20',
        day: cn(
          buttonVariants({ variant: 'ghost' }),
          'h-8 w-8 p-0 font-normal aria-selected:opacity-100',
        ),
        day_selected:
          'bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground',
        day_today: 'bg-accent text-accent-foreground',
        day_outside: 'text-muted-foreground opacity-50',
        day_disabled: 'text-muted-foreground opacity-50',
        day_range_start: 'bg-primary text-primary-foreground rounded-l-md',
        day_range_end: 'bg-primary text-primary-foreground rounded-r-md',
        day_range_middle: 'bg-accent/50',
        day_hidden: 'invisible',
        ...classNames,
      }}
      {...props}
    />
  );
}
Calendar.displayName = 'Calendar';

export { Calendar };
</file>

<file path="src/components/ui/card.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

const Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn('rounded-lg border bg-card text-card-foreground shadow-sm', className)}
      {...props}
    />
  ),
);
Card.displayName = 'Card';

const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn('flex flex-col space-y-1.5 p-6', className)} {...props} />
  ),
);
CardHeader.displayName = 'CardHeader';

const CardTitle = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn('text-2xl font-semibold leading-none tracking-tight', className)}
      {...props}
    />
  ),
);
CardTitle.displayName = 'CardTitle';

const CardDescription = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />
  ),
);
CardDescription.displayName = 'CardDescription';

const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />
  ),
);
CardContent.displayName = 'CardContent';

const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn('flex items-center p-6 pt-0', className)} {...props} />
  ),
);
CardFooter.displayName = 'CardFooter';

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
</file>

<file path="src/components/ui/checkbox.tsx">
import * as CheckboxPrimitive from '@radix-ui/react-checkbox';
import { Check } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  <CheckboxPrimitive.Root
    ref={ref}
    className={cn(
      'peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground',
      className,
    )}
    {...props}
  >
    <CheckboxPrimitive.Indicator className={cn('flex items-center justify-center text-current')}>
      <Check className="h-4 w-4" />
    </CheckboxPrimitive.Indicator>
  </CheckboxPrimitive.Root>
));
Checkbox.displayName = CheckboxPrimitive.Root.displayName;

export { Checkbox };
</file>

<file path="src/components/ui/collapsible.tsx">
import * as CollapsiblePrimitive from '@radix-ui/react-collapsible';

const Collapsible = CollapsiblePrimitive.Root;

const CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger;

const CollapsibleContent = CollapsiblePrimitive.CollapsibleContent;

export { Collapsible, CollapsibleTrigger, CollapsibleContent };
</file>

<file path="src/components/ui/command.tsx">
import type { DialogProps } from '@radix-ui/react-dialog';
import { Command as CommandPrimitive } from 'cmdk';
import { Search } from 'lucide-react';
import * as React from 'react';
import { Dialog, DialogContent } from '@/components/ui/dialog';
import { cn } from '@/lib/utils';

const Command = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive>
>(({ className, ...props }, ref) => (
  <CommandPrimitive
    ref={ref}
    className={cn(
      'flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground',
      className,
    )}
    {...props}
  />
));
Command.displayName = CommandPrimitive.displayName;

const CommandDialog = ({ children, ...props }: DialogProps) => {
  return (
    <Dialog {...props}>
      <DialogContent className="overflow-hidden p-0 shadow-lg">
        <Command className="[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
};

const CommandInput = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Input>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>
>(({ className, ...props }, ref) => (
  <div className="flex items-center border-b px-3" cmdk-input-wrapper="">
    <Search className="mr-2 h-4 w-4 shrink-0 opacity-50" />
    <CommandPrimitive.Input
      ref={ref}
      className={cn(
        'flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50',
        className,
      )}
      {...props}
    />
  </div>
));

CommandInput.displayName = CommandPrimitive.Input.displayName;

const CommandList = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.List
    ref={ref}
    className={cn('max-h-[300px] overflow-y-auto overflow-x-hidden', className)}
    {...props}
  />
));

CommandList.displayName = CommandPrimitive.List.displayName;

const CommandEmpty = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Empty>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>
>((props, ref) => (
  <CommandPrimitive.Empty ref={ref} className="py-6 text-center text-sm" {...props} />
));

CommandEmpty.displayName = CommandPrimitive.Empty.displayName;

const CommandGroup = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Group>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Group
    ref={ref}
    className={cn(
      'overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground',
      className,
    )}
    {...props}
  />
));

CommandGroup.displayName = CommandPrimitive.Group.displayName;

const CommandSeparator = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Separator
    ref={ref}
    className={cn('-mx-1 h-px bg-border', className)}
    {...props}
  />
));
CommandSeparator.displayName = CommandPrimitive.Separator.displayName;

const CommandItem = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      className,
    )}
    {...props}
  />
));

CommandItem.displayName = CommandPrimitive.Item.displayName;

const CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn('ml-auto text-xs tracking-widest text-muted-foreground', className)}
      {...props}
    />
  );
};
CommandShortcut.displayName = 'CommandShortcut';

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
};
</file>

<file path="src/components/ui/dialog.tsx">
'use client';

import * as DialogPrimitive from '@radix-ui/react-dialog';
import { X } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Dialog = DialogPrimitive.Root;

const DialogTrigger = DialogPrimitive.Trigger;

const DialogPortal = DialogPrimitive.Portal;

const DialogClose = DialogPrimitive.Close;

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      'fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',
      className,
    )}
    {...props}
  />
));
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',
        className,
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
));
DialogContent.displayName = DialogPrimitive.Content.displayName;

const DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn('flex flex-col space-y-1.5 text-center sm:text-left', className)} {...props} />
);
DialogHeader.displayName = 'DialogHeader';

const DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className)}
    {...props}
  />
);
DialogFooter.displayName = 'DialogFooter';

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn('text-lg font-semibold leading-none tracking-tight', className)}
    {...props}
  />
));
DialogTitle.displayName = DialogPrimitive.Title.displayName;

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn('text-sm text-muted-foreground', className)}
    {...props}
  />
));
DialogDescription.displayName = DialogPrimitive.Description.displayName;

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
};
</file>

<file path="src/components/ui/dropdown-menu.tsx">
import * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';
import { Check, ChevronRight, Circle } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const DropdownMenu = DropdownMenuPrimitive.Root;

const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;

const DropdownMenuGroup = DropdownMenuPrimitive.Group;

const DropdownMenuPortal = DropdownMenuPrimitive.Portal;

const DropdownMenuSub = DropdownMenuPrimitive.Sub;

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;

const DropdownMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <DropdownMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      'flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',
      inset && 'pl-8',
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto" />
  </DropdownMenuPrimitive.SubTrigger>
));
DropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;

const DropdownMenuSubContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',
      className,
    )}
    {...props}
  />
));
DropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;

const DropdownMenuContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <DropdownMenuPrimitive.Portal>
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',
        className,
      )}
      {...props}
    />
  </DropdownMenuPrimitive.Portal>
));
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;

const DropdownMenuItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Item
    ref={ref}
    className={cn(
      'relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',
      inset && 'pl-8',
      className,
    )}
    {...props}
  />
));
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;

const DropdownMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <DropdownMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.CheckboxItem>
));
DropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;

const DropdownMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <DropdownMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.RadioItem>
));
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;

const DropdownMenuLabel = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Label
    ref={ref}
    className={cn('px-2 py-1.5 text-sm font-semibold', inset && 'pl-8', className)}
    {...props}
  />
));
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;

const DropdownMenuSeparator = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.Separator
    ref={ref}
    className={cn('-mx-1 my-1 h-px bg-muted', className)}
    {...props}
  />
));
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;

const DropdownMenuShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span className={cn('ml-auto text-xs tracking-widest opacity-60', className)} {...props} />
  );
};
DropdownMenuShortcut.displayName = 'DropdownMenuShortcut';

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuPortal,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
};
</file>

<file path="src/components/ui/input.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
          className,
        )}
        ref={ref}
        {...props}
      />
    );
  },
);
Input.displayName = 'Input';

export { Input };
</file>

<file path="src/components/ui/label.tsx">
import * as LabelPrimitive from '@radix-ui/react-label';
import { cva, type VariantProps } from 'class-variance-authority';
import * as React from 'react';

import { cn } from '@/lib/utils';

const labelVariants = cva(
  'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',
);

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />
));
Label.displayName = LabelPrimitive.Root.displayName;

export { Label };
</file>

<file path="src/components/ui/popover.tsx">
import * as PopoverPrimitive from '@radix-ui/react-popover';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Popover = PopoverPrimitive.Root;

const PopoverTrigger = PopoverPrimitive.Trigger;

const PopoverContent = React.forwardRef<
  React.ElementRef<typeof PopoverPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>
>(({ className, align = 'center', sideOffset = 4, ...props }, ref) => (
  <PopoverPrimitive.Portal>
    <PopoverPrimitive.Content
      ref={ref}
      align={align}
      sideOffset={sideOffset}
      className={cn(
        'z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',
        className,
      )}
      {...props}
    />
  </PopoverPrimitive.Portal>
));
PopoverContent.displayName = PopoverPrimitive.Content.displayName;

export { Popover, PopoverTrigger, PopoverContent };
</file>

<file path="src/components/ui/select.tsx">
import * as SelectPrimitive from '@radix-ui/react-select';
import { Check, ChevronDown, ChevronUp } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Select = SelectPrimitive.Root;

const SelectGroup = SelectPrimitive.Group;

const SelectValue = SelectPrimitive.Value;

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      'flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1',
      className,
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
));
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName;

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn('flex cursor-default items-center justify-center py-1', className)}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
));
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn('flex cursor-default items-center justify-center py-1', className)}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
));
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = 'popper', ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        'relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',
        position === 'popper' &&
          'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',
        className,
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          'p-1',
          position === 'popper' &&
            'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]',
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
));
SelectContent.displayName = SelectPrimitive.Content.displayName;

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn('py-1.5 pl-8 pr-2 text-sm font-semibold', className)}
    {...props}
  />
));
SelectLabel.displayName = SelectPrimitive.Label.displayName;

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      'relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>

    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
));
SelectItem.displayName = SelectPrimitive.Item.displayName;

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn('-mx-1 my-1 h-px bg-muted', className)}
    {...props}
  />
));
SelectSeparator.displayName = SelectPrimitive.Separator.displayName;

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
};
</file>

<file path="src/components/ui/separator.tsx">
import * as SeparatorPrimitive from '@radix-ui/react-separator';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(({ className, orientation = 'horizontal', decorative = true, ...props }, ref) => (
  <SeparatorPrimitive.Root
    ref={ref}
    decorative={decorative}
    orientation={orientation}
    className={cn(
      'shrink-0 bg-border',
      orientation === 'horizontal' ? 'h-[1px] w-full' : 'h-full w-[1px]',
      className,
    )}
    {...props}
  />
));
Separator.displayName = SeparatorPrimitive.Root.displayName;

export { Separator };
</file>

<file path="src/components/ui/sheet.tsx">
'use client';

import * as SheetPrimitive from '@radix-ui/react-dialog';
import { cva, type VariantProps } from 'class-variance-authority';
import { X } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Sheet = SheetPrimitive.Root;

const SheetTrigger = SheetPrimitive.Trigger;

const SheetClose = SheetPrimitive.Close;

const SheetPortal = SheetPrimitive.Portal;

const SheetOverlay = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Overlay
    className={cn(
      'fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',
      className,
    )}
    {...props}
    ref={ref}
  />
));
SheetOverlay.displayName = SheetPrimitive.Overlay.displayName;

const sheetVariants = cva(
  'fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
  {
    variants: {
      side: {
        top: 'inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top',
        bottom:
          'inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom',
        left: 'inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm',
        right:
          'inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm',
      },
    },
    defaultVariants: {
      side: 'right',
    },
  },
);

interface SheetContentProps
  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,
    VariantProps<typeof sheetVariants> {}

const SheetContent = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Content>,
  SheetContentProps
>(({ side = 'right', className, children, ...props }, ref) => (
  <SheetPortal>
    <SheetOverlay />
    <SheetPrimitive.Content ref={ref} className={cn(sheetVariants({ side }), className)} {...props}>
      {children}
      <SheetPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </SheetPrimitive.Close>
    </SheetPrimitive.Content>
  </SheetPortal>
));
SheetContent.displayName = SheetPrimitive.Content.displayName;

const SheetHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn('flex flex-col space-y-2 text-center sm:text-left', className)} {...props} />
);
SheetHeader.displayName = 'SheetHeader';

const SheetFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className)}
    {...props}
  />
);
SheetFooter.displayName = 'SheetFooter';

const SheetTitle = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Title
    ref={ref}
    className={cn('text-lg font-semibold text-foreground', className)}
    {...props}
  />
));
SheetTitle.displayName = SheetPrimitive.Title.displayName;

const SheetDescription = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Description
    ref={ref}
    className={cn('text-sm text-muted-foreground', className)}
    {...props}
  />
));
SheetDescription.displayName = SheetPrimitive.Description.displayName;

export {
  Sheet,
  SheetPortal,
  SheetOverlay,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
};
</file>

<file path="src/components/ui/sidebar.tsx">
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import { PanelLeft } from 'lucide-react';
import * as React from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Separator } from '@/components/ui/separator';
import { Sheet, SheetContent } from '@/components/ui/sheet';
import { Skeleton } from '@/components/ui/skeleton';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';
import { useIsMobile } from '@/hooks/use-mobile';
import { cn } from '@/lib/utils';

const SIDEBAR_COOKIE_NAME = 'sidebar:state';
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = '16rem';
const SIDEBAR_WIDTH_MOBILE = '18rem';
const SIDEBAR_WIDTH_ICON = '3rem';
const SIDEBAR_KEYBOARD_SHORTCUT = 'b';

type SidebarContext = {
  state: 'expanded' | 'collapsed';
  open: boolean;
  setOpen: (open: boolean) => void;
  openMobile: boolean;
  setOpenMobile: (open: boolean) => void;
  isMobile: boolean;
  toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContext | null>(null);

function useSidebar() {
  const context = React.useContext(SidebarContext);
  if (!context) {
    throw new Error('useSidebar must be used within a SidebarProvider.');
  }

  return context;
}

const SidebarProvider = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<'div'> & {
    defaultOpen?: boolean;
    open?: boolean;
    onOpenChange?: (open: boolean) => void;
  }
>(
  (
    {
      defaultOpen = true,
      open: openProp,
      onOpenChange: setOpenProp,
      className,
      style,
      children,
      ...props
    },
    ref,
  ) => {
    const isMobile = useIsMobile();
    const [openMobile, setOpenMobile] = React.useState(false);

    // This is the internal state of the sidebar.
    // We use openProp and setOpenProp for control from outside the component.
    const [_open, _setOpen] = React.useState(defaultOpen);
    const open = openProp ?? _open;
    const setOpen = React.useCallback(
      (value: boolean | ((value: boolean) => boolean)) => {
        const openState = typeof value === 'function' ? value(open) : value;
        if (setOpenProp) {
          setOpenProp(openState);
        } else {
          _setOpen(openState);
        }

        // This sets the cookie to keep the sidebar state.
        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
      },
      [setOpenProp, open],
    );

    // Helper to toggle the sidebar.
    const toggleSidebar = React.useCallback(() => {
      return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
    }, [isMobile, setOpen, setOpenMobile]);

    // Adds a keyboard shortcut to toggle the sidebar.
    React.useEffect(() => {
      const handleKeyDown = (event: KeyboardEvent) => {
        if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {
          event.preventDefault();
          toggleSidebar();
        }
      };

      window.addEventListener('keydown', handleKeyDown);
      return () => window.removeEventListener('keydown', handleKeyDown);
    }, [toggleSidebar]);

    // We add a state so that we can do data-state="expanded" or "collapsed".
    // This makes it easier to style the sidebar with Tailwind classes.
    const state = open ? 'expanded' : 'collapsed';

    const contextValue = React.useMemo<SidebarContext>(
      () => ({
        state,
        open,
        setOpen,
        isMobile,
        openMobile,
        setOpenMobile,
        toggleSidebar,
      }),
      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
    );

    return (
      <SidebarContext.Provider value={contextValue}>
        <TooltipProvider delayDuration={0}>
          <div
            style={
              {
                '--sidebar-width': SIDEBAR_WIDTH,
                '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,
                ...style,
              } as React.CSSProperties
            }
            className={cn(
              'group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar',
              className,
            )}
            ref={ref}
            {...props}
          >
            {children}
          </div>
        </TooltipProvider>
      </SidebarContext.Provider>
    );
  },
);
SidebarProvider.displayName = 'SidebarProvider';

const Sidebar = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<'div'> & {
    side?: 'left' | 'right';
    variant?: 'sidebar' | 'floating' | 'inset';
    collapsible?: 'offcanvas' | 'icon' | 'none';
  }
>(
  (
    {
      side = 'left',
      variant = 'sidebar',
      collapsible = 'offcanvas',
      className,
      children,
      ...props
    },
    ref,
  ) => {
    const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

    if (collapsible === 'none') {
      return (
        <div
          className={cn(
            'flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground',
            className,
          )}
          ref={ref}
          {...props}
        >
          {children}
        </div>
      );
    }

    if (isMobile) {
      return (
        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
          <SheetContent
            data-sidebar="sidebar"
            data-mobile="true"
            className="w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden"
            style={
              {
                '--sidebar-width': SIDEBAR_WIDTH_MOBILE,
              } as React.CSSProperties
            }
            side={side}
          >
            <div className="flex h-full w-full flex-col">{children}</div>
          </SheetContent>
        </Sheet>
      );
    }

    return (
      <div
        ref={ref}
        className="group peer hidden md:block text-sidebar-foreground"
        data-state={state}
        data-collapsible={state === 'collapsed' ? collapsible : ''}
        data-variant={variant}
        data-side={side}
      >
        {/* This is what handles the sidebar gap on desktop */}
        <div
          className={cn(
            'duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear',
            'group-data-[collapsible=offcanvas]:w-0',
            'group-data-[side=right]:rotate-180',
            variant === 'floating' || variant === 'inset'
              ? 'group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]'
              : 'group-data-[collapsible=icon]:w-[--sidebar-width-icon]',
          )}
        />
        <div
          className={cn(
            'duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex',
            side === 'left'
              ? 'left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]'
              : 'right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]',
            // Adjust the padding for floating and inset variants.
            variant === 'floating' || variant === 'inset'
              ? 'p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]'
              : 'group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l',
            className,
          )}
          {...props}
        >
          <div
            data-sidebar="sidebar"
            className="flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow"
          >
            {children}
          </div>
        </div>
      </div>
    );
  },
);
Sidebar.displayName = 'Sidebar';

const SidebarTrigger = React.forwardRef<
  React.ElementRef<typeof Button>,
  React.ComponentProps<typeof Button>
>(({ className, onClick, ...props }, ref) => {
  const { toggleSidebar } = useSidebar();

  return (
    <Button
      ref={ref}
      data-sidebar="trigger"
      variant="ghost"
      size="icon"
      className={cn('h-7 w-7', className)}
      onClick={(event) => {
        onClick?.(event);
        toggleSidebar();
      }}
      {...props}
    >
      <PanelLeft />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  );
});
SidebarTrigger.displayName = 'SidebarTrigger';

const SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(
  ({ className, ...props }, ref) => {
    const { toggleSidebar } = useSidebar();

    return (
      <button
        ref={ref}
        data-sidebar="rail"
        aria-label="Toggle Sidebar"
        tabIndex={-1}
        onClick={toggleSidebar}
        title="Toggle Sidebar"
        className={cn(
          'absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex',
          '[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize',
          '[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize',
          'group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar',
          '[[data-side=left][data-collapsible=offcanvas]_&]:-right-2',
          '[[data-side=right][data-collapsible=offcanvas]_&]:-left-2',
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarRail.displayName = 'SidebarRail';

const SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<'main'>>(
  ({ className, ...props }, ref) => {
    return (
      <main
        ref={ref}
        className={cn(
          'relative flex min-h-svh flex-1 flex-col bg-background',
          'peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow',
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarInset.displayName = 'SidebarInset';

const SidebarInput = React.forwardRef<
  React.ElementRef<typeof Input>,
  React.ComponentProps<typeof Input>
>(({ className, ...props }, ref) => {
  return (
    <Input
      ref={ref}
      data-sidebar="input"
      className={cn(
        'h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring',
        className,
      )}
      {...props}
    />
  );
});
SidebarInput.displayName = 'SidebarInput';

const SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(
  ({ className, ...props }, ref) => {
    return (
      <div
        ref={ref}
        data-sidebar="header"
        className={cn('flex flex-col gap-2 p-2', className)}
        {...props}
      />
    );
  },
);
SidebarHeader.displayName = 'SidebarHeader';

const SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(
  ({ className, ...props }, ref) => {
    return (
      <div
        ref={ref}
        data-sidebar="footer"
        className={cn('flex flex-col gap-2 p-2', className)}
        {...props}
      />
    );
  },
);
SidebarFooter.displayName = 'SidebarFooter';

const SidebarSeparator = React.forwardRef<
  React.ElementRef<typeof Separator>,
  React.ComponentProps<typeof Separator>
>(({ className, ...props }, ref) => {
  return (
    <Separator
      ref={ref}
      data-sidebar="separator"
      className={cn('mx-2 w-auto bg-sidebar-border', className)}
      {...props}
    />
  );
});
SidebarSeparator.displayName = 'SidebarSeparator';

const SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(
  ({ className, ...props }, ref) => {
    return (
      <div
        ref={ref}
        data-sidebar="content"
        className={cn(
          'flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden',
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarContent.displayName = 'SidebarContent';

const SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(
  ({ className, ...props }, ref) => {
    return (
      <div
        ref={ref}
        data-sidebar="group"
        className={cn('relative flex w-full min-w-0 flex-col p-2', className)}
        {...props}
      />
    );
  },
);
SidebarGroup.displayName = 'SidebarGroup';

const SidebarGroupLabel = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<'div'> & { asChild?: boolean }
>(({ className, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : 'div';

  return (
    <Comp
      ref={ref}
      data-sidebar="group-label"
      className={cn(
        'duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
        'group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0',
        className,
      )}
      {...props}
    />
  );
});
SidebarGroupLabel.displayName = 'SidebarGroupLabel';

const SidebarGroupAction = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<'button'> & { asChild?: boolean }
>(({ className, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : 'button';

  return (
    <Comp
      ref={ref}
      data-sidebar="group-action"
      className={cn(
        'absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
        // Increases the hit area of the button on mobile.
        'after:absolute after:-inset-2 after:md:hidden',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  );
});
SidebarGroupAction.displayName = 'SidebarGroupAction';

const SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      data-sidebar="group-content"
      className={cn('w-full text-sm', className)}
      {...props}
    />
  ),
);
SidebarGroupContent.displayName = 'SidebarGroupContent';

const SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(
  ({ className, ...props }, ref) => (
    <ul
      ref={ref}
      data-sidebar="menu"
      className={cn('flex w-full min-w-0 flex-col gap-1', className)}
      {...props}
    />
  ),
);
SidebarMenu.displayName = 'SidebarMenu';

const SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(
  ({ className, ...props }, ref) => (
    <li
      ref={ref}
      data-sidebar="menu-item"
      className={cn('group/menu-item relative', className)}
      {...props}
    />
  ),
);
SidebarMenuItem.displayName = 'SidebarMenuItem';

const sidebarMenuButtonVariants = cva(
  'peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
  {
    variants: {
      variant: {
        default: 'hover:bg-sidebar-accent hover:text-sidebar-accent-foreground',
        outline:
          'bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',
      },
      size: {
        default: 'h-8 text-sm',
        sm: 'h-7 text-xs',
        lg: 'h-12 text-sm group-data-[collapsible=icon]:!p-0',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
);

const SidebarMenuButton = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<'button'> & {
    asChild?: boolean;
    isActive?: boolean;
    tooltip?: string | React.ComponentProps<typeof TooltipContent>;
  } & VariantProps<typeof sidebarMenuButtonVariants>
>(
  (
    {
      asChild = false,
      isActive = false,
      variant = 'default',
      size = 'default',
      tooltip,
      className,
      ...props
    },
    ref,
  ) => {
    const Comp = asChild ? Slot : 'button';
    const { isMobile, state } = useSidebar();

    const button = (
      <Comp
        ref={ref}
        data-sidebar="menu-button"
        data-size={size}
        data-active={isActive}
        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
        {...props}
      />
    );

    if (!tooltip) {
      return button;
    }

    if (typeof tooltip === 'string') {
      tooltip = {
        children: tooltip,
      };
    }

    return (
      <Tooltip>
        <TooltipTrigger asChild>{button}</TooltipTrigger>
        <TooltipContent
          side="right"
          align="center"
          hidden={state !== 'collapsed' || isMobile}
          {...tooltip}
        />
      </Tooltip>
    );
  },
);
SidebarMenuButton.displayName = 'SidebarMenuButton';

const SidebarMenuAction = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<'button'> & {
    asChild?: boolean;
    showOnHover?: boolean;
  }
>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {
  const Comp = asChild ? Slot : 'button';

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-action"
      className={cn(
        'absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0',
        // Increases the hit area of the button on mobile.
        'after:absolute after:-inset-2 after:md:hidden',
        'peer-data-[size=sm]/menu-button:top-1',
        'peer-data-[size=default]/menu-button:top-1.5',
        'peer-data-[size=lg]/menu-button:top-2.5',
        'group-data-[collapsible=icon]:hidden',
        showOnHover &&
          'group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0',
        className,
      )}
      {...props}
    />
  );
});
SidebarMenuAction.displayName = 'SidebarMenuAction';

const SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      data-sidebar="menu-badge"
      className={cn(
        'absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none',
        'peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',
        'peer-data-[size=sm]/menu-button:top-1',
        'peer-data-[size=default]/menu-button:top-1.5',
        'peer-data-[size=lg]/menu-button:top-2.5',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  ),
);
SidebarMenuBadge.displayName = 'SidebarMenuBadge';

const SidebarMenuSkeleton = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<'div'> & {
    showIcon?: boolean;
  }
>(({ className, showIcon = false, ...props }, ref) => {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, []);

  return (
    <div
      ref={ref}
      data-sidebar="menu-skeleton"
      className={cn('rounded-md h-8 flex gap-2 px-2 items-center', className)}
      {...props}
    >
      {showIcon && <Skeleton className="size-4 rounded-md" data-sidebar="menu-skeleton-icon" />}
      <Skeleton
        className="h-4 flex-1 max-w-[--skeleton-width]"
        data-sidebar="menu-skeleton-text"
        style={
          {
            '--skeleton-width': width,
          } as React.CSSProperties
        }
      />
    </div>
  );
});
SidebarMenuSkeleton.displayName = 'SidebarMenuSkeleton';

const SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(
  ({ className, ...props }, ref) => (
    <ul
      ref={ref}
      data-sidebar="menu-sub"
      className={cn(
        'mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  ),
);
SidebarMenuSub.displayName = 'SidebarMenuSub';

const SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(
  ({ ...props }, ref) => <li ref={ref} {...props} />,
);
SidebarMenuSubItem.displayName = 'SidebarMenuSubItem';

const SidebarMenuSubButton = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentProps<'a'> & {
    asChild?: boolean;
    size?: 'sm' | 'md';
    isActive?: boolean;
  }
>(({ asChild = false, size = 'md', isActive, className, ...props }, ref) => {
  const Comp = asChild ? Slot : 'a';

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        'flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground',
        'data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground',
        size === 'sm' && 'text-xs',
        size === 'md' && 'text-sm',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  );
});
SidebarMenuSubButton.displayName = 'SidebarMenuSubButton';

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
};
</file>

<file path="src/components/ui/skeleton.tsx">
import { cn } from '@/lib/utils';

function Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {
  return <div className={cn('animate-pulse rounded-md bg-muted', className)} {...props} />;
}

export { Skeleton };
</file>

<file path="src/components/ui/switch.tsx">
import * as SwitchPrimitives from '@radix-ui/react-switch';
import * as React from 'react';

import { cn } from '@/lib/utils';

const Switch = React.forwardRef<
  React.ElementRef<typeof SwitchPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>
>(({ className, ...props }, ref) => (
  <SwitchPrimitives.Root
    className={cn(
      'peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input',
      className,
    )}
    {...props}
    ref={ref}
  >
    <SwitchPrimitives.Thumb
      className={cn(
        'pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0',
      )}
    />
  </SwitchPrimitives.Root>
));
Switch.displayName = SwitchPrimitives.Root.displayName;

export { Switch };
</file>

<file path="src/components/ui/table.tsx">
import * as React from 'react';

import { cn } from '@/lib/utils';

const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(
  ({ className, ...props }, ref) => (
    <div className="relative w-full overflow-auto">
      <table ref={ref} className={cn('w-full caption-bottom text-sm', className)} {...props} />
    </div>
  ),
);
Table.displayName = 'Table';

const TableHeader = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <thead ref={ref} className={cn('[&_tr]:border-b', className)} {...props} />
));
TableHeader.displayName = 'TableHeader';

const TableBody = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tbody ref={ref} className={cn('[&_tr:last-child]:border-0', className)} {...props} />
));
TableBody.displayName = 'TableBody';

const TableFooter = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tfoot
    ref={ref}
    className={cn('border-t bg-muted/50 font-medium [&>tr]:last:border-b-0', className)}
    {...props}
  />
));
TableFooter.displayName = 'TableFooter';

const TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(
  ({ className, ...props }, ref) => (
    <tr
      ref={ref}
      className={cn(
        'border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted group',
        className,
      )}
      {...props}
    />
  ),
);
TableRow.displayName = 'TableRow';

const TableHead = React.forwardRef<
  HTMLTableCellElement,
  React.ThHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <th
    ref={ref}
    className={cn(
      'h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0',
      className,
    )}
    {...props}
  />
));
TableHead.displayName = 'TableHead';

const TableCell = React.forwardRef<
  HTMLTableCellElement,
  React.TdHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <td
    ref={ref}
    className={cn('p-4 align-middle [&:has([role=checkbox])]:pr-0', className)}
    {...props}
  />
));
TableCell.displayName = 'TableCell';

const TableCaption = React.forwardRef<
  HTMLTableCaptionElement,
  React.HTMLAttributes<HTMLTableCaptionElement>
>(({ className, ...props }, ref) => (
  <caption ref={ref} className={cn('mt-4 text-sm text-muted-foreground', className)} {...props} />
));
TableCaption.displayName = 'TableCaption';

export { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };
</file>

<file path="src/components/ui/toast.tsx">
import * as ToastPrimitives from '@radix-ui/react-toast';
import { cva, type VariantProps } from 'class-variance-authority';
import { X } from 'lucide-react';
import * as React from 'react';

import { cn } from '@/lib/utils';

const ToastProvider = ToastPrimitives.Provider;

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      'fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:top-0 sm:flex-col md:max-w-[380px]',
      className,
    )}
    {...props}
  />
));
ToastViewport.displayName = ToastPrimitives.Viewport.displayName;

const toastVariants = cva(
  'group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full',
  {
    variants: {
      variant: {
        default: 'border bg-background text-foreground',
        destructive:
          'destructive group border-destructive bg-destructive text-destructive-foreground',
        success: 'border-green-600 bg-green-50 text-green-900',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
);

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> & VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  );
});
Toast.displayName = ToastPrimitives.Root.displayName;

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      'inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive',
      className,
    )}
    {...props}
  />
));
ToastAction.displayName = ToastPrimitives.Action.displayName;

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      'absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600',
      className,
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
));
ToastClose.displayName = ToastPrimitives.Close.displayName;

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title ref={ref} className={cn('text-sm font-semibold', className)} {...props} />
));
ToastTitle.displayName = ToastPrimitives.Title.displayName;

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn('text-sm opacity-90', className)}
    {...props}
  />
));
ToastDescription.displayName = ToastPrimitives.Description.displayName;

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;

type ToastActionElement = React.ReactElement<typeof ToastAction>;

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
};
</file>

<file path="src/components/ui/toaster.tsx">
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from '@/components/ui/toast';
import { useToast } from '@/hooks/use-toast';

export function Toaster() {
  const { toasts } = useToast();

  return (
    <ToastProvider>
      {toasts.map(({ id, title, description, action, ...props }) => (
        <Toast key={id} {...props}>
          <div className="grid gap-1">
            {title && <ToastTitle>{title}</ToastTitle>}
            {description && <ToastDescription>{description}</ToastDescription>}
          </div>
          {action}
          <ToastClose />
        </Toast>
      ))}
      <ToastViewport />
    </ToastProvider>
  );
}
</file>

<file path="src/components/ui/tooltip.tsx">
import * as TooltipPrimitive from '@radix-ui/react-tooltip';
import * as React from 'react';

import { cn } from '@/lib/utils';

const TooltipProvider = TooltipPrimitive.Provider;

const Tooltip = TooltipPrimitive.Root;

const TooltipTrigger = TooltipPrimitive.Trigger;

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Content
    ref={ref}
    sideOffset={sideOffset}
    className={cn(
      'z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',
      className,
    )}
    {...props}
  />
));
TooltipContent.displayName = TooltipPrimitive.Content.displayName;

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };
</file>

<file path="src/components/error-boundary.tsx">
import { Component, type ErrorInfo, type ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

export class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false,
  };

  public static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Uncaught error:', error, errorInfo);
  }

  public render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center bg-background">
          <div className="text-center p-8">
            <h2 className="text-2xl font-bold text-foreground mb-4">Something went wrong</h2>
            <p className="text-muted-foreground mb-4">
              {this.state.error?.message || 'An unexpected error occurred'}
            </p>
            <button
              className="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90"
              onClick={() => this.setState({ hasError: false })}
            >
              Try again
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}
</file>

<file path="src/components/theme-provider.tsx">
import { createContext, useContext, useEffect, useState } from 'react';

type Theme = 'dark' | 'light' | 'system';

type ThemeProviderProps = {
  children: React.ReactNode;
  defaultTheme?: Theme;
  storageKey?: string;
};

type ThemeProviderState = {
  theme: Theme;
  setTheme: (theme: Theme) => void;
};

const initialState: ThemeProviderState = {
  theme: 'system',
  setTheme: () => null,
};

const ThemeProviderContext = createContext<ThemeProviderState>(initialState);

export function ThemeProvider({
  children,
  defaultTheme = 'system',
  storageKey = 'vite-ui-theme',
  ...props
}: ThemeProviderProps) {
  const [theme, setTheme] = useState<Theme>(
    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme,
  );

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');

    if (theme === 'system') {
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light';
      root.classList.add(systemTheme);
      return;
    }

    root.classList.add(theme);
  }, [theme]);

  const value = {
    theme,
    setTheme: (theme: Theme) => {
      localStorage.setItem(storageKey, theme);
      setTheme(theme);
    },
  };

  return (
    <ThemeProviderContext.Provider {...props} value={value}>
      {children}
    </ThemeProviderContext.Provider>
  );
}

export const useTheme = () => {
  const context = useContext(ThemeProviderContext);

  if (context === undefined) throw new Error('useTheme must be used within a ThemeProvider');

  return context;
};
</file>

<file path="src/hooks/use-debounce.ts">
import { useEffect, useState } from 'react';

export function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(timer);
    };
  }, [value, delay]);

  return debouncedValue;
}
</file>

<file path="src/hooks/use-mobile.tsx">
// import * as React from "react"

// const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  // const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  // React.useEffect(() => {
  //   const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
  //   const onChange = () => {
  //     setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
  //   }
  //   mql.addEventListener("change", onChange)
  //   setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
  //   return () => mql.removeEventListener("change", onChange)
  // }, [])

  // return !!isMobile
  return false;
}
</file>

<file path="src/hooks/use-toast.ts">
import * as React from 'react';

import type { ToastActionElement, ToastProps } from '@/components/ui/toast';

const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;

type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};

const actionTypes = {
  ADD_TOAST: 'ADD_TOAST',
  UPDATE_TOAST: 'UPDATE_TOAST',
  DISMISS_TOAST: 'DISMISS_TOAST',
  REMOVE_TOAST: 'REMOVE_TOAST',
} as const;

let count = 0;

function genId() {
  count = (count + 1) % Number.MAX_VALUE;
  return count.toString();
}

type ActionType = typeof actionTypes;

type Action =
  | {
      type: ActionType['ADD_TOAST'];
      toast: ToasterToast;
    }
  | {
      type: ActionType['UPDATE_TOAST'];
      toast: Partial<ToasterToast>;
    }
  | {
      type: ActionType['DISMISS_TOAST'];
      toastId?: ToasterToast['id'];
    }
  | {
      type: ActionType['REMOVE_TOAST'];
      toastId?: ToasterToast['id'];
    };

interface State {
  toasts: ToasterToast[];
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: 'REMOVE_TOAST',
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);

  toastTimeouts.set(toastId, timeout);
};

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case 'ADD_TOAST':
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };

    case 'UPDATE_TOAST':
      return {
        ...state,
        toasts: state.toasts.map((t) => (t.id === action.toast.id ? { ...t, ...action.toast } : t)),
      };

    case 'DISMISS_TOAST': {
      const { toastId } = action;

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t,
        ),
      };
    }
    case 'REMOVE_TOAST':
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};

const listeners: Array<(state: State) => void> = [];

let memoryState: State = { toasts: [] };

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}

type Toast = Omit<ToasterToast, 'id'>;

function toast({ ...props }: Toast) {
  const id = genId();

  const update = (props: ToasterToast) =>
    dispatch({
      type: 'UPDATE_TOAST',
      toast: { ...props, id },
    });
  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id });

  dispatch({
    type: 'ADD_TOAST',
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });

  return {
    id: id,
    dismiss,
    update,
  };
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState);

  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),
  };
}

export { useToast, toast };
</file>

<file path="src/lib/utils.ts">
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="src/App.tsx">
import PopupPage from '@/components/page/PopupPage';
import './index.css';

function App() {
  return (
    <div className="min-h-screen bg-background">
      <PopupPage />
    </div>
  );
}

export default App;
</file>

<file path="src/globals.css">
@import "tailwindcss";

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));
}

:root {
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 72.22% 50.59%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 5% 64.9%;
  --radius: 0.5rem;
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
  --sidebar-background: 0 0% 98%;
  --sidebar-foreground: 240 5.3% 26.1%;
  --sidebar-primary: 240 5.9% 10%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 240 4.8% 95.9%;
  --sidebar-accent-foreground: 240 5.9% 10%;
  --sidebar-border: 220 13% 91%;
  --sidebar-ring: 240 5% 64.9%;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 85.7% 97.3%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
  --sidebar-background: 240 5.9% 10%;
  --sidebar-foreground: 240 4.8% 95.9%;
  --sidebar-primary: 224.3 76.3% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 240 3.7% 15.9%;
  --sidebar-accent-foreground: 240 4.8% 95.9%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 240 4.9% 83.9%;
}

* {
  border-color: hsl(var(--border));
}

html {
  scroll-behavior: smooth;
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  overscroll-behavior: none;
  font-synthesis-weight: none;
  text-rendering: optimizeLegibility;
}

/* Custom scrollbar styling */
::-webkit-scrollbar {
  width: 5px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border));
  border-radius: 5px;
}

* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border)) transparent;
}

@utility no-scrollbar {
  &::-webkit-scrollbar {
    display: none;
  }

  -ms-overflow-style: none;
  scrollbar-width: none;
}

@utility step {
  counter-increment: step;
}

@utility container-wrapper {
  max-width: 1536px;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}

@utility container {
  padding-left: 1rem;
  padding-right: 1rem;
  margin-left: auto;
  margin-right: auto;
  max-width: 1536px;
}
</file>

<file path="src/index.css">
@import "tailwindcss";

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));
}

:root {
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 72.22% 50.59%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 5% 64.9%;
  --radius: 0.5rem;
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
  --sidebar-background: 0 0% 98%;
  --sidebar-foreground: 240 5.3% 26.1%;
  --sidebar-primary: 240 5.9% 10%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 240 4.8% 95.9%;
  --sidebar-accent-foreground: 240 5.9% 10%;
  --sidebar-border: 220 13% 91%;
  --sidebar-ring: 240 5% 64.9%;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 85.7% 97.3%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
  --sidebar-background: 240 5.9% 10%;
  --sidebar-foreground: 240 4.8% 95.9%;
  --sidebar-primary: 224.3 76.3% 48%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 240 3.7% 15.9%;
  --sidebar-accent-foreground: 240 4.8% 95.9%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 240 4.9% 83.9%;
}

* {
  border-color: hsl(var(--border));
}

html {
  scroll-behavior: smooth;
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  overscroll-behavior: none;
  font-synthesis-weight: none;
  text-rendering: optimizeLegibility;
}

/* Custom scrollbar styling */
::-webkit-scrollbar {
  width: 5px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border));
  border-radius: 5px;
}

* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border)) transparent;
}

@utility no-scrollbar {
  &::-webkit-scrollbar {
    display: none;
  }

  -ms-overflow-style: none;
  scrollbar-width: none;
}
</file>

<file path="website/app/[locale]/docs/contributing/page.tsx">
import Link from "next/link";
import { getTranslations, setRequestLocale } from "next-intl/server";
import { LanguageSwitcher } from "@/components/LanguageSwitcher";

export default async function ContributingPage({
    params,
}: {
    params: Promise<{ locale: string }>;
}) {
    const { locale } = await params;
    setRequestLocale(locale);
    const t = await getTranslations();

    return (
        <div className="min-h-screen bg-background">
            {/* Navigation */}
            <nav className="fixed top-0 left-0 right-0 z-50 glass">
                <div className="mx-auto max-w-6xl px-6 py-4 flex items-center justify-between">
                    <Link href={`/${locale}`} className="flex items-center gap-3">
                        <span className="text-2xl">🔖</span>
                        <span className="font-bold text-lg">Bookmark Scout</span>
                    </Link>
                    <div className="flex items-center gap-4">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors"
                        >
                            {t("nav.docs")}
                        </Link>
                        <a
                            href="https://github.com/isandrel/bookmark-scout"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-sm hover:bg-white/20 transition-colors"
                        >
                            {t("nav.github")}
                        </a>
                        <LanguageSwitcher currentLocale={locale} />
                    </div>
                </div>
            </nav>

            <main className="pt-32 pb-24">
                <div className="mx-auto max-w-4xl px-6">
                    <div className="mb-8">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors text-sm"
                        >
                            {t("nav.backToDocs")}
                        </Link>
                    </div>

                    <h1 className="text-4xl font-bold mb-4">{t("contributingPage.title")}</h1>
                    <p className="text-muted text-lg mb-12">{t("contributingPage.subtitle")}</p>

                    <div className="space-y-8">
                        <section className="glass rounded-2xl p-6">
                            <h2 className="text-2xl font-semibold mb-4">{t("contributingPage.howTo.title")}</h2>
                            <ol className="list-decimal list-inside text-muted space-y-3">
                                <li>{t("contributingPage.howTo.step1")}</li>
                                <li>
                                    {t("contributingPage.howTo.step2")}{" "}
                                    <code className="bg-black/50 px-2 py-1 rounded text-green-400">
                                        git checkout -b feature/amazing-feature
                                    </code>
                                </li>
                                <li>
                                    {t("contributingPage.howTo.step3")}{" "}
                                    <code className="bg-black/50 px-2 py-1 rounded text-green-400">
                                        git commit -m &apos;feat: add amazing feature&apos;
                                    </code>
                                </li>
                                <li>
                                    {t("contributingPage.howTo.step4")}{" "}
                                    <code className="bg-black/50 px-2 py-1 rounded text-green-400">
                                        git push origin feature/amazing-feature
                                    </code>
                                </li>
                                <li>{t("contributingPage.howTo.step5")}</li>
                            </ol>
                        </section>

                        <section className="glass rounded-2xl p-6">
                            <h2 className="text-2xl font-semibold mb-4">{t("contributingPage.commits.title")}</h2>
                            <p className="text-muted mb-4">
                                {t("contributingPage.commits.description")}
                            </p>
                            <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                <code className="text-sm text-green-400">
                                    &lt;type&gt;(&lt;scope&gt;): &lt;description&gt;
                                </code>
                            </pre>
                            <div className="mt-4 grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span className="text-foreground font-medium">feat</span>
                                    <span className="text-muted"> - {t("contributingPage.commits.feat")}</span>
                                </div>
                                <div>
                                    <span className="text-foreground font-medium">fix</span>
                                    <span className="text-muted"> - {t("contributingPage.commits.fix")}</span>
                                </div>
                                <div>
                                    <span className="text-foreground font-medium">docs</span>
                                    <span className="text-muted"> - {t("contributingPage.commits.docs")}</span>
                                </div>
                                <div>
                                    <span className="text-foreground font-medium">refactor</span>
                                    <span className="text-muted"> - {t("contributingPage.commits.refactor")}</span>
                                </div>
                                <div>
                                    <span className="text-foreground font-medium">test</span>
                                    <span className="text-muted"> - {t("contributingPage.commits.test")}</span>
                                </div>
                                <div>
                                    <span className="text-foreground font-medium">chore</span>
                                    <span className="text-muted"> - {t("contributingPage.commits.chore")}</span>
                                </div>
                            </div>
                        </section>

                        <section className="glass rounded-2xl p-6">
                            <h2 className="text-2xl font-semibold mb-4">{t("contributingPage.setup.title")}</h2>
                            <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                <code className="text-sm text-green-400">
                                    # Clone your fork{"\n"}
                                    git clone https://github.com/YOUR_USERNAME/bookmark-scout.git
                                    {"\n"}
                                    cd bookmark-scout{"\n\n"}
                                    # Install dependencies{"\n"}
                                    bun install{"\n\n"}
                                    # Start dev server{"\n"}
                                    bun run dev{"\n\n"}
                                    # Run linter{"\n"}
                                    bun run lint{"\n\n"}
                                    # Format code{"\n"}
                                    bun run format
                                </code>
                            </pre>
                        </section>

                        <section className="glass rounded-2xl p-6">
                            <h2 className="text-2xl font-semibold mb-4">{t("contributingPage.codeStyle.title")}</h2>
                            <ul className="list-disc list-inside text-muted space-y-2">
                                <li>{t("contributingPage.codeStyle.biome")}</li>
                                <li>{t("contributingPage.codeStyle.check")}</li>
                                <li>{t("contributingPage.codeStyle.strict")}</li>
                                <li>{t("contributingPage.codeStyle.functional")}</li>
                            </ul>
                        </section>
                    </div>
                </div>
            </main>
        </div>
    );
}
</file>

<file path="website/app/[locale]/docs/features/page.tsx">
import Link from "next/link";
import { getTranslations, setRequestLocale } from "next-intl/server";
import { LanguageSwitcher } from "@/components/LanguageSwitcher";

export default async function FeaturesPage({
    params,
}: {
    params: Promise<{ locale: string }>;
}) {
    const { locale } = await params;
    setRequestLocale(locale);
    const t = await getTranslations();

    const features = [
        {
            icon: "🔍",
            title: t("featuresPage.instantSearch.title"),
            description: t("featuresPage.instantSearch.description"),
        },
        {
            icon: "📂",
            title: t("featuresPage.dragAndDrop.title"),
            description: t("featuresPage.dragAndDrop.description"),
        },
        {
            icon: "⚡",
            title: t("featuresPage.quickAdd.title"),
            description: t("featuresPage.quickAdd.description"),
        },
        {
            icon: "📱",
            title: t("featuresPage.sidePanel.title"),
            description: t("featuresPage.sidePanel.description"),
        },
        {
            icon: "🌙",
            title: t("featuresPage.darkMode.title"),
            description: t("featuresPage.darkMode.description"),
        },
        {
            icon: "🎯",
            title: t("featuresPage.expandCollapse.title"),
            description: t("featuresPage.expandCollapse.description"),
        },
        {
            icon: "📁",
            title: t("featuresPage.createFolders.title"),
            description: t("featuresPage.createFolders.description"),
        },
        {
            icon: "🗑️",
            title: t("featuresPage.deleteItems.title"),
            description: t("featuresPage.deleteItems.description"),
        },
    ];

    return (
        <div className="min-h-screen bg-background">
            {/* Navigation */}
            <nav className="fixed top-0 left-0 right-0 z-50 glass">
                <div className="mx-auto max-w-6xl px-6 py-4 flex items-center justify-between">
                    <Link href={`/${locale}`} className="flex items-center gap-3">
                        <span className="text-2xl">🔖</span>
                        <span className="font-bold text-lg">Bookmark Scout</span>
                    </Link>
                    <div className="flex items-center gap-4">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors"
                        >
                            {t("nav.docs")}
                        </Link>
                        <a
                            href="https://github.com/isandrel/bookmark-scout"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-sm hover:bg-white/20 transition-colors"
                        >
                            {t("nav.github")}
                        </a>
                        <LanguageSwitcher currentLocale={locale} />
                    </div>
                </div>
            </nav>

            <main className="pt-32 pb-24">
                <div className="mx-auto max-w-4xl px-6">
                    <div className="mb-8">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors text-sm"
                        >
                            {t("nav.backToDocs")}
                        </Link>
                    </div>

                    <h1 className="text-4xl font-bold mb-4">{t("featuresPage.title")}</h1>
                    <p className="text-muted text-lg mb-12">{t("featuresPage.subtitle")}</p>

                    <div className="space-y-8">
                        {features.map((feature) => (
                            <div key={feature.title} className="glass rounded-2xl p-6">
                                <div className="flex items-start gap-4">
                                    <span className="text-3xl">{feature.icon}</span>
                                    <div>
                                        <h2 className="text-xl font-semibold mb-2">
                                            {feature.title}
                                        </h2>
                                        <p className="text-muted">{feature.description}</p>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    <section className="mt-16">
                        <h2 className="text-2xl font-bold mb-6">{t("featuresPage.roadmap.title")}</h2>
                        <div className="glass rounded-2xl p-6">
                            <ul className="space-y-3 text-muted">
                                <li className="flex items-center gap-3">
                                    <span className="w-5 h-5 rounded border border-white/20 flex-shrink-0" />
                                    {t("featuresPage.roadmap.fullManager")}
                                </li>
                                <li className="flex items-center gap-3">
                                    <span className="w-5 h-5 rounded border border-white/20 flex-shrink-0" />
                                    {t("featuresPage.roadmap.options")}
                                </li>
                                <li className="flex items-center gap-3">
                                    <span className="w-5 h-5 rounded border border-white/20 flex-shrink-0" />
                                    {t("featuresPage.roadmap.tags")}
                                </li>
                                <li className="flex items-center gap-3">
                                    <span className="w-5 h-5 rounded border border-white/20 flex-shrink-0" />
                                    {t("featuresPage.roadmap.duplicates")}
                                </li>
                                <li className="flex items-center gap-3">
                                    <span className="w-5 h-5 rounded border border-white/20 flex-shrink-0" />
                                    {t("featuresPage.roadmap.deadLinks")}
                                </li>
                                <li className="flex items-center gap-3">
                                    <span className="w-5 h-5 rounded border border-white/20 flex-shrink-0" />
                                    {t("featuresPage.roadmap.shortcuts")}
                                </li>
                            </ul>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    );
}
</file>

<file path="website/app/[locale]/docs/getting-started/page.tsx">
import Link from "next/link";
import { getTranslations, setRequestLocale } from "next-intl/server";
import { LanguageSwitcher } from "@/components/LanguageSwitcher";

export default async function GettingStartedPage({
    params,
}: {
    params: Promise<{ locale: string }>;
}) {
    const { locale } = await params;
    setRequestLocale(locale);
    const t = await getTranslations();

    return (
        <div className="min-h-screen bg-background">
            {/* Navigation */}
            <nav className="fixed top-0 left-0 right-0 z-50 glass">
                <div className="mx-auto max-w-6xl px-6 py-4 flex items-center justify-between">
                    <Link href={`/${locale}`} className="flex items-center gap-3">
                        <span className="text-2xl">🔖</span>
                        <span className="font-bold text-lg">Bookmark Scout</span>
                    </Link>
                    <div className="flex items-center gap-4">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors"
                        >
                            {t("nav.docs")}
                        </Link>
                        <a
                            href="https://github.com/isandrel/bookmark-scout"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-sm hover:bg-white/20 transition-colors"
                        >
                            {t("nav.github")}
                        </a>
                        <LanguageSwitcher currentLocale={locale} />
                    </div>
                </div>
            </nav>

            <main className="pt-32 pb-24">
                <div className="mx-auto max-w-4xl px-6">
                    <div className="mb-8">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors text-sm"
                        >
                            {t("nav.backToDocs")}
                        </Link>
                    </div>

                    <h1 className="text-4xl font-bold mb-8">{t("gettingStarted.title")}</h1>

                    <div className="prose prose-invert max-w-none">
                        <section className="mb-12">
                            <h2 className="text-2xl font-semibold mb-4">{t("gettingStarted.prerequisites.title")}</h2>
                            <ul className="list-disc list-inside text-muted space-y-2">
                                <li>
                                    <a
                                        href="https://bun.sh"
                                        className="text-primary-light hover:underline"
                                    >
                                        Bun
                                    </a>{" "}
                                    {t("gettingStarted.prerequisites.bun")}
                                </li>
                                <li>{t("gettingStarted.prerequisites.chrome")}</li>
                                <li>{t("gettingStarted.prerequisites.git")}</li>
                            </ul>
                        </section>

                        <section className="mb-12">
                            <h2 className="text-2xl font-semibold mb-4">{t("gettingStarted.installation.title")}</h2>

                            <div className="space-y-6">
                                <div className="glass rounded-xl p-6">
                                    <h3 className="font-medium mb-3">1. {t("gettingStarted.installation.step1")}</h3>
                                    <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                        <code className="text-sm text-green-400">
                                            git clone https://github.com/isandrel/bookmark-scout.git
                                            {"\n"}
                                            cd bookmark-scout
                                        </code>
                                    </pre>
                                </div>

                                <div className="glass rounded-xl p-6">
                                    <h3 className="font-medium mb-3">2. {t("gettingStarted.installation.step2")}</h3>
                                    <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                        <code className="text-sm text-green-400">bun install</code>
                                    </pre>
                                </div>

                                <div className="glass rounded-xl p-6">
                                    <h3 className="font-medium mb-3">3. {t("gettingStarted.installation.step3")}</h3>
                                    <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                        <code className="text-sm text-green-400">bun run build</code>
                                    </pre>
                                </div>

                                <div className="glass rounded-xl p-6">
                                    <h3 className="font-medium mb-3">4. {t("gettingStarted.installation.step4.title")}</h3>
                                    <ol className="text-muted space-y-2 list-decimal list-inside">
                                        <li>{t("gettingStarted.installation.step4.1")}</li>
                                        <li>{t("gettingStarted.installation.step4.2")}</li>
                                        <li>{t("gettingStarted.installation.step4.3")}</li>
                                        <li>{t("gettingStarted.installation.step4.4")}</li>
                                    </ol>
                                </div>
                            </div>
                        </section>

                        <section>
                            <h2 className="text-2xl font-semibold mb-4">{t("gettingStarted.development.title")}</h2>
                            <div className="glass rounded-xl p-6">
                                <p className="text-muted mb-4">
                                    {t("gettingStarted.development.description")}
                                </p>
                                <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                    <code className="text-sm text-green-400">bun run dev</code>
                                </pre>
                            </div>
                        </section>
                    </div>
                </div>
            </main>
        </div>
    );
}
</file>

<file path="website/app/[locale]/docs/page.tsx">
import Link from "next/link";
import { getTranslations, setRequestLocale } from "next-intl/server";
import { LanguageSwitcher } from "@/components/LanguageSwitcher";

export default async function DocsPage({
    params,
}: {
    params: Promise<{ locale: string }>;
}) {
    const { locale } = await params;
    setRequestLocale(locale);
    const t = await getTranslations();

    const docs = [
        {
            title: t("docs.gettingStarted.title"),
            description: t("docs.gettingStarted.description"),
            href: "getting-started",
        },
        {
            title: t("docs.features.title"),
            description: t("docs.features.description"),
            href: "features",
        },
        {
            title: t("docs.contributing.title"),
            description: t("docs.contributing.description"),
            href: "contributing",
        },
    ];

    return (
        <div className="min-h-screen bg-background">
            {/* Navigation */}
            <nav className="fixed top-0 left-0 right-0 z-50 glass">
                <div className="mx-auto max-w-6xl px-6 py-4 flex items-center justify-between">
                    <Link href={`/${locale}`} className="flex items-center gap-3">
                        <span className="text-2xl">🔖</span>
                        <span className="font-bold text-lg">Bookmark Scout</span>
                    </Link>
                    <div className="flex items-center gap-4">
                        <Link href={`/${locale}/docs`} className="text-foreground font-medium">
                            {t("nav.docs")}
                        </Link>
                        <a
                            href="https://github.com/isandrel/bookmark-scout"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-sm hover:bg-white/20 transition-colors"
                        >
                            {t("nav.github")}
                        </a>
                        <LanguageSwitcher currentLocale={locale} />
                    </div>
                </div>
            </nav>

            <main className="pt-32 pb-24">
                <div className="mx-auto max-w-4xl px-6">
                    <h1 className="text-4xl font-bold mb-4">{t("docs.title")}</h1>
                    <p className="text-muted text-lg mb-12">{t("docs.subtitle")}</p>

                    <div className="grid gap-6">
                        {docs.map((doc) => (
                            <Link
                                key={doc.href}
                                href={`/${locale}/docs/${doc.href}`}
                                className="group p-6 rounded-2xl bg-card border border-card-border hover:border-primary/50 transition-all"
                            >
                                <h2 className="text-xl font-semibold mb-2 group-hover:text-primary-light transition-colors">
                                    {doc.title}
                                </h2>
                                <p className="text-muted">{doc.description}</p>
                            </Link>
                        ))}
                    </div>
                </div>
            </main>
        </div>
    );
}
</file>

<file path="website/components/JsonLd.tsx">
export function JsonLd() {
    const structuredData = {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        name: "Bookmark Scout",
        applicationCategory: "BrowserApplication",
        operatingSystem: "Chrome, Firefox",
        offers: {
            "@type": "Offer",
            price: "0",
            priceCurrency: "USD",
        },
        description:
            "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders. Features drag-and-drop, instant search, and dark mode.",
        author: {
            "@type": "Person",
            name: "isandrel",
            url: "https://github.com/isandrel",
        },
        url: "https://isandrel.github.io/bookmark-scout",
        downloadUrl: "https://github.com/isandrel/bookmark-scout",
        screenshot: "https://isandrel.github.io/bookmark-scout/icon.png",
        softwareVersion: "0.1.0",
        aggregateRating: {
            "@type": "AggregateRating",
            ratingValue: "5",
            ratingCount: "1",
        },
        featureList: [
            "Instant bookmark search",
            "Drag and drop organization",
            "Quick bookmark saving",
            "Side panel support",
            "Dark mode",
            "Multi-language support",
        ],
    };

    return (
        <script
            type="application/ld+json"
            dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }}
        />
    );
}
</file>

<file path="website/next.config.ts">
import createNextIntlPlugin from 'next-intl/plugin';
import type { NextConfig } from "next";

const withNextIntl = createNextIntlPlugin();

const nextConfig: NextConfig = {
  output: "export",
  basePath: "/bookmark-scout",
  images: { unoptimized: true },
  trailingSlash: true,
  turbopack: {
    root: ".",
  },
};

export default withNextIntl(nextConfig);
</file>

<file path=".github/workflows/deploy-website.yml">
name: Deploy Website to GitHub Pages

on:
  push:
    branches: [main]
    paths:
      - 'website/**'
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Setup Bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: latest

      - name: Setup Pages
        uses: actions/configure-pages@v5

      - name: Install dependencies
        run: bun install
        working-directory: ./website

      - name: Build with Next.js
        run: bun run build
        working-directory: ./website
        env:
          NODE_ENV: production

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v4
        with:
          path: ./website/out

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
</file>

<file path=".github/workflows/release-extension.yml">
name: Release Extension

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:
    inputs:
      version:
        description: 'Version tag (e.g., v0.1.0)'
        required: true
        type: string

permissions:
  contents: write

jobs:
  build-and-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Bun
        uses: oven-sh/setup-bun@v2

      - name: Install dependencies
        run: bun install

      - name: Build extension for Chrome
        run: bun run build

      - name: Build extension for Firefox
        run: bun run build:firefox

      - name: Build extension for Edge
        run: bun run build:edge

      - name: Create Chrome zip
        run: |
          cd dist/chrome-mv3
          zip -r ../../bookmark-scout-chrome.zip .

      - name: Create Firefox zip
        run: |
          cd dist/firefox-mv2
          zip -r ../../bookmark-scout-firefox.zip .

      - name: Create Edge zip
        run: |
          cd dist/edge-mv3
          zip -r ../../bookmark-scout-edge.zip .

      - name: Build Chrome CRX
        uses: cardinalby/webext-buildtools-chrome-crx-action@v2
        with:
          zipFilePath: bookmark-scout-chrome.zip
          crxFilePath: bookmark-scout-chrome.crx
          privateKey: ${{ secrets.CRX_PRIVATE_KEY }}

      - name: Get version from tag
        id: get_version
        run: |
          if [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
            echo "version=${{ inputs.version }}" >> $GITHUB_OUTPUT
          else
            echo "version=${GITHUB_REF#refs/tags/}" >> $GITHUB_OUTPUT
          fi

      - name: Create GitHub Release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: ${{ steps.get_version.outputs.version }}
          name: Bookmark Scout ${{ steps.get_version.outputs.version }}
          body: |
            ## 📦 Downloads

            | Browser | File | Description |
            |---------|------|-------------|
            | Chrome | `bookmark-scout-chrome.crx` | Signed extension (sideload) |
            | Chrome | `bookmark-scout-chrome.zip` | For Chrome Web Store |
            | Firefox | `bookmark-scout-firefox.zip` | For Firefox Add-ons |
            | Edge | `bookmark-scout-edge.zip` | For Edge Add-ons |

            ## Installation

            ### Chrome (CRX - Developer Mode)
            1. Download `bookmark-scout-chrome.crx`
            2. Open `chrome://extensions/`
            3. Enable "Developer mode"
            4. Drag and drop the `.crx` file

            ### Firefox
            1. Download `bookmark-scout-firefox.zip`
            2. Open `about:debugging#/runtime/this-firefox`
            3. Click "Load Temporary Add-on"
            4. Select the zip file

            ### Edge
            1. Download `bookmark-scout-edge.zip`
            2. Open `edge://extensions/`
            3. Enable "Developer mode"
            4. Click "Load unpacked" and select the extracted folder
          files: |
            bookmark-scout-chrome.crx
            bookmark-scout-chrome.zip
            bookmark-scout-firefox.zip
            bookmark-scout-edge.zip
          generate_release_notes: true
          draft: false
          prerelease: false
</file>

<file path="src/components/page/OptionsPage.tsx">
import { motion } from 'framer-motion';
import type React from 'react';
import { useEffect, useState } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Separator } from '@/components/ui/separator';
import { Switch } from '@/components/ui/switch';

interface Option {
  id: string;
  label: string;
  value: string | boolean;
  type: 'select' | 'switch';
  description?: string;
  category?: string;
}

const defaultOptions: Option[] = [
  {
    id: 'sortOrder',
    label: 'Default Sort Order',
    value: 'date',
    type: 'select',
    description: 'How bookmarks should be sorted by default',
    category: 'Display',
  },
  {
    id: 'groupByFolders',
    label: 'Group by Folders',
    value: true,
    type: 'switch',
    description: 'Organize bookmarks by their folder structure',
    category: 'Display',
  },
  {
    id: 'showFavicons',
    label: 'Show Favicons',
    value: true,
    type: 'switch',
    description: 'Display website icons next to bookmarks',
    category: 'Display',
  },
  {
    id: 'searchHistory',
    label: 'Search History',
    value: true,
    type: 'switch',
    description: 'Enable search history tracking',
    category: 'Search',
  },
  {
    id: 'maxSearchResults',
    label: 'Maximum Search Results',
    value: '20',
    type: 'select',
    description: 'Maximum number of results to show in search',
    category: 'Search',
  },
];

const OptionsPage: React.FC = () => {
  const [options, setOptions] = useState<Option[]>(defaultOptions);

  useEffect(() => {
    chrome.storage.sync.get('options', (data) => {
      if (data.options && Array.isArray(data.options)) {
        setOptions(data.options as Option[]);
      }
    });
  }, []);

  const handleOptionChange = (id: string, value: string | boolean) => {
    const updatedOptions = options.map((option) =>
      option.id === id ? { ...option, value } : option,
    );
    setOptions(updatedOptions);

    chrome.storage.sync.set({ options: updatedOptions }, () => {
      console.log('Options saved');
    });
  };

  const handleReset = () => {
    chrome.storage.sync.clear(() => {
      setOptions(defaultOptions);
      chrome.storage.sync.set({ options: defaultOptions }, () => {
        console.log('Options reset to default');
      });
    });
  };

  // Group options by category
  const groupedOptions = options.reduce(
    (acc, option) => {
      const category = option.category || 'Other';
      if (!acc[category]) {
        acc[category] = [];
      }
      acc[category].push(option);
      return acc;
    },
    {} as Record<string, Option[]>,
  );

  return (
    <div className="min-h-screen bg-gradient-to-b from-background to-muted/20">
      <div className="container mx-auto p-6 max-w-3xl">
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.3 }}
        >
          <Card className="border-none shadow-lg">
            <CardHeader className="space-y-1">
              <CardTitle className="text-2xl font-bold">Bookmark Scout Settings</CardTitle>
              <CardDescription>Customize your bookmark management experience</CardDescription>
            </CardHeader>
            <CardContent className="space-y-8">
              {Object.entries(groupedOptions).map(([category, categoryOptions], index) => (
                <motion.div
                  key={category}
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ duration: 0.3, delay: index * 0.1 }}
                >
                  <h3 className="text-lg font-semibold mb-4 text-muted-foreground">{category}</h3>
                  <div className="space-y-6">
                    {categoryOptions.map((option) => (
                      <motion.div
                        key={option.id}
                        whileHover={{ scale: 1.01 }}
                        className="flex items-start justify-between p-4 rounded-lg bg-card hover:bg-accent/50 transition-colors"
                      >
                        <div className="space-y-1">
                          <Label htmlFor={option.id} className="text-base">
                            {option.label}
                          </Label>
                          {option.description && (
                            <p className="text-sm text-muted-foreground">{option.description}</p>
                          )}
                        </div>
                        {option.type === 'select' ? (
                          <Select
                            value={option.value as string}
                            onValueChange={(value) => handleOptionChange(option.id, value)}
                          >
                            <SelectTrigger className="w-[180px]">
                              <SelectValue />
                            </SelectTrigger>
                            <SelectContent>
                              {option.id === 'sortOrder' ? (
                                <>
                                  <SelectItem value="date">Date Added</SelectItem>
                                  <SelectItem value="alphabetical">Alphabetical</SelectItem>
                                  <SelectItem value="folders">Folders</SelectItem>
                                </>
                              ) : option.id === 'maxSearchResults' ? (
                                <>
                                  <SelectItem value="10">10 results</SelectItem>
                                  <SelectItem value="20">20 results</SelectItem>
                                  <SelectItem value="50">50 results</SelectItem>
                                  <SelectItem value="100">100 results</SelectItem>
                                </>
                              ) : null}
                            </SelectContent>
                          </Select>
                        ) : (
                          <Switch
                            checked={option.value as boolean}
                            onCheckedChange={(checked: boolean) =>
                              handleOptionChange(option.id, checked)
                            }
                          />
                        )}
                      </motion.div>
                    ))}
                  </div>
                  {index < Object.keys(groupedOptions).length - 1 && <Separator className="my-6" />}
                </motion.div>
              ))}
              <div className="pt-6 flex justify-end">
                <Button
                  variant="outline"
                  onClick={handleReset}
                  className="hover:bg-destructive/10 hover:text-destructive transition-colors"
                >
                  Reset to Default
                </Button>
              </div>
            </CardContent>
          </Card>
        </motion.div>
      </div>
    </div>
  );
};

export default OptionsPage;
</file>

<file path="translations/README.ja.md">
<p align="center">
  <a href="../README.md">English</a> ·
  <strong>日本語</strong> ·
  <a href="./README.ko.md">한국어</a>
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/isandrel/bookmark-scout/main/public/icon-128.png" alt="Bookmark Scout Logo" width="80" height="80">
</p>

<h1 align="center">🔖 Bookmark Scout</h1>

<p align="center">
  <strong>ブックマークを素早く検索、整理、特定のフォルダに保存できるモダンなChrome拡張機能</strong>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Chrome-対応-4285F4?style=flat-square&logo=googlechrome&logoColor=white" alt="Chrome">
  <img src="https://img.shields.io/badge/Firefox-対応-FF7139?style=flat-square&logo=firefox&logoColor=white" alt="Firefox">
  <img src="https://img.shields.io/badge/Edge-対応-0078D7?style=flat-square&logo=microsoftedge&logoColor=white" alt="Edge">
  <img src="https://img.shields.io/badge/Safari-非対応-999999?style=flat-square&logo=safari&logoColor=white" alt="Safari">
</p>

---

## 🌐 ブラウザサポート

| ブラウザ | 状態     | 備考                                        |
| -------- | -------- | ------------------------------------------- |
| Chrome   | ✅ 対応   | Manifest V3でフルサポート                   |
| Firefox  | ✅ 対応   | Manifest V2でフルサポート                   |
| Edge     | ✅ 対応   | Manifest V3でフルサポート（Chromiumベース） |
| Safari   | ❌ 非対応 | Appleが`bookmarks` APIを実装していません    |

### なぜSafariは非対応なのか

Safari Web Extensionsはこの拡張機能のコア機能に不可欠な`browser.bookmarks` APIをサポートしていません。AppleはSafari 14（2020年）でWeb Extensionサポートを発表しましたが、bookmarks APIは実装されませんでした。これはAppleプラットフォームの制限であり、WXTや拡張機能フレームワークの問題ではありません。

Safari APIサポートの更新については、[WebKit Bug Tracker](https://bugs.webkit.org/)をご覧ください。

---

## ✨ 機能

### ✅ 現在の重点：ポップアップ＆サイドパネル

- [x] 🔍 **インスタント検索** — デバウンス検索とフォルダフィルタリングでブックマークを素早く検索
- [x] 📂 **ドラッグ＆ドロップ** — 直感的なドラッグ＆ドロップでブックマークとフォルダを整理
- [x] ⚡ **クイック追加** — ワンクリックで現在のタブを任意のフォルダに保存
- [x] 📱 **サイドパネル** — Chromeのサイドパネルからブックマークにアクセス
- [x] 🌙 **ダークモード** — スムーズなトランジションを持つ美しいダークテーマ
- [x] 🎯 **すべて展開/折りたたみ** — ネストされたフォルダを素早く展開または折りたたみ
- [x] 📁 **フォルダ作成** — ポップアップから直接新しいフォルダを作成
- [x] 🗑️ **アイテム削除** — 確認後にブックマークとフォルダを削除

### 🚧 ロードマップ

- [ ] 🗂️ **フルブックマークマネージャー** — Chromeのデフォルトブックマークページをモダンなテーブルビューに置き換え
- [ ] ⚙️ **オプションページ** — 拡張機能の設定とプリファレンスをカスタマイズ
- [ ] 🏷️ **タグ** — ブックマークにカスタムタグを追加してより良い整理を実現
- [ ] 🔄 **同期** — クラウドバックアップによるクロスデバイスブックマーク同期
- [ ] 📊 **分析** — ブックマーク使用統計を表示
- [ ] 🔗 **重複検出** — 重複したブックマークを検出して削除
- [ ] 💀 **デッドリンクチェッカー** — 壊れたリンクを検出してクリーンアップ
- [ ] 📤 **インポート/エクスポート** — JSONとしてブックマークをバックアップおよび復元
- [ ] ⌨️ **キーボードショートカット** — ホットキーでブックマークをナビゲートおよび管理
- [ ] 🔒 **プライベートブックマーク** — パスワード保護されたブックマークフォルダ

---

## 🛠️ 技術スタック

| レイヤー               | テクノロジー                                                                                     |
| ---------------------- | ------------------------------------------------------------------------------------------------ |
| **フレームワーク**     | React 19 + TypeScript                                                                            |
| **ビルド**             | [WXT](https://wxt.dev) + Rolldown-Vite + Nx（キャッシュ付きmonorepo）                            |
| **ランタイム**         | Bun 1.3                                                                                          |
| **状態管理**           | [Zustand](https://zustand-demo.pmnd.rs/)（軽量状態管理）                                         |
| **スタイリング**       | TailwindCSS 4 + CSS変数                                                                          |
| **UIコンポーネント**   | [shadcn/ui](https://ui.shadcn.com)（Radixプリミティブ）                                          |
| **ドラッグ＆ドロップ** | [@atlaskit/pragmatic-drag-and-drop](https://atlassian.design/components/pragmatic-drag-and-drop) |
| **アニメーション**     | Framer Motion                                                                                    |
| **テーブル**           | TanStack React Table                                                                             |

> **📍 現在の重点：** ポップアップ開発。オプションページとブックマークオーバーライドは一時的に無効化されています。

---

## 📦 インストール

### ソースから

```bash
# リポジトリをクローン
git clone https://github.com/isandrel/bookmark-scout.git
cd bookmark-scout

# 依存関係をインストール
bun install

# 拡張機能をビルド
bun run build
```

### Chromeにロード

1. `chrome://extensions/` を開く
2. **デベロッパーモード**を有効化（右上）
3. **パッケージ化されていない拡張機能を読み込む**をクリック
4. `dist` フォルダを選択

---

## 🚀 開発

```bash
# 開発サーバーを起動
bun run dev

# 本番用にビルド
bun run build

# コードをリント
bun run lint
```

---

## 📁 プロジェクト構造

```
src/
├── components/
│   ├── page/
│   │   ├── BookmarksPage.tsx    # フルブックマークマネージャー
│   │   ├── OptionsPage.tsx      # 拡張機能設定
│   │   └── PopupPage.tsx        # メインポップアップ（検索＆DnD）
│   └── ui/                      # shadcnコンポーネント
├── hooks/                       # カスタムReact Hooks
├── lib/                         # ユーティリティ関数
├── popup.html                   # ポップアップエントリ
├── bookmarks.html               # ブックマークページオーバーライド
├── options.html                 # オプションページ
└── sidepanel.html               # サイドパネル
```

---

## 🔐 権限

| 権限        | 目的                               |
| ----------- | ---------------------------------- |
| `bookmarks` | ブックマークの読み取りと書き込み   |
| `tabs`      | クイック追加用の現在のタブ情報取得 |
| `favicon`   | ウェブサイトファビコンを表示       |
| `storage`   | ユーザー設定を保存                 |
| `sidePanel` | Chromeサイドパネルを有効化         |

---

## 🤝 コントリビューション

コントリビューションを歓迎します！お気軽にPull Requestを提出してください。

1. リポジトリをフォーク
2. フィーチャーブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'feat: 素晴らしい機能を追加'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. Pull Requestを作成

---

## 📄 ライセンス

このプロジェクトはGNU Affero General Public License v3.0の下でライセンスされています - 詳細は[LICENSE](../LICENSE)ファイルをご覧ください。

---

<p align="center">
  <a href="https://github.com/isandrel">isandrel</a> が ❤️ を込めて作成
</p>
</file>

<file path="translations/README.ko.md">
<p align="center">
  <a href="../README.md">English</a> ·
  <a href="./README.ja.md">日本語</a> ·
  <strong>한국어</strong>
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/isandrel/bookmark-scout/main/public/icon-128.png" alt="Bookmark Scout Logo" width="80" height="80">
</p>

<h1 align="center">🔖 Bookmark Scout</h1>

<p align="center">
  <strong>북마크를 빠르게 검색하고, 정리하고, 특정 폴더에 저장할 수 있는 모던 Chrome 확장 프로그램</strong>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Chrome-지원-4285F4?style=flat-square&logo=googlechrome&logoColor=white" alt="Chrome">
  <img src="https://img.shields.io/badge/Firefox-지원-FF7139?style=flat-square&logo=firefox&logoColor=white" alt="Firefox">
  <img src="https://img.shields.io/badge/Edge-지원-0078D7?style=flat-square&logo=microsoftedge&logoColor=white" alt="Edge">
  <img src="https://img.shields.io/badge/Safari-미지원-999999?style=flat-square&logo=safari&logoColor=white" alt="Safari">
</p>

---

## 🌐 브라우저 지원

| 브라우저 | 상태     | 비고                                    |
| -------- | -------- | --------------------------------------- |
| Chrome   | ✅ 지원   | Manifest V3 완전 지원                   |
| Firefox  | ✅ 지원   | Manifest V2 완전 지원                   |
| Edge     | ✅ 지원   | Manifest V3 완전 지원 (Chromium 기반)   |
| Safari   | ❌ 미지원 | Apple이 `bookmarks` API를 구현하지 않음 |

### Safari가 지원되지 않는 이유

Safari Web Extensions는 이 확장 프로그램의 핵심 기능에 필수적인 `browser.bookmarks` API를 지원하지 않습니다. Apple은 Safari 14(2020년)에서 Web Extension 지원을 발표했지만, bookmarks API는 구현되지 않았습니다. 이것은 Apple 플랫폼의 제한이며, WXT나 확장 프로그램 프레임워크의 문제가 아닙니다.

Safari API 지원 업데이트에 대해서는 [WebKit Bug Tracker](https://bugs.webkit.org/)를 참조하세요.

---

## ✨ 기능

### ✅ 현재 중점: 팝업 & 사이드 패널

- [x] 🔍 **즉시 검색** — 디바운스 검색과 폴더 필터링으로 북마크를 빠르게 검색
- [x] 📂 **드래그 앤 드롭** — 직관적인 드래그 앤 드롭으로 북마크와 폴더 정리
- [x] ⚡ **빠른 추가** — 한 번의 클릭으로 현재 탭을 원하는 폴더에 저장
- [x] 📱 **사이드 패널** — Chrome 사이드 패널에서 북마크에 접근
- [x] 🌙 **다크 모드** — 부드러운 전환 효과가 있는 아름다운 다크 테마
- [x] 🎯 **모두 펼치기/접기** — 중첩된 폴더를 빠르게 펼치거나 접기
- [x] 📁 **폴더 생성** — 팝업에서 직접 새 폴더 생성
- [x] 🗑️ **항목 삭제** — 확인 후 북마크와 폴더 삭제

### 🚧 로드맵

- [ ] 🗂️ **전체 북마크 관리자** — Chrome 기본 북마크 페이지를 모던한 테이블 뷰로 대체
- [ ] ⚙️ **옵션 페이지** — 확장 프로그램 설정 및 환경설정 커스터마이즈
- [ ] 🏷️ **태그** — 더 나은 정리를 위해 북마크에 커스텀 태그 추가
- [ ] 🔄 **동기화** — 클라우드 백업을 통한 크로스 디바이스 북마크 동기화
- [ ] 📊 **분석** — 북마크 사용 통계 보기
- [ ] 🔗 **중복 감지** — 중복된 북마크 찾기 및 제거
- [ ] 💀 **데드 링크 체커** — 깨진 링크 감지 및 정리
- [ ] 📤 **가져오기/내보내기** — JSON으로 북마크 백업 및 복원
- [ ] ⌨️ **키보드 단축키** — 단축키로 북마크 탐색 및 관리
- [ ] 🔒 **비공개 북마크** — 비밀번호로 보호된 북마크 폴더

---

## 🛠️ 기술 스택

| 레이어             | 기술                                                                                             |
| ------------------ | ------------------------------------------------------------------------------------------------ |
| **프레임워크**     | React 19 + TypeScript                                                                            |
| **빌드**           | [WXT](https://wxt.dev) + Rolldown-Vite + Nx (캐싱이 있는 monorepo)                               |
| **런타임**         | Bun 1.3                                                                                          |
| **상태 관리**      | [Zustand](https://zustand-demo.pmnd.rs/) (경량 상태 관리)                                        |
| **스타일링**       | TailwindCSS 4 + CSS 변수                                                                         |
| **UI 컴포넌트**    | [shadcn/ui](https://ui.shadcn.com) (Radix 프리미티브)                                            |
| **드래그 앤 드롭** | [@atlaskit/pragmatic-drag-and-drop](https://atlassian.design/components/pragmatic-drag-and-drop) |
| **애니메이션**     | Framer Motion                                                                                    |
| **테이블**         | TanStack React Table                                                                             |

> **📍 현재 중점:** 팝업 개발. 옵션 페이지와 북마크 오버라이드는 일시적으로 비활성화됨.

---

## 📦 설치

### 소스에서 설치

```bash
# 리포지토리 클론
git clone https://github.com/isandrel/bookmark-scout.git
cd bookmark-scout

# 의존성 설치
bun install

# 확장 프로그램 빌드
bun run build
```

### Chrome에 로드

1. `chrome://extensions/` 열기
2. **개발자 모드** 활성화 (오른쪽 상단)
3. **압축해제된 확장 프로그램을 로드합니다** 클릭
4. `dist` 폴더 선택

---

## 🚀 개발

```bash
# 개발 서버 시작
bun run dev

# 프로덕션용 빌드
bun run build

# 코드 린트
bun run lint
```

---

## 📁 프로젝트 구조

```
src/
├── components/
│   ├── page/
│   │   ├── BookmarksPage.tsx    # 전체 북마크 관리자
│   │   ├── OptionsPage.tsx      # 확장 프로그램 설정
│   │   └── PopupPage.tsx        # 메인 팝업 (검색 & DnD)
│   └── ui/                      # shadcn 컴포넌트
├── hooks/                       # 커스텀 React Hooks
├── lib/                         # 유틸리티 함수
├── popup.html                   # 팝업 엔트리
├── bookmarks.html               # 북마크 페이지 오버라이드
├── options.html                 # 옵션 페이지
└── sidepanel.html               # 사이드 패널
```

---

## 🔐 권한

| 권한        | 용도                          |
| ----------- | ----------------------------- |
| `bookmarks` | 북마크 읽기 및 쓰기           |
| `tabs`      | 빠른 추가를 위한 현재 탭 정보 |
| `favicon`   | 웹사이트 파비콘 표시          |
| `storage`   | 사용자 환경설정 저장          |
| `sidePanel` | Chrome 사이드 패널 활성화     |

---

## 🤝 기여

기여를 환영합니다! Pull Request를 자유롭게 제출해 주세요.

1. 리포지토리 포크
2. 기능 브랜치 생성 (`git checkout -b feature/amazing-feature`)
3. 변경사항 커밋 (`git commit -m 'feat: 멋진 기능 추가'`)
4. 브랜치에 푸시 (`git push origin feature/amazing-feature`)
5. Pull Request 생성

---

## 📄 라이선스

이 프로젝트는 GNU Affero General Public License v3.0에 따라 라이선스가 부여됩니다 - 자세한 내용은 [LICENSE](../LICENSE) 파일을 참조하세요.

---

<p align="center">
  <a href="https://github.com/isandrel">isandrel</a>이 ❤️로 만들었습니다
</p>
</file>

<file path="website/app/[locale]/layout.tsx">
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import { NextIntlClientProvider } from "next-intl";
import { getMessages, setRequestLocale } from "next-intl/server";
import { routing } from "@/i18n/routing";
import { JsonLd } from "@/components/JsonLd";
import "../globals.css";

const inter = Inter({
    variable: "--font-inter",
    subsets: ["latin"],
});

export function generateStaticParams() {
    return routing.locales.map((locale) => ({ locale }));
}

export async function generateMetadata({
    params,
}: {
    params: Promise<{ locale: string }>;
}): Promise<Metadata> {
    const { locale } = await params;
    const messages = await getMessages();
    const metadata = messages.metadata as { title: string; description: string };

    return {
        title: metadata.title,
        description: metadata.description,
        keywords: [
            "chrome extension",
            "bookmarks",
            "bookmark manager",
            "productivity",
            "browser extension",
            "bookmark search",
            "bookmark organizer",
            "drag and drop",
        ],
        alternates: {
            canonical: `https://isandrel.github.io/bookmark-scout/${locale}`,
            languages: {
                en: "https://isandrel.github.io/bookmark-scout/en",
                ja: "https://isandrel.github.io/bookmark-scout/ja",
                ko: "https://isandrel.github.io/bookmark-scout/ko",
            },
        },
        openGraph: {
            title: "Bookmark Scout",
            description: metadata.description,
            type: "website",
            locale: locale === "ja" ? "ja_JP" : locale === "ko" ? "ko_KR" : "en_US",
            url: `https://isandrel.github.io/bookmark-scout/${locale}`,
            images: [
                {
                    url: "/bookmark-scout/icon.png",
                    width: 128,
                    height: 128,
                    alt: "Bookmark Scout",
                },
            ],
        },
        twitter: {
            card: "summary",
            title: "Bookmark Scout",
            description: metadata.description,
            images: ["/bookmark-scout/icon.png"],
        },
    };
}

export default async function LocaleLayout({
    children,
    params,
}: {
    children: React.ReactNode;
    params: Promise<{ locale: string }>;
}) {
    const { locale } = await params;
    setRequestLocale(locale);

    const messages = await getMessages();

    return (
        <html lang={locale} className="dark">
            <head>
                <JsonLd />
            </head>
            <body className={`${inter.variable} font-sans antialiased`}>
                <NextIntlClientProvider messages={messages}>
                    {children}
                </NextIntlClientProvider>
            </body>
        </html>
    );
}
</file>

<file path="website/app/page.tsx">
import { redirect } from 'next/navigation';
import { routing } from '@/i18n/routing';

export default function RootPage() {
    redirect(`/${routing.defaultLocale}`);
}
</file>

<file path="website/components/LanguageSwitcher.tsx">
"use client";

import { useState, useRef, useEffect } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { routing, type Locale } from "@/i18n/routing";

const localeNames: Record<Locale, string> = {
    en: "🇺🇸 English",
    ja: "🇯🇵 日本語",
    ko: "🇰🇷 한국어",
};

export function LanguageSwitcher({ currentLocale }: { currentLocale: string }) {
    const [isOpen, setIsOpen] = useState(false);
    const dropdownRef = useRef<HTMLDivElement>(null);
    const pathname = usePathname();

    // Close dropdown when clicking outside
    useEffect(() => {
        function handleClickOutside(event: MouseEvent) {
            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
                setIsOpen(false);
            }
        }
        document.addEventListener("mousedown", handleClickOutside);
        return () => document.removeEventListener("mousedown", handleClickOutside);
    }, []);

    // Get the path without the locale prefix
    const getPathWithoutLocale = () => {
        const segments = pathname.split("/");
        const pathWithoutLocale = segments.slice(2).join("/");
        return pathWithoutLocale ? `/${pathWithoutLocale}` : "";
    };

    return (
        <div className="relative" ref={dropdownRef}>
            <button
                onClick={() => setIsOpen(!isOpen)}
                className="flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-muted hover:text-foreground hover:bg-white/10 transition-colors"
                aria-expanded={isOpen}
                aria-haspopup="true"
            >
                <span className="text-base">🌐</span>
                <span>{localeNames[currentLocale as Locale]}</span>
                <svg
                    className={`w-4 h-4 transition-transform ${isOpen ? "rotate-180" : ""}`}
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
            </button>

            {isOpen && (
                <div className="absolute right-0 mt-2 w-40 rounded-xl bg-card border border-card-border shadow-lg overflow-hidden z-50">
                    {routing.locales.map((locale) => {
                        const isActive = locale === currentLocale;
                        const newPath = `/${locale}${getPathWithoutLocale()}`;

                        return (
                            <Link
                                key={locale}
                                href={newPath}
                                onClick={() => setIsOpen(false)}
                                className={`flex items-center gap-3 px-4 py-3 text-sm transition-colors ${isActive
                                    ? "bg-white/10 text-foreground"
                                    : "text-muted hover:text-foreground hover:bg-white/5"
                                    }`}
                            >
                                {isActive && (
                                    <svg className="w-4 h-4 text-primary-light" fill="currentColor" viewBox="0 0 20 20">
                                        <path
                                            fillRule="evenodd"
                                            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                            clipRule="evenodd"
                                        />
                                    </svg>
                                )}
                                {!isActive && <span className="w-4" />}
                                {localeNames[locale]}
                            </Link>
                        );
                    })}
                </div>
            )}
        </div>
    );
}
</file>

<file path="website/package.json">
{
  "name": "website",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "next": "16.1.1",
    "next-intl": "^4.6.1",
    "react": "19.2.3",
    "react-dom": "19.2.3"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^25",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.1.1",
    "tailwindcss": "^4",
    "typescript": "^5"
  },
  "ignoreScripts": [
    "sharp",
    "unrs-resolver"
  ],
  "trustedDependencies": [
    "sharp",
    "unrs-resolver"
  ]
}
</file>

<file path="src/components/page/PopupPage.tsx">
/**
 * PopupPage - Bookmark popup using Zustand store.
 *
 * Refactored from 1299 lines to ~140 lines using:
 * - Zustand for centralized state management
 * - Extracted components for UI
 * - Extracted services for Chrome API
 */

import { useCallback, useEffect, useRef, useState } from 'react';
import { BookmarkSearch, FolderItem } from '@/components/bookmark';
import { Accordion } from '@/components/ui/accordion';
import { Button } from '@/components/ui/button';
import { Skeleton } from '@/components/ui/skeleton';
import { Toaster } from '@/components/ui/toaster';
import { useDebounce } from '@/hooks/use-debounce';
import { useToast } from '@/hooks/use-toast';
import { t } from '@/hooks/use-i18n';
import { useBookmarkStore } from '@/stores';
import type { BookmarkTreeNode, DragOperation } from '@/types';
import '@/styles/popup.css';

function PopupPage() {
  const inputRef = useRef<HTMLInputElement>(null);
  const { toast } = useToast();
  const [instanceId] = useState(() => Symbol('bookmark-drag-instance'));

  // Zustand store
  const {
    folders,
    filteredFolders,
    isLoading,
    error,
    query,
    expandedFolders,
    forceExpandAll,
    draggedItem,
    creatingFolderId,
    newFolderName,
    fetchFolders,
    setQuery,
    setDebouncedQuery,
    setExpandedFolders,
    setForceExpandAll,
    setDraggedItem,
    setCreatingFolderId,
    setNewFolderName,
    addBookmarkToFolder,
    createFolder,
    removeBookmark,
    removeFolder,
    handleDrop,
    toggleExpandAllChildren,
    areAllChildrenExpanded,
  } = useBookmarkStore();

  // Debounce search query
  const debouncedQuery = useDebounce(query, 300);
  useEffect(() => {
    setDebouncedQuery(debouncedQuery);
  }, [debouncedQuery, setDebouncedQuery]);

  // Fetch folders on mount
  useEffect(() => {
    fetchFolders();
  }, [fetchFolders]);

  // Toast wrapper for operations
  const withToast = useCallback(
    async (
      operation: () => Promise<{ success: boolean; message: string }>,
      successTitle: string,
      errorTitle: string,
    ) => {
      const result = await operation();
      toast({
        title: result.success ? `✓ ${successTitle}` : `× ${errorTitle}`,
        description: result.message,
        variant: result.success ? 'success' : 'destructive',
      });
      return result.success;
    },
    [toast],
  );

  // Add temporary folder to tree
  const addTemporaryFolder = useCallback(
    (nodes: BookmarkTreeNode[], parentId: string): BookmarkTreeNode[] => {
      return nodes.map((node) => {
        if (node.id === parentId) {
          return {
            ...node,
            children: [
              {
                id: 'temp-folder',
                parentId: node.id,
                title: t('newFolder'),
                isOpen: false,
                isTemporary: true,
                children: [],
              },
              ...(node.children || []),
            ],
          };
        }
        if (node.children) {
          return { ...node, children: addTemporaryFolder(node.children, parentId) };
        }
        return node;
      });
    },
    [],
  );

  const handleAddFolder = useCallback(
    (folderId: string) => {
      setCreatingFolderId(folderId);
      setNewFolderName('');
      setExpandedFolders((prev) => [...prev, folderId]);
    },
    [setCreatingFolderId, setNewFolderName, setExpandedFolders],
  );

  const handleCreateFolder = useCallback(async () => {
    if (!creatingFolderId || !newFolderName.trim()) {
      setCreatingFolderId(null);
      setNewFolderName('');
      return;
    }
    await withToast(
      () => createFolder(creatingFolderId, newFolderName),
      t('folderCreated'),
      t('errorCreatingFolder'),
    );
    setCreatingFolderId(null);
    setNewFolderName('');
  }, [
    creatingFolderId,
    newFolderName,
    createFolder,
    setCreatingFolderId,
    setNewFolderName,
    withToast,
  ]);

  const handleCancelCreateFolder = useCallback(() => {
    setCreatingFolderId(null);
    setNewFolderName('');
  }, [setCreatingFolderId, setNewFolderName]);

  const handleDropWithToast = useCallback(
    async (operation: DragOperation) => {
      await withToast(() => handleDrop(operation), t('itemMoved'), t('errorMovingItem'));
    },
    [handleDrop, withToast],
  );

  const displayFolders = creatingFolderId
    ? addTemporaryFolder(filteredFolders, creatingFolderId)
    : filteredFolders;

  if (error) {
    return (
      <div className="p-4">
        <div className="text-red-500 mb-4">{t('error')}: {error}</div>
        <Button onClick={() => window.location.reload()}>{t('retry')}</Button>
      </div>
    );
  }

  return (
    <div className="flex flex-col h-full w-full min-h-0 overflow-hidden">
      <div className="flex flex-col h-full overflow-hidden">
        <BookmarkSearch
          query={query}
          onQueryChange={setQuery}
          forceExpandAll={forceExpandAll}
          onToggleExpandAll={() => setForceExpandAll(!forceExpandAll)}
          inputRef={inputRef}
        />

        <div className="flex-1 overflow-hidden bookmark-content">
          {isLoading ? (
            <div className="p-4 space-y-2">
              <Skeleton className="h-8 w-full" />
              <Skeleton className="h-8 w-full" />
              <Skeleton className="h-8 w-full" />
            </div>
          ) : (
            <div className="p-4">
              <Accordion
                type="multiple"
                value={expandedFolders}
                onValueChange={setExpandedFolders}
                className="w-full accordion-container"
              >
                {displayFolders.map((node) => (
                  <FolderItem
                    key={node.id}
                    node={node}
                    instanceId={instanceId}
                    isDragging={draggedItem?.id === node.id}
                    isAllChildrenExpanded={areAllChildrenExpanded(node)}
                    creatingFolderId={creatingFolderId}
                    newFolderName={newFolderName}
                    folders={folders}
                    onDragStart={setDraggedItem}
                    onDragEnd={() => setDraggedItem(null)}
                    onDrop={handleDropWithToast}
                    onAddBookmark={(id) =>
                      withToast(
                        () => addBookmarkToFolder(id),
                        t('bookmarkAdded'),
                        t('errorAddingBookmark'),
                      )
                    }
                    onAddFolder={handleAddFolder}
                    onDeleteFolder={(id) =>
                      withToast(() => removeFolder(id), t('folderDeleted'), t('errorDeletingFolder'))
                    }
                    onDeleteBookmark={(id) =>
                      withToast(
                        () => removeBookmark(id),
                        t('bookmarkDeleted'),
                        t('errorDeletingBookmark'),
                      )
                    }
                    onCreateFolder={handleCreateFolder}
                    onCancelCreateFolder={handleCancelCreateFolder}
                    onNewFolderNameChange={setNewFolderName}
                    onToggleExpandAllChildren={toggleExpandAllChildren}
                  />
                ))}
              </Accordion>
            </div>
          )}
        </div>
      </div>
      <Toaster />
    </div>
  );
}

export default PopupPage;
</file>

<file path="website/app/[locale]/page.tsx">
import Link from "next/link";
import { getTranslations, setRequestLocale } from "next-intl/server";
import { LanguageSwitcher } from "@/components/LanguageSwitcher";

// Tech stack badges
const techStack = [
    { name: "React 19", color: "#61DAFB", logo: "react" },
    { name: "TypeScript", color: "#3178C6", logo: "typescript" },
    { name: "WXT", color: "#646CFF", logo: "vite" },
    { name: "Rolldown-Vite", color: "#646CFF", logo: "vite" },
    { name: "TailwindCSS 4", color: "#06B6D4", logo: "tailwindcss" },
    { name: "Zustand", color: "#764ABC", logo: "redux" },
    { name: "Nx", color: "#143055", logo: "nx" },
    { name: "Bun", color: "#000000", logo: "bun" },
];

export default async function Home({
    params,
}: {
    params: Promise<{ locale: string }>;
}) {
    const { locale } = await params;
    setRequestLocale(locale);

    const t = await getTranslations();

    const features = [
        {
            icon: "🔍",
            title: t("features.instantSearch.title"),
            description: t("features.instantSearch.description"),
        },
        {
            icon: "📂",
            title: t("features.dragAndDrop.title"),
            description: t("features.dragAndDrop.description"),
        },
        {
            icon: "⚡",
            title: t("features.quickAdd.title"),
            description: t("features.quickAdd.description"),
        },
        {
            icon: "📱",
            title: t("features.sidePanel.title"),
            description: t("features.sidePanel.description"),
        },
        {
            icon: "🌙",
            title: t("features.darkMode.title"),
            description: t("features.darkMode.description"),
        },
        {
            icon: "🎯",
            title: t("features.expandCollapse.title"),
            description: t("features.expandCollapse.description"),
        },
    ];

    return (
        <div className="min-h-screen bg-background">
            {/* Navigation */}
            <nav className="fixed top-0 left-0 right-0 z-50 glass">
                <div className="mx-auto max-w-6xl px-6 py-4 flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <img src="/bookmark-scout/icon.png" alt="Bookmark Scout" className="w-8 h-8" />
                        <span className="font-bold text-lg">Bookmark Scout</span>
                    </div>
                    <div className="flex items-center gap-4">
                        <Link
                            href={`/${locale}/docs`}
                            className="text-muted hover:text-foreground transition-colors"
                        >
                            {t("nav.docs")}
                        </Link>
                        <a
                            href="https://github.com/isandrel/bookmark-scout"
                            target="_blank"
                            rel="noopener noreferrer"
                            className="flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-sm hover:bg-white/20 transition-colors"
                        >
                            <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                            </svg>
                            {t("nav.github")}
                        </a>
                        <LanguageSwitcher currentLocale={locale} />
                    </div>
                </div>
            </nav>

            {/* Hero Section */}
            <section className="relative pt-32 pb-24 overflow-hidden">
                {/* Background gradient */}
                <div className="absolute inset-0 bg-gradient-to-br from-primary/20 via-background to-accent/20 animate-gradient" />
                <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-primary/10 via-transparent to-transparent" />

                <div className="relative mx-auto max-w-6xl px-6 text-center">
                    <div className="inline-flex items-center gap-2 rounded-full bg-white/5 border border-white/10 px-4 py-2 mb-8">
                        <span className="text-sm text-muted">{t("hero.badge")}</span>
                        <span className="text-xs bg-primary/20 text-primary-light px-2 py-0.5 rounded-full">
                            {t("hero.manifestV3")}
                        </span>
                    </div>

                    <h1 className="text-5xl sm:text-7xl font-bold tracking-tight mb-6">
                        <span className="bg-gradient-to-r from-white via-primary-light to-accent bg-clip-text text-transparent">
                            {t("hero.title")}
                        </span>
                    </h1>

                    <p className="text-xl text-muted max-w-2xl mx-auto mb-12">
                        {t("hero.description")}
                    </p>

                    <div className="flex flex-col sm:flex-row items-center justify-center gap-4">
                        <a
                            href="https://github.com/isandrel/bookmark-scout"
                            className="group flex items-center gap-2 rounded-full bg-gradient-to-r from-primary to-accent px-8 py-4 font-medium text-white shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 transition-all"
                        >
                            <svg
                                className="w-5 h-5"
                                fill="currentColor"
                                viewBox="0 0 24 24"
                            >
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                            </svg>
                            {t("hero.viewOnGitHub")}
                            <svg
                                className="w-4 h-4 group-hover:translate-x-1 transition-transform"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    strokeLinecap="round"
                                    strokeLinejoin="round"
                                    strokeWidth={2}
                                    d="M9 5l7 7-7 7"
                                />
                            </svg>
                        </a>
                        <Link
                            href={`/${locale}/docs`}
                            className="rounded-full border border-white/20 px-8 py-4 font-medium hover:bg-white/5 transition-colors"
                        >
                            {t("hero.documentation")}
                        </Link>
                    </div>
                </div>
            </section>

            {/* Features Section */}
            <section className="py-24 border-t border-white/5">
                <div className="mx-auto max-w-6xl px-6">
                    <div className="text-center mb-16">
                        <h2 className="text-3xl sm:text-4xl font-bold mb-4">
                            {t("features.title")}
                        </h2>
                        <p className="text-muted text-lg">{t("features.subtitle")}</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {features.map((feature) => (
                            <div
                                key={feature.title}
                                className="group p-6 rounded-2xl bg-card border border-card-border hover:border-primary/50 hover:glow transition-all duration-300"
                            >
                                <div className="text-4xl mb-4">{feature.icon}</div>
                                <h3 className="text-xl font-semibold mb-2">{feature.title}</h3>
                                <p className="text-muted">{feature.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* Tech Stack Section */}
            <section className="py-24 border-t border-white/5">
                <div className="mx-auto max-w-6xl px-6 text-center">
                    <h2 className="text-3xl sm:text-4xl font-bold mb-4">
                        {t("techStack.title")}
                    </h2>
                    <p className="text-muted text-lg mb-12">{t("techStack.subtitle")}</p>

                    <div className="flex flex-wrap items-center justify-center gap-4">
                        {techStack.map((tech) => (
                            <div
                                key={tech.name}
                                className="flex items-center gap-2 rounded-full bg-white/5 border border-white/10 px-4 py-2"
                            >
                                <img
                                    src={`https://img.shields.io/badge/-${tech.name.replace(/ /g, "_")}-${tech.color.replace("#", "")}?style=flat-square&logo=${tech.logo}&logoColor=white`}
                                    alt={tech.name}
                                    className="h-5"
                                />
                            </div>
                        ))}
                    </div>
                </div>
            </section>

            {/* Installation Section */}
            <section className="py-24 border-t border-white/5">
                <div className="mx-auto max-w-4xl px-6">
                    <div className="text-center mb-12">
                        <h2 className="text-3xl sm:text-4xl font-bold mb-4">
                            {t("installation.title")}
                        </h2>
                        <p className="text-muted text-lg">{t("installation.subtitle")}</p>
                    </div>

                    <div className="space-y-6">
                        <div className="glass rounded-2xl p-6">
                            <h3 className="font-semibold mb-4 flex items-center gap-2">
                                <span className="w-8 h-8 rounded-full bg-primary/20 text-primary-light flex items-center justify-center text-sm">
                                    1
                                </span>
                                {t("installation.step1.title")}
                            </h3>
                            <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                <code className="text-sm text-green-400">
                                    git clone https://github.com/isandrel/bookmark-scout.git{"\n"}
                                    cd bookmark-scout
                                </code>
                            </pre>
                        </div>

                        <div className="glass rounded-2xl p-6">
                            <h3 className="font-semibold mb-4 flex items-center gap-2">
                                <span className="w-8 h-8 rounded-full bg-primary/20 text-primary-light flex items-center justify-center text-sm">
                                    2
                                </span>
                                {t("installation.step2.title")}
                            </h3>
                            <pre className="bg-black/50 rounded-lg p-4 overflow-x-auto">
                                <code className="text-sm text-green-400">
                                    bun install{"\n"}
                                    bun run build
                                </code>
                            </pre>
                        </div>

                        <div className="glass rounded-2xl p-6">
                            <h3 className="font-semibold mb-4 flex items-center gap-2">
                                <span className="w-8 h-8 rounded-full bg-primary/20 text-primary-light flex items-center justify-center text-sm">
                                    3
                                </span>
                                {t("installation.step3.title")}
                            </h3>
                            <ol className="text-muted space-y-2 ml-10">
                                <li>
                                    1. <code className="text-foreground">{t("installation.step3.instructions.1")}</code>
                                </li>
                                <li>2. {t("installation.step3.instructions.2")}</li>
                                <li>3. {t("installation.step3.instructions.3")}</li>
                                <li>
                                    4. <code className="text-foreground">{t("installation.step3.instructions.4")}</code>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>

            {/* Footer */}
            <footer className="py-12 border-t border-white/5">
                <div className="mx-auto max-w-6xl px-6 text-center">
                    <p className="text-muted">
                        {t("footer.madeWith")}{" "}
                        <a
                            href="https://github.com/isandrel"
                            className="text-foreground hover:text-primary-light transition-colors"
                        >
                            isandrel
                        </a>
                    </p>
                    <p className="text-sm text-muted/60 mt-2">{t("footer.license")}</p>
                </div>
            </footer>
        </div>
    );
}
</file>

<file path="website/app/layout.tsx">
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";

const inter = Inter({
    variable: "--font-inter",
    subsets: ["latin"],
});

const baseUrl = "https://isandrel.github.io/bookmark-scout";

export const metadata: Metadata = {
    metadataBase: new URL(baseUrl),
    title: {
        default: "Bookmark Scout - Modern Chrome Bookmark Manager",
        template: "%s | Bookmark Scout",
    },
    description:
        "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders. Features drag-and-drop, instant search, dark mode, and side panel support.",
    keywords: [
        "Chrome extension",
        "bookmark manager",
        "bookmark organizer",
        "browser bookmarks",
        "bookmark search",
        "drag and drop bookmarks",
        "bookmark folders",
        "Chrome bookmarks",
        "Firefox bookmarks",
        "bookmark scout",
    ],
    authors: [{ name: "isandrel", url: "https://github.com/isandrel" }],
    creator: "isandrel",
    publisher: "isandrel",
    openGraph: {
        type: "website",
        locale: "en_US",
        alternateLocale: ["ja_JP", "ko_KR"],
        url: baseUrl,
        siteName: "Bookmark Scout",
        title: "Bookmark Scout - Modern Chrome Bookmark Manager",
        description:
            "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders. Features drag-and-drop, instant search, and dark mode.",
        images: [
            {
                url: "/bookmark-scout/icon.png",
                width: 128,
                height: 128,
                alt: "Bookmark Scout Icon",
            },
        ],
    },
    twitter: {
        card: "summary",
        title: "Bookmark Scout - Modern Chrome Bookmark Manager",
        description:
            "A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders.",
        images: ["/bookmark-scout/icon.png"],
    },
    robots: {
        index: true,
        follow: true,
        googleBot: {
            index: true,
            follow: true,
            "max-video-preview": -1,
            "max-image-preview": "large",
            "max-snippet": -1,
        },
    },
    icons: {
        icon: "/bookmark-scout/icon.png",
        apple: "/bookmark-scout/icon.png",
    },
    manifest: "/bookmark-scout/manifest.json",
    category: "technology",
};

export default function RootLayout({
    children,
}: Readonly<{
    children: React.ReactNode;
}>) {
    return (
        <html lang="en" className="dark">
            <body className={`${inter.variable} font-sans antialiased`}>
                {children}
            </body>
        </html>
    );
}
</file>

<file path=".github/workflows/repomix.yml">
name: Generate Repomix Output

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch: # Allow manual trigger

permissions:
  contents: write

jobs:
  repomix:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v6
        with:
          fetch-depth: 0

      - name: Setup Bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: latest

      - name: Generate Repomix Output
        run: bunx repomix --output repomix-output.xml

      - name: Upload Repomix Output
        uses: actions/upload-artifact@v6
        with:
          name: repomix-output
          path: repomix-output.xml
          retention-days: 30

      - name: Commit Repomix Output (on push to main only)
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add -f repomix-output.xml
          git diff --staged --quiet || git commit -m "chore: update repomix-output.xml"
          git push
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# Repomix
repomix-output.*

# WXT
.wxt
.output

# Extension signing (keep locally, add to GitHub Secrets)
dist.pem
dist.crx
</file>

<file path="wxt.config.ts">
import { defineConfig } from 'wxt';
import react from '@vitejs/plugin-react-swc';
import path from 'node:path';

// See https://wxt.dev/api/config.html
export default defineConfig({
    srcDir: 'src',
    outDir: 'dist',

    manifest: {
        name: '__MSG_extName__',
        version: '0.1.0',
        description: '__MSG_extDescription__',
        default_locale: 'en',
        icons: {
            16: 'icon-16.png',
            32: 'icon-32.png',
            48: 'icon-48.png',
            96: 'icon-96.png',
            128: 'icon-128.png',
        },
        action: {
            default_icon: {
                16: 'icon-16.png',
                32: 'icon-32.png',
                48: 'icon-48.png',
            },
        },
        permissions: ['bookmarks', 'tabs', 'favicon', 'storage', 'sidePanel'],
        web_accessible_resources: [
            {
                resources: ['_favicon/*'],
                matches: ['<all_urls>'],
                extension_ids: ['*'],
            },
        ],
    },

    vite: () => ({
        plugins: [react()],
        resolve: {
            alias: {
                '@': path.resolve(__dirname, './src'),
            },
        },
    }),
});
</file>

<file path="package.json">
{
  "name": "bookmark-scout",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "wxt",
    "dev:firefox": "wxt -b firefox",
    "dev:edge": "wxt -b edge",
    "build": "wxt build",
    "build:firefox": "wxt build -b firefox",
    "build:edge": "wxt build -b edge",
    "zip": "wxt zip",
    "zip:firefox": "wxt zip -b firefox",
    "zip:edge": "wxt zip -b edge",
    "lint": "biome lint ./src",
    "format": "biome format --write ./src",
    "check": "biome check --write ./src",
    "changeset": "changeset",
    "version": "changeset version",
    "release": "bun run build && changeset publish",
    "postinstall": "wxt prepare"
  },
  "dependencies": {
    "@atlaskit/pragmatic-drag-and-drop": "^1.7.7",
    "@atlaskit/pragmatic-drag-and-drop-flourish": "^2.0.9",
    "@atlaskit/pragmatic-drag-and-drop-hitbox": "^1.1.0",
    "@atlaskit/pragmatic-drag-and-drop-live-region": "^1.3.1",
    "@radix-ui/react-accordion": "^1.2.12",
    "@radix-ui/react-checkbox": "^1.3.3",
    "@radix-ui/react-collapsible": "^1.1.12",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-popover": "^1.1.15",
    "@radix-ui/react-select": "^2.2.6",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slot": "^1.2.4",
    "@radix-ui/react-switch": "^1.2.6",
    "@radix-ui/react-toast": "^1.2.15",
    "@radix-ui/react-tooltip": "^1.2.8",
    "@tanstack/react-table": "^8.21.3",
    "clsx": "^2.1.1",
    "cmdk": "1.1.1",
    "framer-motion": "^12.23.25",
    "lucide-react": "^0.562.0",
    "react": "^19.2.0",
    "react-day-picker": "^9.11.3",
    "react-dom": "^19.2.0",
    "tailwind-merge": "^3.4.0",
    "tailwindcss-animate": "^1.0.7",
    "zustand": "^5.0.9"
  },
  "devDependencies": {
    "@biomejs/biome": "^2.3.10",
    "@changesets/cli": "^2.29.8",
    "@shadcn/ui": "^0.0.4",
    "@tailwindcss/postcss": "^4.1.18",
    "@types/chrome": "^0.1.32",
    "@types/node": "^25.0.3",
    "@types/react": "^19.2.7",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react-swc": "^4.2.2",
    "autoprefixer": "^10.4.22",
    "class-variance-authority": "^0.7.1",
    "postcss": "^8.5.6",
    "shadcn-ui": "^0.9.5",
    "tailwindcss": "^4.1.17",
    "typescript": "^5.9.3",
    "wxt": "^0.20.13"
  }
}
</file>

<file path="README.md">
<p align="center">
  <strong>English</strong> ·
  <a href="./translations/README.ja.md">日本語</a> ·
  <a href="./translations/README.ko.md">한국어</a>
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/isandrel/bookmark-scout/main/public/icon-128.png" alt="Bookmark Scout Logo" width="80" height="80">
</p>

<h1 align="center">🔖 Bookmark Scout</h1>

<p align="center">
  <strong>A modern Chrome extension to quickly search, organize, and save bookmarks to specific folders.</strong>
</p>

<p align="center">
  <a href="https://github.com/isandrel/bookmark-scout/blob/main/LICENSE">
    <img src="https://img.shields.io/badge/license-AGPL--3.0-blue?style=flat-square" alt="License">
  </a>
  <a href="https://github.com/isandrel/bookmark-scout/stargazers">
    <img src="https://img.shields.io/github/stars/isandrel/bookmark-scout?style=flat-square" alt="Stars">
  </a>
  <a href="https://github.com/isandrel/bookmark-scout/issues">
    <img src="https://img.shields.io/github/issues/isandrel/bookmark-scout?style=flat-square" alt="Issues">
  </a>
  <img src="https://img.shields.io/badge/manifest-v3-blue?style=flat-square" alt="Manifest V3">
</p>

<p align="center">
  <img src="https://img.shields.io/badge/React-19-61DAFB?style=flat-square&logo=react&logoColor=white" alt="React">
  <img src="https://img.shields.io/badge/TypeScript-5.9-3178C6?style=flat-square&logo=typescript&logoColor=white" alt="TypeScript">
  <img src="https://img.shields.io/badge/WXT-0.20-646CFF?style=flat-square&logo=vite&logoColor=white" alt="WXT">
  <img src="https://img.shields.io/badge/Rolldown--Vite-7.3-646CFF?style=flat-square&logo=vite&logoColor=white" alt="Rolldown-Vite">
  <img src="https://img.shields.io/badge/TailwindCSS-4-06B6D4?style=flat-square&logo=tailwindcss&logoColor=white" alt="TailwindCSS">
  <img src="https://img.shields.io/badge/Zustand-5-764ABC?style=flat-square&logo=redux&logoColor=white" alt="Zustand">
  <img src="https://img.shields.io/badge/Nx-22-143055?style=flat-square&logo=nx&logoColor=white" alt="Nx">
  <img src="https://img.shields.io/badge/Bun-1.3-000000?style=flat-square&logo=bun&logoColor=white" alt="Bun">
<p align="center">
  <img src="https://img.shields.io/badge/Chrome-Supported-4285F4?style=flat-square&logo=googlechrome&logoColor=white" alt="Chrome">
  <img src="https://img.shields.io/badge/Firefox-Supported-FF7139?style=flat-square&logo=firefox&logoColor=white" alt="Firefox">
  <img src="https://img.shields.io/badge/Edge-Supported-0078D7?style=flat-square&logo=microsoftedge&logoColor=white" alt="Edge">
  <img src="https://img.shields.io/badge/Safari-Not%20Supported-999999?style=flat-square&logo=safari&logoColor=white" alt="Safari">
</p>

---

## 🌐 Browser Support

| Browser | Status          | Notes                                          |
| ------- | --------------- | ---------------------------------------------- |
| Chrome  | ✅ Supported     | Full support with Manifest V3                  |
| Firefox | ✅ Supported     | Full support with Manifest V2                  |
| Edge    | ✅ Supported     | Full support with Manifest V3 (Chromium-based) |
| Safari  | ❌ Not Supported | Apple has not implemented the `bookmarks` API  |

### Why Safari is Not Supported

Safari Web Extensions do not support the `browser.bookmarks` API, which is essential for this extension's core functionality. Despite Apple announcing Web Extension support in Safari 14 (2020), the bookmarks API was never implemented. This is an Apple platform limitation, not a WXT or extension framework issue.

For updates on Safari API support, see [WebKit Bug Tracker](https://bugs.webkit.org/).

---

## ✨ Features

### ✅ Current Focus: Popup & Side Panel

- [x] 🔍 **Instant Search** — Quickly find bookmarks with debounced search and folder filtering
- [x] 📂 **Drag & Drop** — Organize bookmarks and folders with intuitive drag-and-drop
- [x] ⚡ **Quick Add** — Save the current tab to any folder with one click
- [x] 📱 **Side Panel** — Access your bookmarks from Chrome's side panel
- [x] 🌙 **Dark Mode** — Beautiful dark theme with smooth transitions
- [x] 🎯 **Expand/Collapse All** — Quickly expand or collapse nested folders
- [x] 📁 **Create Folders** — Create new folders directly from the popup
- [x] 🗑️ **Delete Items** — Remove bookmarks and folders with confirmation

### 🚧 Roadmap

- [ ] 🗂️ **Full Bookmarks Manager** — Replace Chrome's default bookmarks page with modern table view
- [ ] ⚙️ **Options Page** — Customize extension settings and preferences
- [ ] 🏷️ **Tags** — Add custom tags to bookmarks for better organization
- [ ] 🔄 **Sync** — Cross-device bookmark sync with cloud backup
- [ ] 📊 **Analytics** — View bookmark usage statistics
- [ ] 🔗 **Duplicate Detection** — Find and remove duplicate bookmarks
- [ ] 💀 **Dead Link Checker** — Detect and clean up broken links
- [ ] 📤 **Import/Export** — Backup and restore bookmarks as JSON
- [ ] ⌨️ **Keyboard Shortcuts** — Navigate and manage bookmarks with hotkeys
- [ ] 🔒 **Private Bookmarks** — Password-protected bookmark folders

---

## 🛠️ Tech Stack

| Layer             | Technology                                                                                       |
| ----------------- | ------------------------------------------------------------------------------------------------ |
| **Framework**     | React 19 + TypeScript                                                                            |
| **Build**         | [WXT](https://wxt.dev) + Rolldown-Vite + Nx (monorepo with caching)                              |
| **Runtime**       | Bun 1.3                                                                                          |
| **State**         | [Zustand](https://zustand-demo.pmnd.rs/) (lightweight state management)                          |
| **Styling**       | TailwindCSS 4 + CSS Variables                                                                    |
| **UI Components** | [shadcn/ui](https://ui.shadcn.com) (Radix primitives)                                            |
| **Drag & Drop**   | [@atlaskit/pragmatic-drag-and-drop](https://atlassian.design/components/pragmatic-drag-and-drop) |
| **Animations**    | Framer Motion                                                                                    |
| **Table**         | TanStack React Table                                                                             |

> **📍 Current Focus:** Popup development. Options page and bookmarks override temporarily disabled.

---

## 📦 Installation

### From Source

```bash
# Clone the repository
git clone https://github.com/isandrel/bookmark-scout.git
cd bookmark-scout

# Install dependencies
bun install

# Build the extension
bun run build
```

### Load in Chrome

1. Open `chrome://extensions/`
2. Enable **Developer mode** (top right)
3. Click **Load unpacked**
4. Select the `dist` folder

---

## 🚀 Development

```bash
# Start development server
bun run dev

# Build for production
bun run build

# Lint code
bun run lint
```

---

## 📁 Project Structure

```
src/
├── components/
│   ├── page/
│   │   ├── BookmarksPage.tsx    # Full bookmarks manager
│   │   ├── OptionsPage.tsx      # Extension settings
│   │   └── PopupPage.tsx        # Main popup with search & DnD
│   └── ui/                      # shadcn components
├── hooks/                       # Custom React hooks
├── lib/                         # Utility functions
├── popup.html                   # Popup entry
├── bookmarks.html               # Bookmarks page override
├── options.html                 # Options page
└── sidepanel.html               # Side panel
```

---

## 🔐 Permissions

| Permission  | Purpose                            |
| ----------- | ---------------------------------- |
| `bookmarks` | Read and write bookmarks           |
| `tabs`      | Get current tab info for quick-add |
| `favicon`   | Display website favicons           |
| `storage`   | Save user preferences              |
| `sidePanel` | Enable Chrome side panel           |

---

## 🤝 Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'feat: add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## 📄 License

This project is licensed under the GNU Affero General Public License v3.0 - see the [LICENSE](LICENSE) file for details.

---

## ⭐ Star History

<a href="https://star-history.com/#isandrel/bookmark-scout&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=isandrel/bookmark-scout&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=isandrel/bookmark-scout&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=isandrel/bookmark-scout&type=Date" />
 </picture>
</a>

---

<p align="center">
  Made with ❤️ by <a href="https://github.com/isandrel">isandrel</a>
</p>
</file>

</files>
